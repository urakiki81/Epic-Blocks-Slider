{"version":3,"sources":["@wordpress/editor/src/components/entities-saved-states/entity-record-item.js"],"names":["CheckboxControl","Button","PanelRow","__","useSelect","useDispatch","useCallback","EntityRecordItem","record","checked","onChange","closePanel","name","kind","title","key","parentBlockId","select","getEditedEntityRecord","blocks","parents","getBlockParents","clientId","length","isSelected","selectedBlockId","getSelectedBlockClientId","isSelectedText","selectBlock","selectParentBlock","selectAndDismiss"],"mappings":";;AAAA;;;AAGA,SAASA,eAAT,EAA0BC,MAA1B,EAAkCC,QAAlC,QAAkD,uBAAlD;AACA,SAASC,EAAT,QAAmB,iBAAnB;AACA,SAASC,SAAT,EAAoBC,WAApB,QAAuC,iBAAvC;AACA,SAASC,WAAT,QAA4B,oBAA5B;AAEA,eAAe,SAASC,gBAAT,OAKX;AAAA,MAJHC,MAIG,QAJHA,MAIG;AAAA,MAHHC,OAGG,QAHHA,OAGG;AAAA,MAFHC,QAEG,QAFHA,QAEG;AAAA,MADHC,UACG,QADHA,UACG;AAAA,MACKC,IADL,GACgCJ,MADhC,CACKI,IADL;AAAA,MACWC,IADX,GACgCL,MADhC,CACWK,IADX;AAAA,MACiBC,KADjB,GACgCN,MADhC,CACiBM,KADjB;AAAA,MACwBC,GADxB,GACgCP,MADhC,CACwBO,GADxB;AAEH,MAAMC,aAAa,GAAGZ,SAAS,CAAE,UAAEa,MAAF,EAAc;AAAA;;AAC9C;AAD8C,gCAEtBA,MAAM,CAAE,MAAF,CAAN,CAAiBC,qBAAjB,CACvBL,IADuB,EAEvBD,IAFuB,EAGvBG,GAHuB,CAFsB;AAAA,uDAEtCI,MAFsC;AAAA,QAEtCA,MAFsC,uCAE7B,EAF6B,2BAO9C;;;AACA,QAAMC,OAAO,GAAGH,MAAM,CAAE,mBAAF,CAAN,CAA8BI,eAA9B,aACfF,MAAM,CAAE,CAAF,CADS,6CACf,SAAaG,QADE,CAAhB,CAR8C,CAW9C;;AACA,WAAOF,OAAO,CAAEA,OAAO,CAACG,MAAR,GAAiB,CAAnB,CAAd;AACA,GAb8B,EAa5B,EAb4B,CAA/B;AAeA,MAAMC,UAAU,GAAGpB,SAAS,CAC3B,UAAEa,MAAF,EAAc;AACb,QAAMQ,eAAe,GAAGR,MAAM,CAC7B,mBAD6B,CAAN,CAEtBS,wBAFsB,EAAxB;AAGA,WAAOD,eAAe,KAAKT,aAA3B;AACA,GAN0B,EAO3B,CAAEA,aAAF,CAP2B,CAA5B;AASA,MAAMW,cAAc,GAAGH,UAAU,GAAGrB,EAAE,CAAE,UAAF,CAAL,GAAsBA,EAAE,CAAE,QAAF,CAAzD;;AA1BG,qBA2BqBE,WAAW,CAAE,mBAAF,CA3BhC;AAAA,MA2BKuB,WA3BL,gBA2BKA,WA3BL;;AA4BH,MAAMC,iBAAiB,GAAGvB,WAAW,CAAE;AAAA,WAAMsB,WAAW,CAAEZ,aAAF,CAAjB;AAAA,GAAF,EAAsC,CAC1EA,aAD0E,CAAtC,CAArC;AAGA,MAAMc,gBAAgB,GAAGxB,WAAW,CAAE,YAAM;AAC3CsB,IAAAA,WAAW,CAAEZ,aAAF,CAAX;AACAL,IAAAA,UAAU;AACV,GAHmC,EAGjC,CAAEK,aAAF,CAHiC,CAApC;AAKA,SACC,cAAC,QAAD,QACC,cAAC,eAAD;AACC,IAAA,KAAK,EAAG,8BAAUF,KAAK,IAAIX,EAAE,CAAE,UAAF,CAArB,CADT;AAEC,IAAA,OAAO,EAAGM,OAFX;AAGC,IAAA,QAAQ,EAAGC;AAHZ,IADD,EAMGM,aAAa,GACd,8BACC,cAAC,MAAD;AACC,IAAA,OAAO,EAAGa,iBADX;AAEC,IAAA,SAAS,EAAC,oCAFX;AAGC,IAAA,QAAQ,EAAGL;AAHZ,KAKGG,cALH,CADD,EAQC,cAAC,MAAD;AACC,IAAA,OAAO,EAAGG,gBADX;AAEC,IAAA,SAAS,EAAC,0CAFX;AAGC,IAAA,QAAQ,EAAGN;AAHZ,KAKGG,cALH,CARD,CADc,GAiBX,IAvBL,CADD;AA2BA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { CheckboxControl, Button, PanelRow } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useCallback } from '@wordpress/element';\n\nexport default function EntityRecordItem( {\n\trecord,\n\tchecked,\n\tonChange,\n\tclosePanel,\n} ) {\n\tconst { name, kind, title, key } = record;\n\tconst parentBlockId = useSelect( ( select ) => {\n\t\t// Get entity's blocks.\n\t\tconst { blocks = [] } = select( 'core' ).getEditedEntityRecord(\n\t\t\tkind,\n\t\t\tname,\n\t\t\tkey\n\t\t);\n\t\t// Get parents of the entity's first block.\n\t\tconst parents = select( 'core/block-editor' ).getBlockParents(\n\t\t\tblocks[ 0 ]?.clientId\n\t\t);\n\t\t// Return closest parent block's clientId.\n\t\treturn parents[ parents.length - 1 ];\n\t}, [] );\n\n\tconst isSelected = useSelect(\n\t\t( select ) => {\n\t\t\tconst selectedBlockId = select(\n\t\t\t\t'core/block-editor'\n\t\t\t).getSelectedBlockClientId();\n\t\t\treturn selectedBlockId === parentBlockId;\n\t\t},\n\t\t[ parentBlockId ]\n\t);\n\tconst isSelectedText = isSelected ? __( 'Selected' ) : __( 'Select' );\n\tconst { selectBlock } = useDispatch( 'core/block-editor' );\n\tconst selectParentBlock = useCallback( () => selectBlock( parentBlockId ), [\n\t\tparentBlockId,\n\t] );\n\tconst selectAndDismiss = useCallback( () => {\n\t\tselectBlock( parentBlockId );\n\t\tclosePanel();\n\t}, [ parentBlockId ] );\n\n\treturn (\n\t\t<PanelRow>\n\t\t\t<CheckboxControl\n\t\t\t\tlabel={ <strong>{ title || __( 'Untitled' ) }</strong> }\n\t\t\t\tchecked={ checked }\n\t\t\t\tonChange={ onChange }\n\t\t\t/>\n\t\t\t{ parentBlockId ? (\n\t\t\t\t<>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={ selectParentBlock }\n\t\t\t\t\t\tclassName=\"entities-saved-states__find-entity\"\n\t\t\t\t\t\tdisabled={ isSelected }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ isSelectedText }\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={ selectAndDismiss }\n\t\t\t\t\t\tclassName=\"entities-saved-states__find-entity-small\"\n\t\t\t\t\t\tdisabled={ isSelected }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ isSelectedText }\n\t\t\t\t\t</Button>\n\t\t\t\t</>\n\t\t\t) : null }\n\t\t</PanelRow>\n\t);\n}\n"]}
{"version":3,"sources":["@wordpress/editor/src/store/utils/serialize-blocks.js"],"names":["memoize","isUnmodifiedDefaultBlock","serialize","getFreeformContentHandlerName","removep","serializeBlocks","blocksForSerialization","length","content","name","maxSize"],"mappings":"AAAA;;;AAGA,OAAOA,OAAP,MAAoB,QAApB;AAEA;;;;AAGA,SACCC,wBADD,EAECC,SAFD,EAGCC,6BAHD,QAIO,mBAJP;AAKA,SAASC,OAAT,QAAwB,kBAAxB;AAEA;;;;;;;;AAOA,IAAMC,eAAe,GAAGL,OAAO,CAC9B,UAAEM,sBAAF,EAA8B;AAC7B;AACA;AACA,MACCA,sBAAsB,CAACC,MAAvB,KAAkC,CAAlC,IACAN,wBAAwB,CAAEK,sBAAsB,CAAE,CAAF,CAAxB,CAFzB,EAGE;AACDA,IAAAA,sBAAsB,GAAG,EAAzB;AACA;;AAED,MAAIE,OAAO,GAAGN,SAAS,CAAEI,sBAAF,CAAvB,CAV6B,CAY7B;AACA;AACA;;AACA,MACCA,sBAAsB,CAACC,MAAvB,KAAkC,CAAlC,IACAD,sBAAsB,CAAE,CAAF,CAAtB,CAA4BG,IAA5B,KAAqCN,6BAA6B,EAFnE,EAGE;AACDK,IAAAA,OAAO,GAAGJ,OAAO,CAAEI,OAAF,CAAjB;AACA;;AAED,SAAOA,OAAP;AACA,CAxB6B,EAyB9B;AAAEE,EAAAA,OAAO,EAAE;AAAX,CAzB8B,CAA/B;AA4BA,eAAeL,eAAf","sourcesContent":["/**\n * External dependencies\n */\nimport memoize from 'memize';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tisUnmodifiedDefaultBlock,\n\tserialize,\n\tgetFreeformContentHandlerName,\n} from '@wordpress/blocks';\nimport { removep } from '@wordpress/autop';\n\n/**\n * Serializes blocks following backwards compatibility conventions.\n *\n * @param {Array} blocksForSerialization The blocks to serialize.\n *\n * @return {string} The blocks serialization.\n */\nconst serializeBlocks = memoize(\n\t( blocksForSerialization ) => {\n\t\t// A single unmodified default block is assumed to\n\t\t// be equivalent to an empty post.\n\t\tif (\n\t\t\tblocksForSerialization.length === 1 &&\n\t\t\tisUnmodifiedDefaultBlock( blocksForSerialization[ 0 ] )\n\t\t) {\n\t\t\tblocksForSerialization = [];\n\t\t}\n\n\t\tlet content = serialize( blocksForSerialization );\n\n\t\t// For compatibility, treat a post consisting of a\n\t\t// single freeform block as legacy content and apply\n\t\t// pre-block-editor removep'd content formatting.\n\t\tif (\n\t\t\tblocksForSerialization.length === 1 &&\n\t\t\tblocksForSerialization[ 0 ].name === getFreeformContentHandlerName()\n\t\t) {\n\t\t\tcontent = removep( content );\n\t\t}\n\n\t\treturn content;\n\t},\n\t{ maxSize: 1 }\n);\n\nexport default serializeBlocks;\n"]}
{"version":3,"sources":["@wordpress/editor/src/components/provider/with-registry-provider.js"],"names":["withRegistryProvider","WrappedComponent","props","useSubRegistry","registry","additionalProps","subRegistry","setSubRegistry","newRegistry","blockEditorStoreConfig","store","registerStore","storeConfig"],"mappings":";;;;;;;;;AAGA;;;;;;AACA;;AAKA;;AACA;;AAKA;;AACA;;AAhBA;;;;AAYA;;;AAMA,IAAMA,oBAAoB,GAAG,yCAC5B,UAAEC,gBAAF;AAAA,SACC,wBAAc,UAAEC,KAAF,EAAa;AAAA,gCAKtBA,KALsB,CAEzBC,cAFyB;AAAA,QAEzBA,cAFyB,sCAER,IAFQ;AAAA,QAGzBC,QAHyB,GAKtBF,KALsB,CAGzBE,QAHyB;AAAA,QAItBC,eAJsB,0CAKtBH,KALsB;;AAM1B,QAAK,CAAEC,cAAP,EAAwB;AACvB,aAAO,4BAAC,gBAAD,EAAuBE,eAAvB,CAAP;AACA;;AARyB,oBAUc,uBAAU,IAAV,CAVd;AAAA;AAAA,QAUlBC,WAVkB;AAAA,QAULC,cAVK;;AAW1B,4BAAW,YAAM;AAChB,UAAMC,WAAW,GAAG,0BACnB;AACC,6BAAqBC;AADtB,OADmB,EAInBL,QAJmB,CAApB;AAMA,UAAMM,KAAK,GAAGF,WAAW,CAACG,aAAZ,CACb,aADa,EAEbC,kBAFa,CAAd,CAPgB,CAWhB;;AACA,gCAAkBF,KAAlB;AACAH,MAAAA,cAAc,CAAEC,WAAF,CAAd;AACA,KAdD,EAcG,CAAEJ,QAAF,CAdH;;AAgBA,QAAK,CAAEE,WAAP,EAAqB;AACpB,aAAO,IAAP;AACA;;AAED,WACC,4BAAC,sBAAD;AAAkB,MAAA,KAAK,EAAGA;AAA1B,OACC,4BAAC,gBAAD,EAAuBD,eAAvB,CADD,CADD;AAKA,GApCD,CADD;AAAA,CAD4B,EAuC5B,sBAvC4B,CAA7B;eA0CeL,oB","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\nimport {\n\twithRegistry,\n\tcreateRegistry,\n\tRegistryProvider,\n} from '@wordpress/data';\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { storeConfig as blockEditorStoreConfig } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport { storeConfig } from '../../store';\nimport applyMiddlewares from '../../store/middlewares';\n\nconst withRegistryProvider = createHigherOrderComponent(\n\t( WrappedComponent ) =>\n\t\twithRegistry( ( props ) => {\n\t\t\tconst {\n\t\t\t\tuseSubRegistry = true,\n\t\t\t\tregistry,\n\t\t\t\t...additionalProps\n\t\t\t} = props;\n\t\t\tif ( ! useSubRegistry ) {\n\t\t\t\treturn <WrappedComponent { ...additionalProps } />;\n\t\t\t}\n\n\t\t\tconst [ subRegistry, setSubRegistry ] = useState( null );\n\t\t\tuseEffect( () => {\n\t\t\t\tconst newRegistry = createRegistry(\n\t\t\t\t\t{\n\t\t\t\t\t\t'core/block-editor': blockEditorStoreConfig,\n\t\t\t\t\t},\n\t\t\t\t\tregistry\n\t\t\t\t);\n\t\t\t\tconst store = newRegistry.registerStore(\n\t\t\t\t\t'core/editor',\n\t\t\t\t\tstoreConfig\n\t\t\t\t);\n\t\t\t\t// This should be removed after the refactoring of the effects to controls.\n\t\t\t\tapplyMiddlewares( store );\n\t\t\t\tsetSubRegistry( newRegistry );\n\t\t\t}, [ registry ] );\n\n\t\t\tif ( ! subRegistry ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<RegistryProvider value={ subRegistry }>\n\t\t\t\t\t<WrappedComponent { ...additionalProps } />\n\t\t\t\t</RegistryProvider>\n\t\t\t);\n\t\t} ),\n\t'withRegistryProvider'\n);\n\nexport default withRegistryProvider;\n"]}
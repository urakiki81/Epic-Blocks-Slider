{"version":3,"sources":["@wordpress/core-data/src/entities.js"],"names":["loadPostTypeEntities","loadTaxonomyEntities","getKindEntities","upperFirst","camelCase","map","find","get","startCase","__","addEntities","apiFetch","select","DEFAULT_ENTITY_KEY","defaultEntities","label","name","kind","baseURL","getTitle","record","key","plural","transientEdits","blocks","kinds","loadEntities","path","postTypes","postType","rest_base","labels","singular_name","selectionStart","selectionEnd","mergedEdits","meta","slug","id","taxonomies","taxonomy","getMethodName","prefix","usePlural","entity","kindPrefix","nameSuffix","suffix","entities","length","kindConfig"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { upperFirst, camelCase, map, find, get, startCase } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { addEntities } from './actions';\nimport { apiFetch, select } from './controls';\n\nexport const DEFAULT_ENTITY_KEY = 'id';\n\nexport const defaultEntities = [\n\t{\n\t\tlabel: __( 'Base' ),\n\t\tname: '__unstableBase',\n\t\tkind: 'root',\n\t\tbaseURL: '',\n\t},\n\t{\n\t\tlabel: __( 'Site' ),\n\t\tname: 'site',\n\t\tkind: 'root',\n\t\tbaseURL: '/wp/v2/settings',\n\t\tgetTitle: ( record ) => {\n\t\t\treturn get( record, [ 'title' ], __( 'Site Title' ) );\n\t\t},\n\t},\n\t{\n\t\tlabel: __( 'Post Type' ),\n\t\tname: 'postType',\n\t\tkind: 'root',\n\t\tkey: 'slug',\n\t\tbaseURL: '/wp/v2/types',\n\t},\n\t{\n\t\tname: 'media',\n\t\tkind: 'root',\n\t\tbaseURL: '/wp/v2/media',\n\t\tplural: 'mediaItems',\n\t\tlabel: __( 'Media' ),\n\t},\n\t{\n\t\tname: 'taxonomy',\n\t\tkind: 'root',\n\t\tkey: 'slug',\n\t\tbaseURL: '/wp/v2/taxonomies',\n\t\tplural: 'taxonomies',\n\t\tlabel: __( 'Taxonomy' ),\n\t},\n\t{\n\t\tname: 'sidebar',\n\t\tkind: 'root',\n\t\tbaseURL: '/__experimental/sidebars',\n\t\tplural: 'sidebars',\n\t\ttransientEdits: { blocks: true },\n\t\tlabel: __( 'Widget areas' ),\n\t},\n\t{\n\t\tlabel: __( 'User' ),\n\t\tname: 'user',\n\t\tkind: 'root',\n\t\tbaseURL: '/wp/v2/users',\n\t\tplural: 'users',\n\t},\n\t{\n\t\tname: 'comment',\n\t\tkind: 'root',\n\t\tbaseURL: '/wp/v2/comments',\n\t\tplural: 'comments',\n\t\tlabel: __( 'Comment' ),\n\t},\n\t{\n\t\tname: 'menu',\n\t\tkind: 'root',\n\t\tbaseURL: '/__experimental/menus',\n\t\tplural: 'menus',\n\t\tlabel: __( 'Menu' ),\n\t},\n\t{\n\t\tname: 'menuItem',\n\t\tkind: 'root',\n\t\tbaseURL: '/__experimental/menu-items',\n\t\tplural: 'menuItems',\n\t\tlabel: __( 'Menu Item' ),\n\t},\n\t{\n\t\tname: 'menuLocation',\n\t\tkind: 'root',\n\t\tbaseURL: '/__experimental/menu-locations',\n\t\tplural: 'menuLocations',\n\t\tlabel: __( 'Menu Location' ),\n\t\tkey: 'name',\n\t},\n];\n\nexport const kinds = [\n\t{ name: 'postType', loadEntities: loadPostTypeEntities },\n\t{ name: 'taxonomy', loadEntities: loadTaxonomyEntities },\n];\n\n/**\n * Returns the list of post type entities.\n *\n * @return {Promise} Entities promise\n */\nfunction* loadPostTypeEntities() {\n\tconst postTypes = yield apiFetch( { path: '/wp/v2/types?context=edit' } );\n\treturn map( postTypes, ( postType, name ) => {\n\t\treturn {\n\t\t\tkind: 'postType',\n\t\t\tbaseURL: '/wp/v2/' + postType.rest_base,\n\t\t\tname,\n\t\t\tlabel: postType.labels.singular_name,\n\t\t\ttransientEdits: {\n\t\t\t\tblocks: true,\n\t\t\t\tselectionStart: true,\n\t\t\t\tselectionEnd: true,\n\t\t\t},\n\t\t\tmergedEdits: { meta: true },\n\t\t\tgetTitle( record ) {\n\t\t\t\tif ( name === 'wp_template_part' || name === 'wp_template' ) {\n\t\t\t\t\treturn startCase( record.slug );\n\t\t\t\t}\n\t\t\t\treturn get( record, [ 'title', 'rendered' ], record.id );\n\t\t\t},\n\t\t};\n\t} );\n}\n\n/**\n * Returns the list of the taxonomies entities.\n *\n * @return {Promise} Entities promise\n */\nfunction* loadTaxonomyEntities() {\n\tconst taxonomies = yield apiFetch( {\n\t\tpath: '/wp/v2/taxonomies?context=edit',\n\t} );\n\treturn map( taxonomies, ( taxonomy, name ) => {\n\t\treturn {\n\t\t\tkind: 'taxonomy',\n\t\t\tbaseURL: '/wp/v2/' + taxonomy.rest_base,\n\t\t\tname,\n\t\t\tlabel: taxonomy.labels.singular_name,\n\t\t};\n\t} );\n}\n\n/**\n * Returns the entity's getter method name given its kind and name.\n *\n * @param {string}  kind      Entity kind.\n * @param {string}  name      Entity name.\n * @param {string}  prefix    Function prefix.\n * @param {boolean} usePlural Whether to use the plural form or not.\n *\n * @return {string} Method name\n */\nexport const getMethodName = (\n\tkind,\n\tname,\n\tprefix = 'get',\n\tusePlural = false\n) => {\n\tconst entity = find( defaultEntities, { kind, name } );\n\tconst kindPrefix = kind === 'root' ? '' : upperFirst( camelCase( kind ) );\n\tconst nameSuffix =\n\t\tupperFirst( camelCase( name ) ) + ( usePlural ? 's' : '' );\n\tconst suffix =\n\t\tusePlural && entity.plural\n\t\t\t? upperFirst( camelCase( entity.plural ) )\n\t\t\t: nameSuffix;\n\treturn `${ prefix }${ kindPrefix }${ suffix }`;\n};\n\n/**\n * Loads the kind entities into the store.\n *\n * @param {string} kind  Kind\n *\n * @return {Array} Entities\n */\nexport function* getKindEntities( kind ) {\n\tlet entities = yield select( 'getEntitiesByKind', kind );\n\tif ( entities && entities.length !== 0 ) {\n\t\treturn entities;\n\t}\n\n\tconst kindConfig = find( kinds, { name: kind } );\n\tif ( ! kindConfig ) {\n\t\treturn [];\n\t}\n\n\tentities = yield kindConfig.loadEntities();\n\tyield addEntities( entities );\n\n\treturn entities;\n}\n"]}
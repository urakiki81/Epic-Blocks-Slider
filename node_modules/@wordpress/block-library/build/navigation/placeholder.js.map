{"version":3,"sources":["@wordpress/block-library/src/navigation/placeholder.js"],"names":["CREATE_EMPTY_OPTION_VALUE","CREATE_FROM_PAGES_OPTION_VALUE","getPlaceholderInstructions","hasMenus","hasPages","getSelectedMenu","selectedCreateOption","optionId","id","undefined","Number","isInteger","mapMenuItemsToBlocks","nodes","map","title","type","url","link","children","innerBlocks","length","label","rendered","opensInNewTab","convertMenuItemsToBlocks","menuItems","menuTree","convertPagesToBlocks","pages","NavigationPlaceholder","ref","onCreate","setSelectedCreateOption","isCreatingFromMenu","setIsCreatingFromMenu","select","getEntityRecords","getMenus","getMenuItems","isResolving","hasFinishedResolution","pagesParameters","parent","order","orderby","menusParameters","per_page","selectedMenu","hasSelectedMenu","menuItemsParameters","menus","isResolvingPages","hasResolvedPages","isResolvingMenus","hasResolvedMenus","hasResolvedMenuItems","isLoading","createOptions","name","className","createFromMenu","blocks","selectNavigationBlock","onCreateButtonClick","key","icon","selectedItem","option"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { createBlock } from '@wordpress/blocks';\nimport {\n\tButton,\n\tCustomSelectControl,\n\tSpinner,\n\tPlaceholder,\n} from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport {\n\tforwardRef,\n\tuseCallback,\n\tuseMemo,\n\tuseState,\n\tuseEffect,\n} from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { navigation as icon } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport createDataTree from './create-data-tree';\n\nconst CREATE_EMPTY_OPTION_VALUE = '__CREATE_EMPTY__';\nconst CREATE_FROM_PAGES_OPTION_VALUE = '__CREATE_FROM_PAGES__';\n\n/**\n * Get instruction text for the Placeholder component.\n *\n * @param {boolean} hasMenus Flag that indicates if there are menus.\n * @param {boolean} hasPages Flag that indicates if there are pages.\n *\n * @return {string} Text to display as the placeholder instructions.\n */\nfunction getPlaceholderInstructions( hasMenus, hasPages ) {\n\tif ( hasMenus && hasPages ) {\n\t\treturn __(\n\t\t\t'Use an existing menu here, include all top-level pages, or add an empty Navigation block.'\n\t\t);\n\t} else if ( hasMenus && ! hasPages ) {\n\t\treturn __(\n\t\t\t'Use an existing menu here, or add an empty Navigation block.'\n\t\t);\n\t} else if ( ! hasMenus && hasPages ) {\n\t\treturn __(\n\t\t\t'Include all existing pages here, or add an empty Navigation block.'\n\t\t);\n\t}\n\n\treturn __( 'Create an empty navigation.' );\n}\n\n/**\n * Return the menu id if the user has one selected.\n *\n * @param {Object} selectedCreateOption An object containing details of\n *                                      the selected create option.\n *\n * @return {number|undefined} The menu id.\n */\nfunction getSelectedMenu( selectedCreateOption ) {\n\tconst optionId = selectedCreateOption?.id;\n\treturn optionId !== undefined && Number.isInteger( optionId )\n\t\t? optionId\n\t\t: undefined;\n}\n\n/**\n * A recursive function that maps menu item nodes to blocks.\n *\n * @param {Object[]} nodes An array of menu items.\n *\n * @return {WPBlock[]} An array of blocks.\n */\nfunction mapMenuItemsToBlocks( nodes ) {\n\treturn nodes.map( ( { title, type, link: url, id, children } ) => {\n\t\tconst innerBlocks =\n\t\t\tchildren && children.length ? mapMenuItemsToBlocks( children ) : [];\n\n\t\treturn createBlock(\n\t\t\t'core/navigation-link',\n\t\t\t{\n\t\t\t\ttype,\n\t\t\t\tid,\n\t\t\t\turl,\n\t\t\t\tlabel: ! title.rendered ? __( '(no title)' ) : title.rendered,\n\t\t\t\topensInNewTab: false,\n\t\t\t},\n\t\t\tinnerBlocks\n\t\t);\n\t} );\n}\n\n/**\n * Convert a flat menu item structure to a nested blocks structure.\n *\n * @param {Object[]} menuItems An array of menu items.\n *\n * @return {WPBlock[]} An array of blocks.\n */\nfunction convertMenuItemsToBlocks( menuItems ) {\n\tif ( ! menuItems ) {\n\t\treturn null;\n\t}\n\n\tconst menuTree = createDataTree( menuItems );\n\treturn mapMenuItemsToBlocks( menuTree );\n}\n\n/**\n * Convert pages to blocks.\n *\n * @param {Object[]} pages An array of pages.\n *\n * @return {WPBlock[]} An array of blocks.\n */\nfunction convertPagesToBlocks( pages ) {\n\tif ( ! pages ) {\n\t\treturn null;\n\t}\n\n\treturn pages.map( ( { title, type, link: url, id } ) =>\n\t\tcreateBlock( 'core/navigation-link', {\n\t\t\ttype,\n\t\t\tid,\n\t\t\turl,\n\t\t\tlabel: ! title.rendered ? __( '(no title)' ) : title.rendered,\n\t\t\topensInNewTab: false,\n\t\t} )\n\t);\n}\n\nfunction NavigationPlaceholder( { onCreate }, ref ) {\n\tconst [ selectedCreateOption, setSelectedCreateOption ] = useState();\n\n\tconst [ isCreatingFromMenu, setIsCreatingFromMenu ] = useState( false );\n\n\tconst {\n\t\tpages,\n\t\tisResolvingPages,\n\t\thasResolvedPages,\n\t\tmenus,\n\t\tisResolvingMenus,\n\t\thasResolvedMenus,\n\t\tmenuItems,\n\t\thasResolvedMenuItems,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetEntityRecords,\n\t\t\t\tgetMenus,\n\t\t\t\tgetMenuItems,\n\t\t\t\tisResolving,\n\t\t\t\thasFinishedResolution,\n\t\t\t} = select( 'core' );\n\t\t\tconst pagesParameters = [\n\t\t\t\t'postType',\n\t\t\t\t'page',\n\t\t\t\t{\n\t\t\t\t\tparent: 0,\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\torderby: 'id',\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst menusParameters = [ { per_page: -1 } ];\n\t\t\tconst selectedMenu = getSelectedMenu( selectedCreateOption );\n\t\t\tconst hasSelectedMenu = selectedMenu !== undefined;\n\t\t\tconst menuItemsParameters = hasSelectedMenu\n\t\t\t\t? [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmenus: selectedMenu,\n\t\t\t\t\t\t\tper_page: -1,\n\t\t\t\t\t\t},\n\t\t\t\t  ]\n\t\t\t\t: undefined;\n\n\t\t\treturn {\n\t\t\t\tpages: getEntityRecords( ...pagesParameters ),\n\t\t\t\tisResolvingPages: isResolving(\n\t\t\t\t\t'getEntityRecords',\n\t\t\t\t\tpagesParameters\n\t\t\t\t),\n\t\t\t\thasResolvedPages: hasFinishedResolution(\n\t\t\t\t\t'getEntityRecords',\n\t\t\t\t\tpagesParameters\n\t\t\t\t),\n\t\t\t\tmenus: getMenus( ...menusParameters ),\n\t\t\t\tisResolvingMenus: isResolving( 'getMenus', menusParameters ),\n\t\t\t\thasResolvedMenus: hasFinishedResolution(\n\t\t\t\t\t'getMenus',\n\t\t\t\t\tmenusParameters\n\t\t\t\t),\n\t\t\t\tmenuItems: hasSelectedMenu\n\t\t\t\t\t? getMenuItems( ...menuItemsParameters )\n\t\t\t\t\t: undefined,\n\t\t\t\thasResolvedMenuItems: hasSelectedMenu\n\t\t\t\t\t? hasFinishedResolution(\n\t\t\t\t\t\t\t'getMenuItems',\n\t\t\t\t\t\t\tmenuItemsParameters\n\t\t\t\t\t  )\n\t\t\t\t\t: false,\n\t\t\t};\n\t\t},\n\t\t[ selectedCreateOption ]\n\t);\n\n\tconst hasPages = !! ( hasResolvedPages && pages?.length );\n\tconst hasMenus = !! ( hasResolvedMenus && menus?.length );\n\tconst isLoading = isResolvingPages || isResolvingMenus;\n\n\tconst createOptions = useMemo(\n\t\t() => [\n\t\t\t...( hasMenus ? menus : [] ),\n\t\t\t{\n\t\t\t\tid: CREATE_EMPTY_OPTION_VALUE,\n\t\t\t\tname: __( 'Create empty Navigation' ),\n\t\t\t\tclassName: 'is-create-empty-option',\n\t\t\t},\n\t\t\t...( hasPages\n\t\t\t\t? [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: CREATE_FROM_PAGES_OPTION_VALUE,\n\t\t\t\t\t\t\tname: __( 'Create from all top-level pages' ),\n\t\t\t\t\t\t},\n\t\t\t\t  ]\n\t\t\t\t: [] ),\n\t\t],\n\t\t[ menus, hasMenus, hasPages ]\n\t);\n\n\tconst createFromMenu = useCallback( () => {\n\t\t// If an empty menu was selected, create an empty block.\n\t\tif ( ! menuItems.length ) {\n\t\t\tonCreate( [] );\n\t\t\treturn;\n\t\t}\n\n\t\tconst blocks = convertMenuItemsToBlocks( menuItems );\n\t\tconst selectNavigationBlock = true;\n\t\tonCreate( blocks, selectNavigationBlock );\n\t} );\n\n\tconst onCreateButtonClick = useCallback( () => {\n\t\tif ( ! selectedCreateOption ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { key } = selectedCreateOption;\n\t\tswitch ( key ) {\n\t\t\tcase CREATE_EMPTY_OPTION_VALUE: {\n\t\t\t\tonCreate( [] );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcase CREATE_FROM_PAGES_OPTION_VALUE: {\n\t\t\t\tconst blocks = convertPagesToBlocks( pages );\n\t\t\t\tconst selectNavigationBlock = true;\n\t\t\t\tonCreate( blocks, selectNavigationBlock );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// The default case indicates that a menu was selected.\n\t\t\tdefault:\n\t\t\t\t// If we have menu items, create the block right away.\n\t\t\t\tif ( hasResolvedMenuItems ) {\n\t\t\t\t\tcreateFromMenu();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Otherwise, create the block when resolution finishes.\n\t\t\t\tsetIsCreatingFromMenu( true );\n\t\t}\n\t} );\n\n\tuseEffect( () => {\n\t\t// If the user selected a menu but we had to wait for menu items to\n\t\t// finish resolving, then create the block once resolution finishes.\n\t\tif ( isCreatingFromMenu && hasResolvedMenuItems ) {\n\t\t\tcreateFromMenu();\n\t\t\tsetIsCreatingFromMenu( false );\n\t\t}\n\t}, [ isCreatingFromMenu, hasResolvedMenuItems ] );\n\n\tif ( hasMenus && ! selectedCreateOption ) {\n\t\tsetSelectedCreateOption( createOptions[ 0 ] );\n\t}\n\n\treturn (\n\t\t<Placeholder\n\t\t\tclassName=\"wp-block-navigation-placeholder\"\n\t\t\ticon={ icon }\n\t\t\tlabel={ __( 'Navigation' ) }\n\t\t>\n\t\t\t{ isLoading && (\n\t\t\t\t<div ref={ ref }>\n\t\t\t\t\t<Spinner /> { __( 'Loading…' ) }\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t{ ! isLoading && (\n\t\t\t\t<div\n\t\t\t\t\tref={ ref }\n\t\t\t\t\tclassName=\"wp-block-navigation-placeholder__actions\"\n\t\t\t\t>\n\t\t\t\t\t<>\n\t\t\t\t\t\t<CustomSelectControl\n\t\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t\t'wp-block-navigation-placeholder__select-control',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'has-menus': hasMenus,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t! isLoading\n\t\t\t\t\t\t\t\t\t? getPlaceholderInstructions(\n\t\t\t\t\t\t\t\t\t\t\thasMenus,\n\t\t\t\t\t\t\t\t\t\t\thasPages\n\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvalue={ selectedCreateOption || createOptions[ 0 ] }\n\t\t\t\t\t\t\tonChange={ ( { selectedItem } ) => {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tselectedItem?.key === selectedCreateOption\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tsetSelectedCreateOption( selectedItem );\n\t\t\t\t\t\t\t\tsetIsCreatingFromMenu( false );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\toptions={ createOptions.map( ( option ) => {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t...option,\n\t\t\t\t\t\t\t\t\tkey: option.id,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisSecondary\n\t\t\t\t\t\t\tclassName=\"wp-block-navigation-placeholder__button\"\n\t\t\t\t\t\t\tdisabled={ ! selectedCreateOption }\n\t\t\t\t\t\t\tisBusy={ isCreatingFromMenu }\n\t\t\t\t\t\t\tonClick={ onCreateButtonClick }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Create' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t</Placeholder>\n\t);\n}\n\nexport default forwardRef( NavigationPlaceholder );\n"]}
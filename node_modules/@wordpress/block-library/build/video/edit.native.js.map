{"version":3,"sources":["@wordpress/block-library/src/video/edit.native.js"],"names":["ICON_TYPE","PLACEHOLDER","RETRY","UPLOAD","VideoEdit","props","state","isCaptionSelected","videoContainerHeight","mediaUploadStateReset","bind","onSelectMediaUploadOption","finishMediaUploadWithSuccess","finishMediaUploadWithFailure","updateMediaProgress","onVideoPressed","onVideoContanerLayout","onFocusCaption","attributes","id","src","isUploadInProgress","setState","payload","setAttributes","mediaUrl","url","mediaServerId","mediaId","event","width","nativeEvent","layout","height","VIDEO_ASPECT_RATIO","iconType","iconStyle","SvgIconRetry","style","icon","getStylesFromColorScheme","iconDark","iconUploading","iconUploadingDark","SvgIcon","isSelected","toolbarEditButton","MEDIA_TYPE_VIDEO","open","getMediaOptions","replace","flex","getIcon","onFocus","isUploadFailed","retryMessage","showVideo","styleIconContainer","modalIconRetry","modalIcon","iconContainer","videoStyle","video","containerStyle","containerFocused","container","videoContainer","uri","placeholderContainer","placeholderContainerDark","uploadFailedText","caption","clientId","onBlur","insertBlocksAfter","React","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA;;AACA;;AACA;;AAKA;;AAKA;;AAMA;;AACA;;AAWA;;AACA;;AACA;;AACA;;AAKA;;AACA;;AACA;;;;;;;;;;AAEA,IAAMA,SAAS,GAAG;AACjBC,EAAAA,WAAW,EAAE,aADI;AAEjBC,EAAAA,KAAK,EAAE,OAFU;AAGjBC,EAAAA,MAAM,EAAE;AAHS,CAAlB;;IAMMC,S;;;;;AACL,qBAAaC,KAAb,EAAqB;AAAA;;AAAA;AACpB,8BAAOA,KAAP;AAEA,UAAKC,KAAL,GAAa;AACZC,MAAAA,iBAAiB,EAAE,KADP;AAEZC,MAAAA,oBAAoB,EAAE;AAFV,KAAb;AAKA,UAAKC,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BC,IAA3B,6CAA7B;AACA,UAAKC,yBAAL,GAAiC,MAAKA,yBAAL,CAA+BD,IAA/B,6CAAjC;AAGA,UAAKE,4BAAL,GAAoC,MAAKA,4BAAL,CAAkCF,IAAlC,6CAApC;AAGA,UAAKG,4BAAL,GAAoC,MAAKA,4BAAL,CAAkCH,IAAlC,6CAApC;AAGA,UAAKI,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBJ,IAAzB,6CAA3B;AACA,UAAKK,cAAL,GAAsB,MAAKA,cAAL,CAAoBL,IAApB,6CAAtB;AACA,UAAKM,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BN,IAA3B,6CAA7B;AACA,UAAKO,cAAL,GAAsB,MAAKA,cAAL,CAAoBP,IAApB,6CAAtB;AArBoB;AAsBpB;;;;wCAEmB;AAAA,UACXQ,UADW,GACI,KAAKb,KADT,CACXa,UADW;;AAEnB,UAAKA,UAAU,CAACC,EAAX,IAAiB,sBAAaD,UAAU,CAACE,GAAxB,MAAkC,OAAxD,EAAkE;AACjE;AACA;AACD;;;2CAEsB;AACtB;AACA,UACC,sBAAW,iCAAX,KACA,KAAKd,KAAL,CAAWe,kBAFZ,EAGE;AACD,6BACC,iCADD,EAEC,KAAKhB,KAAL,CAAWa,UAAX,CAAsBC,EAFvB;AAIA;AACD;;;qCAUgB;AAAA,UACRD,UADQ,GACO,KAAKb,KADZ,CACRa,UADQ;;AAGhB,UAAK,KAAKZ,KAAL,CAAWe,kBAAhB,EAAqC;AACpC,+DAAgCH,UAAU,CAACC,EAA3C;AACA,OAFD,MAEO,IACND,UAAU,CAACC,EAAX,IACA,sBAAaD,UAAU,CAACE,GAAxB,MAAkC,OAF5B,EAGL;AACD,8DAA+BF,UAAU,CAACC,EAA1C;AACA;;AAED,WAAKG,QAAL,CAAe;AACdf,QAAAA,iBAAiB,EAAE;AADL,OAAf;AAGA;;;qCAEgB;AAChB,UAAK,CAAE,KAAKD,KAAL,CAAWC,iBAAlB,EAAsC;AACrC,aAAKe,QAAL,CAAe;AAAEf,UAAAA,iBAAiB,EAAE;AAArB,SAAf;AACA;AACD;;;wCAEoBgB,O,EAAU;AAAA,UACtBC,aADsB,GACJ,KAAKnB,KADD,CACtBmB,aADsB;;AAE9B,UAAKD,OAAO,CAACE,QAAb,EAAwB;AACvBD,QAAAA,aAAa,CAAE;AAAEE,UAAAA,GAAG,EAAEH,OAAO,CAACE;AAAf,SAAF,CAAb;AACA;;AACD,UAAK,CAAE,KAAKnB,KAAL,CAAWe,kBAAlB,EAAuC;AACtC,aAAKC,QAAL,CAAe;AAAED,UAAAA,kBAAkB,EAAE;AAAtB,SAAf;AACA;AACD;;;iDAE6BE,O,EAAU;AAAA,UAC/BC,aAD+B,GACb,KAAKnB,KADQ,CAC/BmB,aAD+B;AAEvCA,MAAAA,aAAa,CAAE;AAAEJ,QAAAA,GAAG,EAAEG,OAAO,CAACE,QAAf;AAAyBN,QAAAA,EAAE,EAAEI,OAAO,CAACI;AAArC,OAAF,CAAb;AACA,WAAKL,QAAL,CAAe;AAAED,QAAAA,kBAAkB,EAAE;AAAtB,OAAf;AACA;;;iDAE6BE,O,EAAU;AAAA,UAC/BC,aAD+B,GACb,KAAKnB,KADQ,CAC/BmB,aAD+B;AAEvCA,MAAAA,aAAa,CAAE;AAAEL,QAAAA,EAAE,EAAEI,OAAO,CAACK;AAAd,OAAF,CAAb;AACA,WAAKN,QAAL,CAAe;AAAED,QAAAA,kBAAkB,EAAE;AAAtB,OAAf;AACA;;;4CAEuB;AAAA,UACfG,aADe,GACG,KAAKnB,KADR,CACfmB,aADe;AAEvBA,MAAAA,aAAa,CAAE;AAAEL,QAAAA,EAAE,EAAE,IAAN;AAAYC,QAAAA,GAAG,EAAE;AAAjB,OAAF,CAAb;AACA,WAAKE,QAAL,CAAe;AAAED,QAAAA,kBAAkB,EAAE;AAAtB,OAAf;AACA;;;oDAEwC;AAAA,UAAZF,EAAY,QAAZA,EAAY;AAAA,UAARO,GAAQ,QAARA,GAAQ;AAAA,UAChCF,aADgC,GACd,KAAKnB,KADS,CAChCmB,aADgC;AAExCA,MAAAA,aAAa,CAAE;AAAEL,QAAAA,EAAE,EAAFA,EAAF;AAAMC,QAAAA,GAAG,EAAEM;AAAX,OAAF,CAAb;AACA;;;0CAEsBG,K,EAAQ;AAAA,UACtBC,KADsB,GACZD,KAAK,CAACE,WAAN,CAAkBC,MADN,CACtBF,KADsB;AAE9B,UAAMG,MAAM,GAAGH,KAAK,GAAGI,+BAAvB;;AACA,UAAKD,MAAM,KAAK,KAAK3B,KAAL,CAAWE,oBAA3B,EAAkD;AACjD,aAAKc,QAAL,CAAe;AAAEd,UAAAA,oBAAoB,EAAEyB;AAAxB,SAAf;AACA;AACD;;;4BAEQE,Q,EAAW;AACnB,UAAIC,SAAJ;;AACA,cAASD,QAAT;AACC,aAAKnC,SAAS,CAACE,KAAf;AACC,iBAAO,4BAAC,gBAAD;AAAM,YAAA,IAAI,EAAGmC;AAAb,aAAiCC,eAAMC,IAAvC,EAAP;;AACD,aAAKvC,SAAS,CAACC,WAAf;AACCmC,UAAAA,SAAS,GAAG,KAAK/B,KAAL,CAAWmC,wBAAX,CACXF,eAAMC,IADK,EAEXD,eAAMG,QAFK,CAAZ;AAIA;;AACD,aAAKzC,SAAS,CAACG,MAAf;AACCiC,UAAAA,SAAS,GAAG,KAAK/B,KAAL,CAAWmC,wBAAX,CACXF,eAAMI,aADK,EAEXJ,eAAMK,iBAFK,CAAZ;AAIA;AAdF;;AAiBA,aAAO,4BAAC,gBAAD;AAAM,QAAA,IAAI,EAAGC;AAAb,SAA4BR,SAA5B,EAAP;AACA;;;6BAEQ;AAAA;;AAAA,wBAC0C,KAAK/B,KAD/C;AAAA,UACAmB,aADA,eACAA,aADA;AAAA,UACeN,UADf,eACeA,UADf;AAAA,UAC2B2B,UAD3B,eAC2BA,UAD3B;AAAA,UAEA1B,EAFA,GAEYD,UAFZ,CAEAC,EAFA;AAAA,UAEIC,GAFJ,GAEYF,UAFZ,CAEIE,GAFJ;AAAA,UAGAZ,oBAHA,GAGyB,KAAKF,KAH9B,CAGAE,oBAHA;AAKR,UAAMsC,iBAAiB,GACtB,4BAAC,wBAAD;AACC,QAAA,YAAY,EAAG,CAAEC,6BAAF,CADhB;AAEC,QAAA,gBAAgB,EAAG,IAFpB;AAGC,QAAA,QAAQ,EAAG,KAAKpC,yBAHjB;AAIC,QAAA,MAAM,EAAG,uBAAiC;AAAA,cAA7BqC,IAA6B,SAA7BA,IAA6B;AAAA,cAAvBC,eAAuB,SAAvBA,eAAuB;AACzC,iBACC,4BAAC,wBAAD,QACGA,eAAe,EADlB,EAEC,4BAAC,yBAAD;AACC,YAAA,KAAK,EAAG,cAAI,YAAJ,CADT;AAEC,YAAA,IAAI,EAAGC,cAFR;AAGC,YAAA,OAAO,EAAGF;AAHX,YAFD,CADD;AAUA;AAfF,QADD;;AAoBA,UAAK,CAAE7B,EAAP,EAAY;AACX,eACC,4BAAC,iBAAD;AAAM,UAAA,KAAK,EAAG;AAAEgC,YAAAA,IAAI,EAAE;AAAR;AAAd,WACC,4BAAC,6BAAD;AACC,UAAA,YAAY,EAAG,CAAEJ,6BAAF,CADhB;AAEC,UAAA,QAAQ,EAAG,KAAKpC,yBAFjB;AAGC,UAAA,IAAI,EAAG,KAAKyC,OAAL,CAAcpD,SAAS,CAACC,WAAxB,CAHR;AAIC,UAAA,OAAO,EAAG,KAAKI,KAAL,CAAWgD;AAJtB,UADD,CADD;AAUA;;AAED,aACC,4BAAC,qCAAD;AACC,QAAA,UAAU,EAAG,CAAER,UADhB;AAEC,QAAA,OAAO,EAAG,KAAK9B,cAFhB;AAGC,QAAA,QAAQ,EAAG,CAAE8B;AAHd,SAKC,4BAAC,iBAAD;AAAM,QAAA,KAAK,EAAG;AAAEM,UAAAA,IAAI,EAAE;AAAR;AAAd,SACG,CAAE,KAAK7C,KAAL,CAAWC,iBAAb,IACD,4BAAC,0BAAD,QAAiBuC,iBAAjB,CAFF,EAIC,4BAAC,8BAAD,QACC,4BAAC,qBAAD;AAAW,QAAA,KAAK,EAAG,cAAI,gBAAJ;AAAnB,SACC,4BAAC,2BAAD;AACC,QAAA,aAAa,EAAGtB,aADjB;AAEC,QAAA,UAAU,EAAGN;AAFd,QADD,CADD,CAJD,EAYC,4BAAC,gCAAD;AACC,QAAA,OAAO,EAAGC,EADX;AAEC,QAAA,8BAA8B,EAC7B,KAAKP,4BAHP;AAKC,QAAA,8BAA8B,EAC7B,KAAKC,4BANP;AAQC,QAAA,qBAAqB,EAAG,KAAKC,mBAR9B;AASC,QAAA,uBAAuB,EAAG,KAAKL,qBAThC;AAUC,QAAA,aAAa,EAAG,8BAIT;AAAA,cAHNY,kBAGM,SAHNA,kBAGM;AAAA,cAFNiC,cAEM,SAFNA,cAEM;AAAA,cADNC,YACM,SADNA,YACM;AACN,cAAMC,SAAS,GACd,gBAAOpC,GAAP,KACA,CAAEC,kBADF,IAEA,CAAEiC,cAHH;;AAIA,cAAMf,IAAI,GAAG,MAAI,CAACa,OAAL,CACZE,cAAc,GACXtD,SAAS,CAACE,KADC,GAEXF,SAAS,CAACG,MAHD,CAAb;;AAKA,cAAMsD,kBAAkB,GAAGH,cAAc,GACtChB,eAAMoB,cADgC,GAEtCpB,eAAMqB,SAFT;AAIA,cAAMC,aAAa,GAClB,4BAAC,iBAAD;AAAM,YAAA,KAAK,EAAGH;AAAd,aACGlB,IADH,CADD;;AAMA,cAAMsB,UAAU;AACf5B,YAAAA,MAAM,EAAEzB;AADO,aAEZ8B,eAAMwB,KAFM,CAAhB;;AAKA,cAAMC,cAAc,GACnBP,SAAS,IAAIX,UAAb,GACGP,eAAM0B,gBADT,GAEG1B,eAAM2B,SAHV;AAKA,iBACC,4BAAC,iBAAD;AACC,YAAA,QAAQ,EAAG,MAAI,CAACjD,qBADjB;AAEC,YAAA,KAAK,EAAG+C;AAFT,aAIGP,SAAS,IACV,4BAAC,iBAAD;AAAM,YAAA,KAAK,EAAGlB,eAAM4B;AAApB,aACC,4BAAC,wBAAD;AACC,YAAA,UAAU,EACTrB,UAAU,IACV,CAAE,MAAI,CAACvC,KAAL,CACAC,iBAJJ;AAMC,YAAA,KAAK,EAAGsD,UANT;AAOC,YAAA,MAAM,EAAG;AAAEM,cAAAA,GAAG,EAAE/C;AAAP,aAPV;AAQC,YAAA,MAAM,EAAG;AARV,YADD,CALF,EAkBG,CAAEoC,SAAF,IACD,4BAAC,iBAAD;AACC,YAAA,KAAK;AACJvB,cAAAA,MAAM,EAAEzB,oBADJ;AAEJsB,cAAAA,KAAK,EAAE;AAFH,eAGD,MAAI,CAACzB,KAAL,CAAWmC,wBAAX,CACFF,eAAM8B,oBADJ,EAEF9B,eAAM+B,wBAFJ,CAHC;AADN,aAUG7D,oBAAoB,GAAG,CAAvB,IACDoD,aAXF,EAYGN,cAAc,IACf,4BAAC,iBAAD;AACC,YAAA,KAAK,EACJhB,eAAMgC;AAFR,aAKGf,YALH,CAbF,CAnBF,CADD;AA6CA;AAzFF,QAZD,EAuGC,4BAAC,yBAAD;AACC,QAAA,UAAU,EAAG,IADd;AAEC,QAAA,yBAAyB,EAAG,mCAAEgB,OAAF;AAAA,iBAC3B,qBAASA,OAAT;AACG;AACA,wBAAI,sBAAJ,CAFH,GAGG;AACA;AACA,wBAAI,mBAAJ,CAFA,EAGAA,OAHA,CAJwB;AAAA,SAF7B;AAYC,QAAA,QAAQ,EAAG,KAAKlE,KAAL,CAAWmE,QAZvB;AAaC,QAAA,UAAU,EAAG,KAAKlE,KAAL,CAAWC,iBAbzB;AAcC,QAAA,OAAO,EAAG,KAAKU,cAdhB;AAeC,QAAA,MAAM,EAAG,KAAKZ,KAAL,CAAWoE,MAfrB,CAe8B;AAf9B;AAgBC,QAAA,iBAAiB,EAAG,KAAKpE,KAAL,CAAWqE;AAhBhC,QAvGD,CALD,CADD;AAkIA;;;6CAtQgCrE,K,EAAOC,K,EAAQ;AAC/C;AACA;AACA,aAAO;AACNC,QAAAA,iBAAiB,EAAEF,KAAK,CAACwC,UAAN,IAAoBvC,KAAK,CAACC;AADvC,OAAP;AAGA;;;EAnDsBoE,eAAMC,S;;eAsTf,uCAA0BxE,SAA1B,C","sourcesContent":["/**\n * External dependencies\n */\nimport React from 'react';\nimport { View, TouchableWithoutFeedback, Text } from 'react-native';\nimport { isEmpty } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tmediaUploadSync,\n\trequestImageFailedRetryDialog,\n\trequestImageUploadCancelDialog,\n} from '@wordpress/react-native-bridge';\nimport {\n\tIcon,\n\tToolbarButton,\n\tToolbarGroup,\n\tPanelBody,\n} from '@wordpress/components';\nimport { withPreferredColorScheme } from '@wordpress/compose';\nimport {\n\tBlockCaption,\n\tMediaPlaceholder,\n\tMediaUpload,\n\tMediaUploadProgress,\n\tMEDIA_TYPE_VIDEO,\n\tBlockControls,\n\tVIDEO_ASPECT_RATIO,\n\tVideoPlayer,\n\tInspectorControls,\n} from '@wordpress/block-editor';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { isURL, getProtocol } from '@wordpress/url';\nimport { doAction, hasAction } from '@wordpress/hooks';\nimport { video as SvgIcon, replace } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport style from './style.scss';\nimport SvgIconRetry from './icon-retry';\nimport VideoCommonSettings from './edit-common-settings';\n\nconst ICON_TYPE = {\n\tPLACEHOLDER: 'placeholder',\n\tRETRY: 'retry',\n\tUPLOAD: 'upload',\n};\n\nclass VideoEdit extends React.Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tisCaptionSelected: false,\n\t\t\tvideoContainerHeight: 0,\n\t\t};\n\n\t\tthis.mediaUploadStateReset = this.mediaUploadStateReset.bind( this );\n\t\tthis.onSelectMediaUploadOption = this.onSelectMediaUploadOption.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.finishMediaUploadWithSuccess = this.finishMediaUploadWithSuccess.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.finishMediaUploadWithFailure = this.finishMediaUploadWithFailure.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.updateMediaProgress = this.updateMediaProgress.bind( this );\n\t\tthis.onVideoPressed = this.onVideoPressed.bind( this );\n\t\tthis.onVideoContanerLayout = this.onVideoContanerLayout.bind( this );\n\t\tthis.onFocusCaption = this.onFocusCaption.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { attributes } = this.props;\n\t\tif ( attributes.id && getProtocol( attributes.src ) === 'file:' ) {\n\t\t\tmediaUploadSync();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\t// this action will only exist if the user pressed the trash button on the block holder\n\t\tif (\n\t\t\thasAction( 'blocks.onRemoveBlockCheckUpload' ) &&\n\t\t\tthis.state.isUploadInProgress\n\t\t) {\n\t\t\tdoAction(\n\t\t\t\t'blocks.onRemoveBlockCheckUpload',\n\t\t\t\tthis.props.attributes.id\n\t\t\t);\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps( props, state ) {\n\t\t// Avoid a UI flicker in the toolbar by insuring that isCaptionSelected\n\t\t// is updated immediately any time the isSelected prop becomes false\n\t\treturn {\n\t\t\tisCaptionSelected: props.isSelected && state.isCaptionSelected,\n\t\t};\n\t}\n\n\tonVideoPressed() {\n\t\tconst { attributes } = this.props;\n\n\t\tif ( this.state.isUploadInProgress ) {\n\t\t\trequestImageUploadCancelDialog( attributes.id );\n\t\t} else if (\n\t\t\tattributes.id &&\n\t\t\tgetProtocol( attributes.src ) === 'file:'\n\t\t) {\n\t\t\trequestImageFailedRetryDialog( attributes.id );\n\t\t}\n\n\t\tthis.setState( {\n\t\t\tisCaptionSelected: false,\n\t\t} );\n\t}\n\n\tonFocusCaption() {\n\t\tif ( ! this.state.isCaptionSelected ) {\n\t\t\tthis.setState( { isCaptionSelected: true } );\n\t\t}\n\t}\n\n\tupdateMediaProgress( payload ) {\n\t\tconst { setAttributes } = this.props;\n\t\tif ( payload.mediaUrl ) {\n\t\t\tsetAttributes( { url: payload.mediaUrl } );\n\t\t}\n\t\tif ( ! this.state.isUploadInProgress ) {\n\t\t\tthis.setState( { isUploadInProgress: true } );\n\t\t}\n\t}\n\n\tfinishMediaUploadWithSuccess( payload ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { src: payload.mediaUrl, id: payload.mediaServerId } );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tfinishMediaUploadWithFailure( payload ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { id: payload.mediaId } );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tmediaUploadStateReset() {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { id: null, src: null } );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tonSelectMediaUploadOption( { id, url } ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { id, src: url } );\n\t}\n\n\tonVideoContanerLayout( event ) {\n\t\tconst { width } = event.nativeEvent.layout;\n\t\tconst height = width / VIDEO_ASPECT_RATIO;\n\t\tif ( height !== this.state.videoContainerHeight ) {\n\t\t\tthis.setState( { videoContainerHeight: height } );\n\t\t}\n\t}\n\n\tgetIcon( iconType ) {\n\t\tlet iconStyle;\n\t\tswitch ( iconType ) {\n\t\t\tcase ICON_TYPE.RETRY:\n\t\t\t\treturn <Icon icon={ SvgIconRetry } { ...style.icon } />;\n\t\t\tcase ICON_TYPE.PLACEHOLDER:\n\t\t\t\ticonStyle = this.props.getStylesFromColorScheme(\n\t\t\t\t\tstyle.icon,\n\t\t\t\t\tstyle.iconDark\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase ICON_TYPE.UPLOAD:\n\t\t\t\ticonStyle = this.props.getStylesFromColorScheme(\n\t\t\t\t\tstyle.iconUploading,\n\t\t\t\t\tstyle.iconUploadingDark\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn <Icon icon={ SvgIcon } { ...iconStyle } />;\n\t}\n\n\trender() {\n\t\tconst { setAttributes, attributes, isSelected } = this.props;\n\t\tconst { id, src } = attributes;\n\t\tconst { videoContainerHeight } = this.state;\n\n\t\tconst toolbarEditButton = (\n\t\t\t<MediaUpload\n\t\t\t\tallowedTypes={ [ MEDIA_TYPE_VIDEO ] }\n\t\t\t\tisReplacingMedia={ true }\n\t\t\t\tonSelect={ this.onSelectMediaUploadOption }\n\t\t\t\trender={ ( { open, getMediaOptions } ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t\t\t{ getMediaOptions() }\n\t\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\t\tlabel={ __( 'Edit video' ) }\n\t\t\t\t\t\t\t\ticon={ replace }\n\t\t\t\t\t\t\t\tonClick={ open }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t></MediaUpload>\n\t\t);\n\n\t\tif ( ! id ) {\n\t\t\treturn (\n\t\t\t\t<View style={ { flex: 1 } }>\n\t\t\t\t\t<MediaPlaceholder\n\t\t\t\t\t\tallowedTypes={ [ MEDIA_TYPE_VIDEO ] }\n\t\t\t\t\t\tonSelect={ this.onSelectMediaUploadOption }\n\t\t\t\t\t\ticon={ this.getIcon( ICON_TYPE.PLACEHOLDER ) }\n\t\t\t\t\t\tonFocus={ this.props.onFocus }\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<TouchableWithoutFeedback\n\t\t\t\taccessible={ ! isSelected }\n\t\t\t\tonPress={ this.onVideoPressed }\n\t\t\t\tdisabled={ ! isSelected }\n\t\t\t>\n\t\t\t\t<View style={ { flex: 1 } }>\n\t\t\t\t\t{ ! this.state.isCaptionSelected && (\n\t\t\t\t\t\t<BlockControls>{ toolbarEditButton }</BlockControls>\n\t\t\t\t\t) }\n\t\t\t\t\t<InspectorControls>\n\t\t\t\t\t\t<PanelBody title={ __( 'Video settings' ) }>\n\t\t\t\t\t\t\t<VideoCommonSettings\n\t\t\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t</InspectorControls>\n\t\t\t\t\t<MediaUploadProgress\n\t\t\t\t\t\tmediaId={ id }\n\t\t\t\t\t\tonFinishMediaUploadWithSuccess={\n\t\t\t\t\t\t\tthis.finishMediaUploadWithSuccess\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonFinishMediaUploadWithFailure={\n\t\t\t\t\t\t\tthis.finishMediaUploadWithFailure\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonUpdateMediaProgress={ this.updateMediaProgress }\n\t\t\t\t\t\tonMediaUploadStateReset={ this.mediaUploadStateReset }\n\t\t\t\t\t\trenderContent={ ( {\n\t\t\t\t\t\t\tisUploadInProgress,\n\t\t\t\t\t\t\tisUploadFailed,\n\t\t\t\t\t\t\tretryMessage,\n\t\t\t\t\t\t} ) => {\n\t\t\t\t\t\t\tconst showVideo =\n\t\t\t\t\t\t\t\tisURL( src ) &&\n\t\t\t\t\t\t\t\t! isUploadInProgress &&\n\t\t\t\t\t\t\t\t! isUploadFailed;\n\t\t\t\t\t\t\tconst icon = this.getIcon(\n\t\t\t\t\t\t\t\tisUploadFailed\n\t\t\t\t\t\t\t\t\t? ICON_TYPE.RETRY\n\t\t\t\t\t\t\t\t\t: ICON_TYPE.UPLOAD\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tconst styleIconContainer = isUploadFailed\n\t\t\t\t\t\t\t\t? style.modalIconRetry\n\t\t\t\t\t\t\t\t: style.modalIcon;\n\n\t\t\t\t\t\t\tconst iconContainer = (\n\t\t\t\t\t\t\t\t<View style={ styleIconContainer }>\n\t\t\t\t\t\t\t\t\t{ icon }\n\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tconst videoStyle = {\n\t\t\t\t\t\t\t\theight: videoContainerHeight,\n\t\t\t\t\t\t\t\t...style.video,\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tconst containerStyle =\n\t\t\t\t\t\t\t\tshowVideo && isSelected\n\t\t\t\t\t\t\t\t\t? style.containerFocused\n\t\t\t\t\t\t\t\t\t: style.container;\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\t\tonLayout={ this.onVideoContanerLayout }\n\t\t\t\t\t\t\t\t\tstyle={ containerStyle }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ showVideo && (\n\t\t\t\t\t\t\t\t\t\t<View style={ style.videoContainer }>\n\t\t\t\t\t\t\t\t\t\t\t<VideoPlayer\n\t\t\t\t\t\t\t\t\t\t\t\tisSelected={\n\t\t\t\t\t\t\t\t\t\t\t\t\tisSelected &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t! this.state\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.isCaptionSelected\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={ videoStyle }\n\t\t\t\t\t\t\t\t\t\t\t\tsource={ { uri: src } }\n\t\t\t\t\t\t\t\t\t\t\t\tpaused={ true }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t{ ! showVideo && (\n\t\t\t\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\t\t\t\t\theight: videoContainerHeight,\n\t\t\t\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\t\t\t\t...this.props.getStylesFromColorScheme(\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle.placeholderContainer,\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle.placeholderContainerDark\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{ videoContainerHeight > 0 &&\n\t\t\t\t\t\t\t\t\t\t\t\ticonContainer }\n\t\t\t\t\t\t\t\t\t\t\t{ isUploadFailed && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle.uploadFailedText\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ retryMessage }\n\t\t\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t\t<BlockCaption\n\t\t\t\t\t\taccessible={ true }\n\t\t\t\t\t\taccessibilityLabelCreator={ ( caption ) =>\n\t\t\t\t\t\t\tisEmpty( caption )\n\t\t\t\t\t\t\t\t? /* translators: accessibility text. Empty video caption. */\n\t\t\t\t\t\t\t\t  __( 'Video caption. Empty' )\n\t\t\t\t\t\t\t\t: sprintf(\n\t\t\t\t\t\t\t\t\t\t/* translators: accessibility text. %s: video caption. */\n\t\t\t\t\t\t\t\t\t\t__( 'Video caption. %s' ),\n\t\t\t\t\t\t\t\t\t\tcaption\n\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclientId={ this.props.clientId }\n\t\t\t\t\t\tisSelected={ this.state.isCaptionSelected }\n\t\t\t\t\t\tonFocus={ this.onFocusCaption }\n\t\t\t\t\t\tonBlur={ this.props.onBlur } // always assign onBlur as props\n\t\t\t\t\t\tinsertBlocksAfter={ this.props.insertBlocksAfter }\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t</TouchableWithoutFeedback>\n\t\t);\n\t}\n}\n\nexport default withPreferredColorScheme( VideoEdit );\n"]}
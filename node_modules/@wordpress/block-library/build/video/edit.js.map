{"version":3,"sources":["@wordpress/block-library/src/video/edit.js"],"names":["ALLOWED_MEDIA_TYPES","VIDEO_POSTER_ALLOWED_MEDIA_TYPES","VideoEdit","arguments","videoPlayer","posterImageButton","onSelectURL","bind","onSelectPoster","onRemovePoster","onUploadError","props","attributes","mediaUpload","noticeOperations","setAttributes","id","src","file","filesList","onFileChange","url","onError","message","createErrorNotice","allowedTypes","prevProps","poster","current","load","newSrc","embedBlock","undefined","onReplace","image","focus","removeAllNotices","caption","controls","instanceId","isSelected","noticeUI","insertBlocksAfter","onSelectVideo","media","icon","videoPosterDescription","open","RichText","isEmpty","value","Component","select","getSettings","withNotices","withInstanceId"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { getBlobByURL, isBlobURL } from '@wordpress/blob';\nimport {\n\tBaseControl,\n\tButton,\n\tDisabled,\n\tPanelBody,\n\twithNotices,\n} from '@wordpress/components';\nimport {\n\tBlockControls,\n\tBlockIcon,\n\tInspectorControls,\n\tMediaPlaceholder,\n\tMediaUpload,\n\tMediaUploadCheck,\n\tMediaReplaceFlow,\n\tRichText,\n\t__experimentalBlock as Block,\n} from '@wordpress/block-editor';\nimport { Component, createRef } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { compose, withInstanceId } from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\nimport { video as icon } from '@wordpress/icons';\nimport { createBlock } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { createUpgradedEmbedBlock } from '../embed/util';\nimport VideoCommonSettings from './edit-common-settings';\n\nconst ALLOWED_MEDIA_TYPES = [ 'video' ];\nconst VIDEO_POSTER_ALLOWED_MEDIA_TYPES = [ 'image' ];\n\nclass VideoEdit extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.videoPlayer = createRef();\n\t\tthis.posterImageButton = createRef();\n\t\tthis.onSelectURL = this.onSelectURL.bind( this );\n\t\tthis.onSelectPoster = this.onSelectPoster.bind( this );\n\t\tthis.onRemovePoster = this.onRemovePoster.bind( this );\n\t\tthis.onUploadError = this.onUploadError.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tconst {\n\t\t\tattributes,\n\t\t\tmediaUpload,\n\t\t\tnoticeOperations,\n\t\t\tsetAttributes,\n\t\t} = this.props;\n\t\tconst { id, src = '' } = attributes;\n\t\tif ( ! id && isBlobURL( src ) ) {\n\t\t\tconst file = getBlobByURL( src );\n\t\t\tif ( file ) {\n\t\t\t\tmediaUpload( {\n\t\t\t\t\tfilesList: [ file ],\n\t\t\t\t\tonFileChange: ( [ { url } ] ) => {\n\t\t\t\t\t\tsetAttributes( { src: url } );\n\t\t\t\t\t},\n\t\t\t\t\tonError: ( message ) => {\n\t\t\t\t\t\tnoticeOperations.createErrorNotice( message );\n\t\t\t\t\t},\n\t\t\t\t\tallowedTypes: ALLOWED_MEDIA_TYPES,\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( this.props.attributes.poster !== prevProps.attributes.poster ) {\n\t\t\tthis.videoPlayer.current.load();\n\t\t}\n\t}\n\n\tonSelectURL( newSrc ) {\n\t\tconst { attributes, setAttributes } = this.props;\n\t\tconst { src } = attributes;\n\n\t\tif ( newSrc !== src ) {\n\t\t\t// Check if there's an embed block that handles this URL.\n\t\t\tconst embedBlock = createUpgradedEmbedBlock( {\n\t\t\t\tattributes: { url: newSrc },\n\t\t\t} );\n\t\t\tif ( undefined !== embedBlock ) {\n\t\t\t\tthis.props.onReplace( embedBlock );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetAttributes( { src: newSrc, id: undefined } );\n\t\t}\n\t}\n\n\tonSelectPoster( image ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { poster: image.url } );\n\t}\n\n\tonRemovePoster() {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { poster: '' } );\n\n\t\t// Move focus back to the Media Upload button.\n\t\tthis.posterImageButton.current.focus();\n\t}\n\n\tonUploadError( message ) {\n\t\tconst { noticeOperations } = this.props;\n\t\tnoticeOperations.removeAllNotices();\n\t\tnoticeOperations.createErrorNotice( message );\n\t}\n\n\trender() {\n\t\tconst { id, caption, controls, poster, src } = this.props.attributes;\n\t\tconst {\n\t\t\tinstanceId,\n\t\t\tisSelected,\n\t\t\tnoticeUI,\n\t\t\tattributes,\n\t\t\tsetAttributes,\n\t\t\tinsertBlocksAfter,\n\t\t} = this.props;\n\t\tconst onSelectVideo = ( media ) => {\n\t\t\tif ( ! media || ! media.url ) {\n\t\t\t\t// in this case there was an error\n\t\t\t\t// previous attributes should be removed\n\t\t\t\t// because they may be temporary blob urls\n\t\t\t\tsetAttributes( { src: undefined, id: undefined } );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// sets the block's attribute and updates the edit component from the\n\t\t\t// selected media\n\t\t\tsetAttributes( { src: media.url, id: media.id } );\n\t\t};\n\n\t\tif ( ! src ) {\n\t\t\treturn (\n\t\t\t\t<Block.div>\n\t\t\t\t\t<MediaPlaceholder\n\t\t\t\t\t\ticon={ <BlockIcon icon={ icon } /> }\n\t\t\t\t\t\tonSelect={ onSelectVideo }\n\t\t\t\t\t\tonSelectURL={ this.onSelectURL }\n\t\t\t\t\t\taccept=\"video/*\"\n\t\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\t\t\tvalue={ this.props.attributes }\n\t\t\t\t\t\tnotices={ noticeUI }\n\t\t\t\t\t\tonError={ this.onUploadError }\n\t\t\t\t\t/>\n\t\t\t\t</Block.div>\n\t\t\t);\n\t\t}\n\t\tconst videoPosterDescription = `video-block__poster-image-description-${ instanceId }`;\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<BlockControls>\n\t\t\t\t\t<MediaReplaceFlow\n\t\t\t\t\t\tmediaId={ id }\n\t\t\t\t\t\tmediaURL={ src }\n\t\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\t\t\taccept=\"video/*\"\n\t\t\t\t\t\tonSelect={ onSelectVideo }\n\t\t\t\t\t\tonSelectURL={ this.onSelectURL }\n\t\t\t\t\t\tonError={ this.onUploadError }\n\t\t\t\t\t/>\n\t\t\t\t</BlockControls>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody title={ __( 'Video settings' ) }>\n\t\t\t\t\t\t<VideoCommonSettings\n\t\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<MediaUploadCheck>\n\t\t\t\t\t\t\t<BaseControl className=\"editor-video-poster-control\">\n\t\t\t\t\t\t\t\t<BaseControl.VisualLabel>\n\t\t\t\t\t\t\t\t\t{ __( 'Poster image' ) }\n\t\t\t\t\t\t\t\t</BaseControl.VisualLabel>\n\t\t\t\t\t\t\t\t<MediaUpload\n\t\t\t\t\t\t\t\t\ttitle={ __( 'Select poster image' ) }\n\t\t\t\t\t\t\t\t\tonSelect={ this.onSelectPoster }\n\t\t\t\t\t\t\t\t\tallowedTypes={\n\t\t\t\t\t\t\t\t\t\tVIDEO_POSTER_ALLOWED_MEDIA_TYPES\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\trender={ ( { open } ) => (\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\t\t\t\t\tonClick={ open }\n\t\t\t\t\t\t\t\t\t\t\tref={ this.posterImageButton }\n\t\t\t\t\t\t\t\t\t\t\taria-describedby={\n\t\t\t\t\t\t\t\t\t\t\t\tvideoPosterDescription\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{ ! this.props.attributes.poster\n\t\t\t\t\t\t\t\t\t\t\t\t? __( 'Select' )\n\t\t\t\t\t\t\t\t\t\t\t\t: __( 'Replace' ) }\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<p id={ videoPosterDescription } hidden>\n\t\t\t\t\t\t\t\t\t{ this.props.attributes.poster\n\t\t\t\t\t\t\t\t\t\t? sprintf(\n\t\t\t\t\t\t\t\t\t\t\t\t/* translators: %s: poster image URL. */\n\t\t\t\t\t\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t\t\t\t\t\t'The current poster image url is %s'\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\tthis.props.attributes.poster\n\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t: __(\n\t\t\t\t\t\t\t\t\t\t\t\t'There is no poster image currently selected'\n\t\t\t\t\t\t\t\t\t\t  ) }\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t{ !! this.props.attributes.poster && (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tonClick={ this.onRemovePoster }\n\t\t\t\t\t\t\t\t\t\tisTertiary\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Remove' ) }\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</BaseControl>\n\t\t\t\t\t\t</MediaUploadCheck>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\t\t\t\t<Block.figure>\n\t\t\t\t\t{ /*\n\t\t\t\t\t\tDisable the video tag so the user clicking on it won't play the\n\t\t\t\t\t\tvideo when the controls are enabled.\n\t\t\t\t\t*/ }\n\t\t\t\t\t<Disabled>\n\t\t\t\t\t\t<video\n\t\t\t\t\t\t\tcontrols={ controls }\n\t\t\t\t\t\t\tposter={ poster }\n\t\t\t\t\t\t\tsrc={ src }\n\t\t\t\t\t\t\tref={ this.videoPlayer }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Disabled>\n\t\t\t\t\t{ ( ! RichText.isEmpty( caption ) || isSelected ) && (\n\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\ttagName=\"figcaption\"\n\t\t\t\t\t\t\tplaceholder={ __( 'Write captionâ€¦' ) }\n\t\t\t\t\t\t\tvalue={ caption }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tsetAttributes( { caption: value } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tinlineToolbar\n\t\t\t\t\t\t\t__unstableOnSplitAtEnd={ () =>\n\t\t\t\t\t\t\t\tinsertBlocksAfter(\n\t\t\t\t\t\t\t\t\tcreateBlock( 'core/paragraph' )\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</Block.figure>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { getSettings } = select( 'core/block-editor' );\n\t\tconst { mediaUpload } = getSettings();\n\t\treturn { mediaUpload };\n\t} ),\n\twithNotices,\n\twithInstanceId,\n] )( VideoEdit );\n"]}
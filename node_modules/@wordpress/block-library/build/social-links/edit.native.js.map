{"version":3,"sources":["@wordpress/block-library/src/social-links/edit.native.js"],"names":["ALLOWED_BLOCKS","variations","map","v","name","TEMPLATE","service","url","SocialLinksEdit","shouldDelete","onDelete","isSelected","isInnerIconSelected","innerBlocks","attributes","activeInnerBlocks","getBlock","initialCreation","setInitialCreation","shouldRenderFooterAppender","align","spacing","styles","marginLeft","renderFooterAppender","placeholderStyle","placeholder","placeholderDark","renderPlaceholder","Array","length","_","index","filterInnerBlocks","blockIds","filter","blockId","placeholderWrapper","current","undefined","select","clientId","getBlockCount","getBlockParents","getSelectedBlockClientId","getBlocks","selectedBlockClientId","selectedBlockParents","block","dispatch","removeBlock"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View } from 'react-native';\n/**\n * WordPress dependencies\n */\nimport { InnerBlocks } from '@wordpress/block-editor';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { useRef, useEffect, useState } from '@wordpress/element';\nimport { compose, usePreferredColorSchemeStyle } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport styles from './editor.scss';\nimport variations from '../social-link/variations';\n\nconst ALLOWED_BLOCKS = variations.map(\n\t( v ) => `core/social-link-${ v.name }`\n);\n\n// Template contains the links that show when start.\nconst TEMPLATE = [\n\t[\n\t\t'core/social-link-wordpress',\n\t\t{ service: 'wordpress', url: 'https://wordpress.org' },\n\t],\n\t[ 'core/social-link-facebook', { service: 'facebook' } ],\n\t[ 'core/social-link-twitter', { service: 'twitter' } ],\n\t[ 'core/social-link-instagram', { service: 'instagram' } ],\n];\n\nfunction SocialLinksEdit( {\n\tshouldDelete,\n\tonDelete,\n\tisSelected,\n\tisInnerIconSelected,\n\tinnerBlocks,\n\tattributes,\n\tactiveInnerBlocks,\n\tgetBlock,\n} ) {\n\tconst [ initialCreation, setInitialCreation ] = useState( true );\n\tconst shouldRenderFooterAppender = isSelected || isInnerIconSelected;\n\tconst { align } = attributes;\n\tconst { marginLeft: spacing } = styles.spacing;\n\n\tuseEffect( () => {\n\t\tif ( ! shouldRenderFooterAppender ) {\n\t\t\tsetInitialCreation( false );\n\t\t}\n\t}, [ shouldRenderFooterAppender ] );\n\n\tconst renderFooterAppender = useRef( () => (\n\t\t<View>\n\t\t\t<InnerBlocks.ButtonBlockAppender isFloating={ true } />\n\t\t</View>\n\t) );\n\n\tconst placeholderStyle = usePreferredColorSchemeStyle(\n\t\tstyles.placeholder,\n\t\tstyles.placeholderDark\n\t);\n\n\tfunction renderPlaceholder() {\n\t\treturn [\n\t\t\t...new Array( innerBlocks.length || 1 ),\n\t\t].map( ( _, index ) => (\n\t\t\t<View style={ placeholderStyle } key={ index } />\n\t\t) );\n\t}\n\n\tfunction filterInnerBlocks( blockIds ) {\n\t\treturn blockIds.filter(\n\t\t\t( blockId ) => getBlock( blockId ).attributes.url\n\t\t);\n\t}\n\n\tif ( ! shouldRenderFooterAppender && activeInnerBlocks.length === 0 ) {\n\t\treturn (\n\t\t\t<View style={ styles.placeholderWrapper }>\n\t\t\t\t{ renderPlaceholder() }\n\t\t\t</View>\n\t\t);\n\t}\n\n\treturn (\n\t\t<InnerBlocks\n\t\t\tallowedBlocks={ ALLOWED_BLOCKS }\n\t\t\ttemplateLock={ false }\n\t\t\ttemplate={ initialCreation && TEMPLATE }\n\t\t\trenderFooterAppender={\n\t\t\t\tshouldRenderFooterAppender && renderFooterAppender.current\n\t\t\t}\n\t\t\torientation={ 'horizontal' }\n\t\t\tonDeleteBlock={ shouldDelete ? onDelete : undefined }\n\t\t\tmarginVertical={ spacing }\n\t\t\tmarginHorizontal={ spacing }\n\t\t\thorizontalAlignment={ align }\n\t\t\tfilterInnerBlocks={\n\t\t\t\t! shouldRenderFooterAppender && filterInnerBlocks\n\t\t\t}\n\t\t/>\n\t);\n}\n\nexport default compose(\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst {\n\t\t\tgetBlockCount,\n\t\t\tgetBlockParents,\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetBlocks,\n\t\t\tgetBlock,\n\t\t} = select( 'core/block-editor' );\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\tconst selectedBlockParents = getBlockParents(\n\t\t\tselectedBlockClientId,\n\t\t\ttrue\n\t\t);\n\t\tconst innerBlocks = getBlocks( clientId );\n\t\tconst activeInnerBlocks = innerBlocks.filter(\n\t\t\t( block ) => block.attributes?.url\n\t\t);\n\n\t\treturn {\n\t\t\tshouldDelete: getBlockCount( clientId ) === 1,\n\t\t\tisInnerIconSelected: selectedBlockParents[ 0 ] === clientId,\n\t\t\tinnerBlocks,\n\t\t\tactiveInnerBlocks,\n\t\t\tgetBlock,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId } ) => {\n\t\tconst { removeBlock } = dispatch( 'core/block-editor' );\n\n\t\treturn {\n\t\t\tonDelete: () => {\n\t\t\t\tremoveBlock( clientId, false );\n\t\t\t},\n\t\t};\n\t} )\n)( SocialLinksEdit );\n"]}
{"version":3,"sources":["@wordpress/block-library/src/media-text/media-container.native.js"],"names":["ALLOWED_MEDIA_TYPES","MEDIA_TYPE_IMAGE","MEDIA_TYPE_VIDEO","ICON_TYPE","PLACEHOLDER","RETRY","MediaContainer","arguments","onUploadError","bind","updateMediaProgress","finishMediaUploadWithSuccess","finishMediaUploadWithFailure","mediaUploadStateReset","onSelectMediaUploadOption","onMediaPressed","state","isUploadInProgress","props","mediaId","mediaUrl","message","noticeOperations","removeAllNotices","createErrorNotice","params","id","url","type","onSelectMedia","media_type","mediaType","isMediaSelected","onMediaSelected","iconType","getStylesFromColorScheme","iconStyle","styles","iconRetry","iconRetryVideo","iconRetryVideoDark","SvgIconRetry","iconPlaceholder","iconPlaceholderDark","icon","setState","payload","onMediaUpdate","mediaServerId","openMediaOptions","aligmentStyles","focalPoint","imageFill","isSelected","mediaAlt","mediaWidth","shouldStack","isUploadFailed","retryMessage","focalPointValues","IMAGE_DEFAULT_FOCAL_POINT","imageWithFocalPoint","height","imageCropped","mediaImageContainer","showVideo","videoPlaceholderStyles","videoPlaceholder","videoPlaceholderDark","retryVideoTextStyles","uploadFailedText","uploadFailedTextVideo","uploadFailedTextVideoDark","mediaVideo","videoContainer","videoContent","aspectRatio","VIDEO_ASPECT_RATIO","videoPlayer","video","uri","modalIcon","getIcon","mediaElement","renderImage","renderVideo","title","onFocus","onSetOpenPickerRef","coverUrl","open","getMediaOptions","renderContent","renderPlaceholder","Component","withNotices","withPreferredColorScheme"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View, Text, TouchableWithoutFeedback } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tmediaUploadSync,\n\trequestImageFailedRetryDialog,\n\trequestImageUploadCancelDialog,\n\trequestImageFullscreenPreview,\n} from '@wordpress/react-native-bridge';\nimport {\n\tIcon,\n\tImage,\n\tIMAGE_DEFAULT_FOCAL_POINT,\n\twithNotices,\n} from '@wordpress/components';\nimport {\n\tMEDIA_TYPE_IMAGE,\n\tMEDIA_TYPE_VIDEO,\n\tMediaPlaceholder,\n\tMediaUpload,\n\tMediaUploadProgress,\n\tVIDEO_ASPECT_RATIO,\n\tVideoPlayer,\n} from '@wordpress/block-editor';\nimport { Component } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { isURL, getProtocol } from '@wordpress/url';\nimport { compose, withPreferredColorScheme } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\nimport icon from './media-container-icon';\nimport SvgIconRetry from './icon-retry';\n\n/**\n * Constants\n */\nconst ALLOWED_MEDIA_TYPES = [ MEDIA_TYPE_IMAGE, MEDIA_TYPE_VIDEO ];\n\nconst ICON_TYPE = {\n\tPLACEHOLDER: 'placeholder',\n\tRETRY: 'retry',\n};\n\nexport { imageFillStyles } from './media-container.js';\n\nclass MediaContainer extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.onUploadError = this.onUploadError.bind( this );\n\t\tthis.updateMediaProgress = this.updateMediaProgress.bind( this );\n\t\tthis.finishMediaUploadWithSuccess = this.finishMediaUploadWithSuccess.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.finishMediaUploadWithFailure = this.finishMediaUploadWithFailure.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.mediaUploadStateReset = this.mediaUploadStateReset.bind( this );\n\t\tthis.onSelectMediaUploadOption = this.onSelectMediaUploadOption.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.onMediaPressed = this.onMediaPressed.bind( this );\n\n\t\tthis.state = {\n\t\t\tisUploadInProgress: false,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { mediaId, mediaUrl } = this.props;\n\n\t\t// Make sure we mark any temporary images as failed if they failed while\n\t\t// the editor wasn't open\n\t\tif ( mediaId && mediaUrl && getProtocol( mediaUrl ) === 'file:' ) {\n\t\t\tmediaUploadSync();\n\t\t}\n\t}\n\n\tonUploadError( message ) {\n\t\tconst { noticeOperations } = this.props;\n\t\tnoticeOperations.removeAllNotices();\n\t\tnoticeOperations.createErrorNotice( message );\n\t}\n\n\tonSelectMediaUploadOption( params ) {\n\t\tconst { id, url, type } = params;\n\t\tconst { onSelectMedia } = this.props;\n\n\t\tonSelectMedia( {\n\t\t\tmedia_type: type,\n\t\t\tid,\n\t\t\turl,\n\t\t} );\n\t}\n\n\tonMediaPressed() {\n\t\tconst { isUploadInProgress } = this.state;\n\t\tconst {\n\t\t\tmediaId,\n\t\t\tmediaUrl,\n\t\t\tmediaType,\n\t\t\tisMediaSelected,\n\t\t\tonMediaSelected,\n\t\t} = this.props;\n\n\t\tif ( isUploadInProgress ) {\n\t\t\trequestImageUploadCancelDialog( mediaId );\n\t\t} else if ( mediaId && getProtocol( mediaUrl ) === 'file:' ) {\n\t\t\trequestImageFailedRetryDialog( mediaId );\n\t\t} else if ( mediaType === MEDIA_TYPE_IMAGE && isMediaSelected ) {\n\t\t\trequestImageFullscreenPreview( mediaUrl );\n\t\t} else if ( mediaType === MEDIA_TYPE_IMAGE ) {\n\t\t\tonMediaSelected();\n\t\t}\n\t}\n\n\tgetIcon( iconType ) {\n\t\tconst { mediaType, getStylesFromColorScheme } = this.props;\n\t\tlet iconStyle;\n\t\tswitch ( iconType ) {\n\t\t\tcase ICON_TYPE.RETRY:\n\t\t\t\ticonStyle =\n\t\t\t\t\tmediaType === MEDIA_TYPE_IMAGE\n\t\t\t\t\t\t? styles.iconRetry\n\t\t\t\t\t\t: getStylesFromColorScheme(\n\t\t\t\t\t\t\t\tstyles.iconRetryVideo,\n\t\t\t\t\t\t\t\tstyles.iconRetryVideoDark\n\t\t\t\t\t\t  );\n\n\t\t\t\treturn <Icon icon={ SvgIconRetry } { ...iconStyle } />;\n\t\t\tcase ICON_TYPE.PLACEHOLDER:\n\t\t\t\ticonStyle = getStylesFromColorScheme(\n\t\t\t\t\tstyles.iconPlaceholder,\n\t\t\t\t\tstyles.iconPlaceholderDark\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t}\n\t\treturn <Icon icon={ icon } { ...iconStyle } />;\n\t}\n\n\tupdateMediaProgress() {\n\t\tif ( ! this.state.isUploadInProgress ) {\n\t\t\tthis.setState( { isUploadInProgress: true } );\n\t\t}\n\t}\n\n\tfinishMediaUploadWithSuccess( payload ) {\n\t\tconst { onMediaUpdate } = this.props;\n\n\t\tonMediaUpdate( {\n\t\t\tid: payload.mediaServerId,\n\t\t\turl: payload.mediaUrl,\n\t\t} );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tfinishMediaUploadWithFailure() {\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tmediaUploadStateReset() {\n\t\tconst { onMediaUpdate } = this.props;\n\n\t\tonMediaUpdate( { id: null, url: null } );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\trenderImage( params, openMediaOptions ) {\n\t\tconst { isUploadInProgress } = this.state;\n\t\tconst {\n\t\t\taligmentStyles,\n\t\t\tfocalPoint,\n\t\t\timageFill,\n\t\t\tisMediaSelected,\n\t\t\tisSelected,\n\t\t\tmediaAlt,\n\t\t\tmediaUrl,\n\t\t\tmediaWidth,\n\t\t\tshouldStack,\n\t\t} = this.props;\n\t\tconst { isUploadFailed, retryMessage } = params;\n\t\tconst focalPointValues = ! focalPoint\n\t\t\t? IMAGE_DEFAULT_FOCAL_POINT\n\t\t\t: focalPoint;\n\n\t\treturn (\n\t\t\t<View\n\t\t\t\tstyle={ [\n\t\t\t\t\timageFill && styles.imageWithFocalPoint,\n\t\t\t\t\timageFill &&\n\t\t\t\t\t\tshouldStack && {\n\t\t\t\t\t\t\theight: styles.imageFill.height,\n\t\t\t\t\t\t},\n\t\t\t\t] }\n\t\t\t>\n\t\t\t\t<TouchableWithoutFeedback\n\t\t\t\t\taccessible={ ! isSelected }\n\t\t\t\t\tonPress={ this.onMediaPressed }\n\t\t\t\t\tonLongPress={ openMediaOptions }\n\t\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\t>\n\t\t\t\t\t<View\n\t\t\t\t\t\tstyle={ [\n\t\t\t\t\t\t\timageFill && styles.imageCropped,\n\t\t\t\t\t\t\tstyles.mediaImageContainer,\n\t\t\t\t\t\t\t! isUploadInProgress && aligmentStyles,\n\t\t\t\t\t\t] }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\talign=\"center\"\n\t\t\t\t\t\t\talt={ mediaAlt }\n\t\t\t\t\t\t\tfocalPoint={ imageFill && focalPointValues }\n\t\t\t\t\t\t\tisSelected={ isMediaSelected }\n\t\t\t\t\t\t\tisUploadFailed={ isUploadFailed }\n\t\t\t\t\t\t\tisUploadInProgress={ isUploadInProgress }\n\t\t\t\t\t\t\tonSelectMediaUploadOption={\n\t\t\t\t\t\t\t\tthis.onSelectMediaUploadOption\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\topenMediaOptions={ openMediaOptions }\n\t\t\t\t\t\t\tretryMessage={ retryMessage }\n\t\t\t\t\t\t\turl={ mediaUrl }\n\t\t\t\t\t\t\twidth={ ! isUploadInProgress && mediaWidth }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t</View>\n\t\t);\n\t}\n\n\trenderVideo( params, openMediaOptions ) {\n\t\tconst {\n\t\t\taligmentStyles,\n\t\t\tmediaUrl,\n\t\t\tisSelected,\n\t\t\tgetStylesFromColorScheme,\n\t\t} = this.props;\n\t\tconst { isUploadInProgress } = this.state;\n\t\tconst { isUploadFailed, retryMessage } = params;\n\t\tconst showVideo =\n\t\t\tisURL( mediaUrl ) && ! isUploadInProgress && ! isUploadFailed;\n\n\t\tconst videoPlaceholderStyles = getStylesFromColorScheme(\n\t\t\tstyles.videoPlaceholder,\n\t\t\tstyles.videoPlaceholderDark\n\t\t);\n\t\tconst retryVideoTextStyles = [\n\t\t\tstyles.uploadFailedText,\n\t\t\tgetStylesFromColorScheme(\n\t\t\t\tstyles.uploadFailedTextVideo,\n\t\t\t\tstyles.uploadFailedTextVideoDark\n\t\t\t),\n\t\t];\n\n\t\treturn (\n\t\t\t<View style={ styles.mediaVideo }>\n\t\t\t\t<TouchableWithoutFeedback\n\t\t\t\t\taccessible={ ! isSelected }\n\t\t\t\t\tonPress={ this.onMediaPressed }\n\t\t\t\t\tonLongPress={ openMediaOptions }\n\t\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\t>\n\t\t\t\t\t<View style={ [ styles.videoContainer, aligmentStyles ] }>\n\t\t\t\t\t\t<View\n\t\t\t\t\t\t\tstyle={ [\n\t\t\t\t\t\t\t\tstyles.videoContent,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\taspectRatio: VIDEO_ASPECT_RATIO,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ showVideo && (\n\t\t\t\t\t\t\t\t<View style={ styles.videoPlayer }>\n\t\t\t\t\t\t\t\t\t<VideoPlayer\n\t\t\t\t\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\t\t\t\t\tstyle={ styles.video }\n\t\t\t\t\t\t\t\t\t\tsource={ { uri: mediaUrl } }\n\t\t\t\t\t\t\t\t\t\tpaused={ true }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ ! showVideo && (\n\t\t\t\t\t\t\t\t<View style={ videoPlaceholderStyles }>\n\t\t\t\t\t\t\t\t\t<View style={ styles.modalIcon }>\n\t\t\t\t\t\t\t\t\t\t{ isUploadFailed\n\t\t\t\t\t\t\t\t\t\t\t? this.getIcon( ICON_TYPE.RETRY )\n\t\t\t\t\t\t\t\t\t\t\t: this.getIcon(\n\t\t\t\t\t\t\t\t\t\t\t\t\tICON_TYPE.PLACEHOLDER\n\t\t\t\t\t\t\t\t\t\t\t  ) }\n\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t\t{ isUploadFailed && (\n\t\t\t\t\t\t\t\t\t\t<Text style={ retryVideoTextStyles }>\n\t\t\t\t\t\t\t\t\t\t\t{ retryMessage }\n\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</View>\n\t\t\t\t\t</View>\n\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t</View>\n\t\t);\n\t}\n\n\trenderContent( params, openMediaOptions ) {\n\t\tconst { mediaType } = this.props;\n\t\tlet mediaElement = null;\n\n\t\tswitch ( mediaType ) {\n\t\t\tcase MEDIA_TYPE_IMAGE:\n\t\t\t\tmediaElement = this.renderImage( params, openMediaOptions );\n\t\t\t\tbreak;\n\t\t\tcase MEDIA_TYPE_VIDEO:\n\t\t\t\tmediaElement = this.renderVideo( params, openMediaOptions );\n\t\t\t\tbreak;\n\t\t}\n\t\treturn mediaElement;\n\t}\n\n\trenderPlaceholder() {\n\t\treturn (\n\t\t\t<MediaPlaceholder\n\t\t\t\ticon={ this.getIcon( ICON_TYPE.PLACEHOLDER ) }\n\t\t\t\tlabels={ {\n\t\t\t\t\ttitle: __( 'Media area' ),\n\t\t\t\t} }\n\t\t\t\tonSelect={ this.onSelectMediaUploadOption }\n\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\tonFocus={ this.props.onFocus }\n\t\t\t\tonError={ this.onUploadError }\n\t\t\t/>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { mediaUrl, mediaId, mediaType, onSetOpenPickerRef } = this.props;\n\t\tconst coverUrl = mediaType === MEDIA_TYPE_IMAGE ? mediaUrl : null;\n\n\t\tif ( mediaUrl ) {\n\t\t\treturn (\n\t\t\t\t<MediaUpload\n\t\t\t\t\tisReplacingMedia={ true }\n\t\t\t\t\tonSelect={ this.onSelectMediaUploadOption }\n\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\t\tvalue={ mediaId }\n\t\t\t\t\trender={ ( { open, getMediaOptions } ) => {\n\t\t\t\t\t\tonSetOpenPickerRef( open );\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{ getMediaOptions() }\n\n\t\t\t\t\t\t\t\t<MediaUploadProgress\n\t\t\t\t\t\t\t\t\tcoverUrl={ coverUrl }\n\t\t\t\t\t\t\t\t\tmediaId={ mediaId }\n\t\t\t\t\t\t\t\t\tonUpdateMediaProgress={\n\t\t\t\t\t\t\t\t\t\tthis.updateMediaProgress\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonFinishMediaUploadWithSuccess={\n\t\t\t\t\t\t\t\t\t\tthis.finishMediaUploadWithSuccess\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonFinishMediaUploadWithFailure={\n\t\t\t\t\t\t\t\t\t\tthis.finishMediaUploadWithFailure\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonMediaUploadStateReset={\n\t\t\t\t\t\t\t\t\t\tthis.mediaUploadStateReset\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\trenderContent={ ( params ) => {\n\t\t\t\t\t\t\t\t\t\treturn this.renderContent(\n\t\t\t\t\t\t\t\t\t\t\tparams,\n\t\t\t\t\t\t\t\t\t\t\topen\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn this.renderPlaceholder();\n\t}\n}\n\nexport default compose(\n\twithNotices,\n\twithPreferredColorScheme\n)( MediaContainer );\n"]}
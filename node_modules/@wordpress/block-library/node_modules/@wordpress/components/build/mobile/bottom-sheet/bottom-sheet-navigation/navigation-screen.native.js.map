{"version":3,"sources":["@wordpress/components/src/mobile/bottom-sheet/bottom-sheet-navigation/navigation-screen.native.js"],"names":["BottomSheetNavigationScreen","children","navigation","heightRef","maxHeight","isFocused","BottomSheetContext","onHandleHardwareButtonPress","shouldEnableBottomSheetMaxHeight","BottomSheetNavigationContext","setHeight","setHeightDebounce","canGoBack","goBack","current","onLayout","nativeEvent","height","layout"],"mappings":";;;;;;;AAgBA;;AAbA;;AAKA;;AACA;;AAKA;;AAOA;;AArBA;;;;AAWA;;;;AAOA;;;AAKA,IAAMA,2BAA2B,GAAG,SAA9BA,2BAA8B,OAAoB;AAAA,MAAhBC,QAAgB,QAAhBA,QAAgB;AACvD,MAAMC,UAAU,GAAG,4BAAnB;AACA,MAAMC,SAAS,GAAG,qBAAQ;AAAEC,IAAAA,SAAS,EAAE;AAAb,GAAR,CAAlB;AACA,MAAMC,SAAS,GAAG,2BAAlB;;AAHuD,oBAOnD,yBAAYC,8BAAZ,CAPmD;AAAA,MAKtDC,2BALsD,eAKtDA,2BALsD;AAAA,MAMtDC,gCANsD,eAMtDA,gCANsD;;AAAA,qBASjC,yBAAYC,0DAAZ,CATiC;AAAA,MAS/CC,SAT+C,gBAS/CA,SAT+C;;AAWvD,MAAMC,iBAAiB,GAAG,0BAAa,sBAAUD,SAAV,EAAqB,EAArB,CAAb,EAAwC,EAAxC,CAA1B;AAEA,8BACC,0BAAa,YAAM;AAClBH,IAAAA,2BAA2B,CAAE,YAAM;AAClC,UAAKL,UAAU,CAACU,SAAX,EAAL,EAA8B;AAC7BJ,QAAAA,gCAAgC,CAAE,IAAF,CAAhC;AACAN,QAAAA,UAAU,CAACW,MAAX;AACA,eAAO,IAAP;AACA;;AACDN,MAAAA,2BAA2B,CAAE,IAAF,CAA3B;AACA,aAAO,KAAP;AACA,KAR0B,CAA3B;;AASA,QAAKJ,SAAS,CAACW,OAAV,CAAkBV,SAAlB,KAAgC,CAArC,EAAyC;AACxCM,MAAAA,SAAS,CAAEP,SAAS,CAACW,OAAV,CAAkBV,SAApB,CAAT;AACA;;AACD,WAAO,YAAM,CAAE,CAAf;AACA,GAdD,EAcG,EAdH,CADD;;AAiBA,MAAMW,QAAQ,GAAG,SAAXA,QAAW,QAAuB;AAAA,QAAnBC,WAAmB,SAAnBA,WAAmB;AAAA,QAC/BC,MAD+B,GACpBD,WAAW,CAACE,MADQ,CAC/BD,MAD+B;;AAEvC,QAAKd,SAAS,CAACW,OAAV,CAAkBV,SAAlB,KAAgCa,MAAhC,IAA0CZ,SAA/C,EAA2D;AAC1DF,MAAAA,SAAS,CAACW,OAAV,CAAkBV,SAAlB,GAA8Ba,MAA9B;AACAN,MAAAA,iBAAiB,CAAEM,MAAF,EAAU,IAAV,CAAjB;AACA;AACD,GAND;;AAQA,SAAO,sBAAS,YAAM;AACrB,WAAO,4BAAC,iBAAD;AAAM,MAAA,QAAQ,EAAGF;AAAjB,OAA8Bd,QAA9B,CAAP;AACA,GAFM,EAEJ,CAAEA,QAAF,EAAYI,SAAZ,CAFI,CAAP;AAGA,CAzCD;;eA2CeL,2B","sourcesContent":["/**\n * External dependencies\n */\nimport {\n\tuseFocusEffect,\n\tuseIsFocused,\n\tuseNavigation,\n} from '@react-navigation/native';\nimport { View } from 'react-native';\nimport { debounce } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { BottomSheetContext } from '@wordpress/components';\n\nimport { useRef, useCallback, useContext, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { BottomSheetNavigationContext } from './bottom-sheet-navigation-context';\n\nconst BottomSheetNavigationScreen = ( { children } ) => {\n\tconst navigation = useNavigation();\n\tconst heightRef = useRef( { maxHeight: 0 } );\n\tconst isFocused = useIsFocused();\n\tconst {\n\t\tonHandleHardwareButtonPress,\n\t\tshouldEnableBottomSheetMaxHeight,\n\t} = useContext( BottomSheetContext );\n\n\tconst { setHeight } = useContext( BottomSheetNavigationContext );\n\n\tconst setHeightDebounce = useCallback( debounce( setHeight, 10 ), [] );\n\n\tuseFocusEffect(\n\t\tuseCallback( () => {\n\t\t\tonHandleHardwareButtonPress( () => {\n\t\t\t\tif ( navigation.canGoBack() ) {\n\t\t\t\t\tshouldEnableBottomSheetMaxHeight( true );\n\t\t\t\t\tnavigation.goBack();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tonHandleHardwareButtonPress( null );\n\t\t\t\treturn false;\n\t\t\t} );\n\t\t\tif ( heightRef.current.maxHeight !== 0 ) {\n\t\t\t\tsetHeight( heightRef.current.maxHeight );\n\t\t\t}\n\t\t\treturn () => {};\n\t\t}, [] )\n\t);\n\tconst onLayout = ( { nativeEvent } ) => {\n\t\tconst { height } = nativeEvent.layout;\n\t\tif ( heightRef.current.maxHeight !== height && isFocused ) {\n\t\t\theightRef.current.maxHeight = height;\n\t\t\tsetHeightDebounce( height, true );\n\t\t}\n\t};\n\n\treturn useMemo( () => {\n\t\treturn <View onLayout={ onLayout }>{ children }</View>;\n\t}, [ children, isFocused ] );\n};\n\nexport default BottomSheetNavigationScreen;\n"]}
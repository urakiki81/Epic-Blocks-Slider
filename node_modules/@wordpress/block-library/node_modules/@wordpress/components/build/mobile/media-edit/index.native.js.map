{"version":3,"sources":["@wordpress/components/src/mobile/media-edit/index.native.js"],"names":["MEDIA_TYPE_IMAGE","MEDIA_EDITOR","editOption","id","value","label","types","replaceOption","mediaSources","deviceLibrary","MediaEdit","props","onPickerPresent","bind","onPickerSelect","getMediaOptionsItems","getDestructiveButtonIndex","pickerOptions","openReplaceMediaOptions","options","destructiveButtonIndex","findIndex","option","destructiveButton","undefined","picker","presentPicker","onSelect","multiple","source","uri","media","optionSelected","find","onPress","mediaOptions","instance","render","open","React","Component"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport React from 'react';\nimport { compact } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Picker } from '@wordpress/components';\nimport {\n\trequestMediaEditor,\n\tmediaSources,\n} from '@wordpress/react-native-bridge';\n\nexport const MEDIA_TYPE_IMAGE = 'image';\n\nexport const MEDIA_EDITOR = 'MEDIA_EDITOR';\n\nconst editOption = {\n\tid: MEDIA_EDITOR,\n\tvalue: MEDIA_EDITOR,\n\tlabel: __( 'Edit' ),\n\ttypes: [ MEDIA_TYPE_IMAGE ],\n};\n\nconst replaceOption = {\n\tid: mediaSources.deviceLibrary,\n\tvalue: mediaSources.deviceLibrary,\n\tlabel: __( 'Replace' ),\n\ttypes: [ MEDIA_TYPE_IMAGE ],\n};\n\nexport class MediaEdit extends React.Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.onPickerPresent = this.onPickerPresent.bind( this );\n\t\tthis.onPickerSelect = this.onPickerSelect.bind( this );\n\t\tthis.getMediaOptionsItems = this.getMediaOptionsItems.bind( this );\n\t\tthis.getDestructiveButtonIndex = this.getDestructiveButtonIndex.bind(\n\t\t\tthis\n\t\t);\n\t}\n\n\tgetMediaOptionsItems() {\n\t\tconst { pickerOptions, openReplaceMediaOptions } = this.props;\n\n\t\treturn compact( [\n\t\t\teditOption,\n\t\t\topenReplaceMediaOptions && replaceOption,\n\t\t\t...( pickerOptions ? pickerOptions : [] ),\n\t\t] );\n\t}\n\n\tgetDestructiveButtonIndex() {\n\t\tconst options = this.getMediaOptionsItems();\n\t\tconst destructiveButtonIndex = options.findIndex(\n\t\t\t( option ) => option?.destructiveButton\n\t\t);\n\n\t\treturn destructiveButtonIndex !== -1\n\t\t\t? destructiveButtonIndex + 1\n\t\t\t: undefined;\n\t}\n\n\tonPickerPresent() {\n\t\tif ( this.picker ) {\n\t\t\tthis.picker.presentPicker();\n\t\t}\n\t}\n\n\tonPickerSelect( value ) {\n\t\tconst {\n\t\t\tonSelect,\n\t\t\tpickerOptions,\n\t\t\tmultiple = false,\n\t\t\topenReplaceMediaOptions,\n\t\t} = this.props;\n\n\t\tswitch ( value ) {\n\t\t\tcase MEDIA_EDITOR:\n\t\t\t\trequestMediaEditor( this.props.source.uri, ( media ) => {\n\t\t\t\t\tif ( ( multiple && media ) || ( media && media.id ) ) {\n\t\t\t\t\t\tonSelect( media );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconst optionSelected =\n\t\t\t\t\tpickerOptions &&\n\t\t\t\t\tpickerOptions.find( ( option ) => option.id === value );\n\n\t\t\t\tif ( optionSelected && optionSelected.onPress ) {\n\t\t\t\t\toptionSelected.onPress();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( openReplaceMediaOptions ) {\n\t\t\t\t\topenReplaceMediaOptions();\n\t\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\tconst mediaOptions = () => (\n\t\t\t<Picker\n\t\t\t\thideCancelButton\n\t\t\t\tref={ ( instance ) => ( this.picker = instance ) }\n\t\t\t\toptions={ this.getMediaOptionsItems() }\n\t\t\t\tleftAlign={ true }\n\t\t\t\tonChange={ this.onPickerSelect }\n\t\t\t\t// translators: %s: block title e.g: \"Paragraph\".\n\t\t\t\ttitle={ __( 'Media options' ) }\n\t\t\t\tdestructiveButtonIndex={ this.getDestructiveButtonIndex() }\n\t\t\t/>\n\t\t);\n\n\t\treturn this.props.render( {\n\t\t\topen: this.onPickerPresent,\n\t\t\tmediaOptions,\n\t\t} );\n\t}\n}\n\nexport default MediaEdit;\n"]}
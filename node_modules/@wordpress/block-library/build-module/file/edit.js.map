{"version":3,"sources":["@wordpress/block-library/src/file/edit.js"],"names":["classnames","getBlobByURL","isBlobURL","revokeBlobURL","Animate","ClipboardButton","withNotices","compose","withSelect","BlockControls","BlockIcon","MediaPlaceholder","MediaReplaceFlow","RichText","Component","__","_x","file","icon","FileBlockInspector","FileEdit","arguments","onSelectFile","bind","confirmCopyURL","resetCopyConfirmation","changeLinkDestinationOption","changeOpenInNewWindow","changeShowDownloadButton","onUploadError","state","hasError","showCopyConfirmation","props","attributes","mediaUpload","noticeOperations","setAttributes","downloadButtonText","href","filesList","onFileChange","media","onError","message","setState","createErrorNotice","undefined","prevProps","isSelected","url","fileName","title","textLinkHref","id","removeAllNotices","newHref","newValue","textLinkTarget","showDownloadButton","className","noticeUI","attachmentPage","link","instructions","classes","openInNewWindow","animateClassName","text","select","getMedia","getSettings"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { getBlobByURL, isBlobURL, revokeBlobURL } from '@wordpress/blob';\nimport { Animate, ClipboardButton, withNotices } from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\nimport {\n\tBlockControls,\n\tBlockIcon,\n\tMediaPlaceholder,\n\tMediaReplaceFlow,\n\tRichText,\n} from '@wordpress/block-editor';\nimport { Component } from '@wordpress/element';\nimport { __, _x } from '@wordpress/i18n';\nimport { file as icon } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport FileBlockInspector from './inspector';\n\nclass FileEdit extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.onSelectFile = this.onSelectFile.bind( this );\n\t\tthis.confirmCopyURL = this.confirmCopyURL.bind( this );\n\t\tthis.resetCopyConfirmation = this.resetCopyConfirmation.bind( this );\n\t\tthis.changeLinkDestinationOption = this.changeLinkDestinationOption.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.changeOpenInNewWindow = this.changeOpenInNewWindow.bind( this );\n\t\tthis.changeShowDownloadButton = this.changeShowDownloadButton.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.onUploadError = this.onUploadError.bind( this );\n\n\t\tthis.state = {\n\t\t\thasError: false,\n\t\t\tshowCopyConfirmation: false,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tconst {\n\t\t\tattributes,\n\t\t\tmediaUpload,\n\t\t\tnoticeOperations,\n\t\t\tsetAttributes,\n\t\t} = this.props;\n\t\tconst { downloadButtonText, href } = attributes;\n\n\t\t// Upload a file drag-and-dropped into the editor\n\t\tif ( isBlobURL( href ) ) {\n\t\t\tconst file = getBlobByURL( href );\n\n\t\t\tmediaUpload( {\n\t\t\t\tfilesList: [ file ],\n\t\t\t\tonFileChange: ( [ media ] ) => this.onSelectFile( media ),\n\t\t\t\tonError: ( message ) => {\n\t\t\t\t\tthis.setState( { hasError: true } );\n\t\t\t\t\tnoticeOperations.createErrorNotice( message );\n\t\t\t\t},\n\t\t\t} );\n\n\t\t\trevokeBlobURL( href );\n\t\t}\n\n\t\tif ( downloadButtonText === undefined ) {\n\t\t\tsetAttributes( {\n\t\t\t\tdownloadButtonText: _x( 'Download', 'button label' ),\n\t\t\t} );\n\t\t}\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\t// Reset copy confirmation state when block is deselected\n\t\tif ( prevProps.isSelected && ! this.props.isSelected ) {\n\t\t\tthis.setState( { showCopyConfirmation: false } );\n\t\t}\n\t}\n\n\tonSelectFile( media ) {\n\t\tif ( media && media.url ) {\n\t\t\tthis.setState( { hasError: false } );\n\t\t\tthis.props.setAttributes( {\n\t\t\t\thref: media.url,\n\t\t\t\tfileName: media.title,\n\t\t\t\ttextLinkHref: media.url,\n\t\t\t\tid: media.id,\n\t\t\t} );\n\t\t}\n\t}\n\n\tonUploadError( message ) {\n\t\tconst { noticeOperations } = this.props;\n\t\tthis.setState( { hasError: true } );\n\t\tnoticeOperations.removeAllNotices();\n\t\tnoticeOperations.createErrorNotice( message );\n\t}\n\n\tconfirmCopyURL() {\n\t\tthis.setState( { showCopyConfirmation: true } );\n\t}\n\n\tresetCopyConfirmation() {\n\t\tthis.setState( { showCopyConfirmation: false } );\n\t}\n\n\tchangeLinkDestinationOption( newHref ) {\n\t\t// Choose Media File or Attachment Page (when file is in Media Library)\n\t\tthis.props.setAttributes( { textLinkHref: newHref } );\n\t}\n\n\tchangeOpenInNewWindow( newValue ) {\n\t\tthis.props.setAttributes( {\n\t\t\ttextLinkTarget: newValue ? '_blank' : false,\n\t\t} );\n\t}\n\n\tchangeShowDownloadButton( newValue ) {\n\t\tthis.props.setAttributes( { showDownloadButton: newValue } );\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tclassName,\n\t\t\tisSelected,\n\t\t\tattributes,\n\t\t\tsetAttributes,\n\t\t\tnoticeUI,\n\t\t\tmedia,\n\t\t} = this.props;\n\t\tconst {\n\t\t\tid,\n\t\t\tfileName,\n\t\t\thref,\n\t\t\ttextLinkHref,\n\t\t\ttextLinkTarget,\n\t\t\tshowDownloadButton,\n\t\t\tdownloadButtonText,\n\t\t} = attributes;\n\t\tconst { hasError, showCopyConfirmation } = this.state;\n\t\tconst attachmentPage = media && media.link;\n\n\t\tif ( ! href || hasError ) {\n\t\t\treturn (\n\t\t\t\t<MediaPlaceholder\n\t\t\t\t\ticon={ <BlockIcon icon={ icon } /> }\n\t\t\t\t\tlabels={ {\n\t\t\t\t\t\ttitle: __( 'File' ),\n\t\t\t\t\t\tinstructions: __(\n\t\t\t\t\t\t\t'Upload a file or pick one from your media library.'\n\t\t\t\t\t\t),\n\t\t\t\t\t} }\n\t\t\t\t\tonSelect={ this.onSelectFile }\n\t\t\t\t\tnotices={ noticeUI }\n\t\t\t\t\tonError={ this.onUploadError }\n\t\t\t\t\taccept=\"*\"\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\tconst classes = classnames( className, {\n\t\t\t'is-transient': isBlobURL( href ),\n\t\t} );\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<FileBlockInspector\n\t\t\t\t\threfs={ { href, textLinkHref, attachmentPage } }\n\t\t\t\t\t{ ...{\n\t\t\t\t\t\topenInNewWindow: !! textLinkTarget,\n\t\t\t\t\t\tshowDownloadButton,\n\t\t\t\t\t\tchangeLinkDestinationOption: this\n\t\t\t\t\t\t\t.changeLinkDestinationOption,\n\t\t\t\t\t\tchangeOpenInNewWindow: this.changeOpenInNewWindow,\n\t\t\t\t\t\tchangeShowDownloadButton: this.changeShowDownloadButton,\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t\t<BlockControls>\n\t\t\t\t\t<MediaReplaceFlow\n\t\t\t\t\t\tmediaId={ id }\n\t\t\t\t\t\tmediaURL={ href }\n\t\t\t\t\t\taccept=\"*\"\n\t\t\t\t\t\tonSelect={ this.onSelectFile }\n\t\t\t\t\t\tonError={ this.onUploadError }\n\t\t\t\t\t/>\n\t\t\t\t</BlockControls>\n\t\t\t\t<Animate type={ isBlobURL( href ) ? 'loading' : null }>\n\t\t\t\t\t{ ( { className: animateClassName } ) => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t\tclasses,\n\t\t\t\t\t\t\t\tanimateClassName\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className={ 'wp-block-file__content-wrapper' }>\n\t\t\t\t\t\t\t\t<div className=\"wp-block-file__textlink\">\n\t\t\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\t\t\ttagName=\"div\" // must be block-level or else cursor disappears\n\t\t\t\t\t\t\t\t\t\tvalue={ fileName }\n\t\t\t\t\t\t\t\t\t\tplaceholder={ __( 'Write file name…' ) }\n\t\t\t\t\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\t\t\t\t\tonChange={ ( text ) =>\n\t\t\t\t\t\t\t\t\t\t\tsetAttributes( { fileName: text } )\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{ showDownloadButton && (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t'wp-block-file__button-richtext-wrapper'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ /* Using RichText here instead of PlainText so that it can be styled like a button */ }\n\t\t\t\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\t\t\t\ttagName=\"div\" // must be block-level or else cursor disappears\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t'wp-block-file__button'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tvalue={ downloadButtonText }\n\t\t\t\t\t\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={ __( 'Add text…' ) }\n\t\t\t\t\t\t\t\t\t\t\tonChange={ ( text ) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\t\t\t\tdownloadButtonText: text,\n\t\t\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{ isSelected && (\n\t\t\t\t\t\t\t\t<ClipboardButton\n\t\t\t\t\t\t\t\t\tisSecondary\n\t\t\t\t\t\t\t\t\ttext={ href }\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t'wp-block-file__copy-url-button'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonCopy={ this.confirmCopyURL }\n\t\t\t\t\t\t\t\t\tonFinishCopy={ this.resetCopyConfirmation }\n\t\t\t\t\t\t\t\t\tdisabled={ isBlobURL( href ) }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ showCopyConfirmation\n\t\t\t\t\t\t\t\t\t\t? __( 'Copied!' )\n\t\t\t\t\t\t\t\t\t\t: __( 'Copy URL' ) }\n\t\t\t\t\t\t\t\t</ClipboardButton>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t</Animate>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select, props ) => {\n\t\tconst { getMedia } = select( 'core' );\n\t\tconst { getSettings } = select( 'core/block-editor' );\n\t\tconst { mediaUpload } = getSettings();\n\t\tconst { id } = props.attributes;\n\t\treturn {\n\t\t\tmedia: id === undefined ? undefined : getMedia( id ),\n\t\t\tmediaUpload,\n\t\t};\n\t} ),\n\twithNotices,\n] )( FileEdit );\n"]}
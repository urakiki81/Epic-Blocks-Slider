{"version":3,"sources":["@wordpress/block-library/src/block/edit-panel/index.js"],"names":["Button","useInstanceId","usePrevious","useEffect","useRef","__","ESCAPE","ReusableBlockEditPanel","isEditDisabled","isEditing","isSaving","onCancel","onChangeTitle","onEdit","onSave","title","instanceId","titleField","editButton","wasEditing","wasSaving","current","select","focus","handleFormSubmit","event","preventDefault","handleTitleChange","target","value","handleTitleKeyDown","keyCode","stopPropagation"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { useInstanceId, usePrevious } from '@wordpress/compose';\nimport { useEffect, useRef } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { ESCAPE } from '@wordpress/keycodes';\n\n/** @typedef {import('@wordpress/element').WPComponent} WPComponent */\n\n/**\n * ReusableBlockEditPanel props.\n *\n * @typedef WPReusableBlockEditPanelProps\n *\n * @property {boolean}                 isEditDisabled Is editing the reusable\n *                                                    block disabled.\n * @property {boolean}                 isEditing      Is the reusable block\n *                                                    being edited.\n * @property {boolean}                 isSaving       Is the reusable block\n *                                                    being saved.\n * @property {()=>void}                onCancel       Callback to run when\n *                                                    editing is canceled.\n * @property {(newTitle:string)=>void} onChangeTitle  Callback to run when the\n *                                                    title input value is\n *                                                    changed.\n * @property {()=>void}                onEdit         Callback to run when\n *                                                    editing begins.\n * @property {()=>void}                onSave         Callback to run when\n *                                                    saving.\n * @property {string}                  title          Title of the reusable\n *                                                    block.\n */\n\n/**\n * Panel for enabling the editing and saving of a reusable block.\n *\n * @param {WPReusableBlockEditPanelProps} props Component props.\n *\n * @return {WPComponent} The panel.\n */\nexport default function ReusableBlockEditPanel( {\n\tisEditDisabled,\n\tisEditing,\n\tisSaving,\n\tonCancel,\n\tonChangeTitle,\n\tonEdit,\n\tonSave,\n\ttitle,\n} ) {\n\tconst instanceId = useInstanceId( ReusableBlockEditPanel );\n\tconst titleField = useRef();\n\tconst editButton = useRef();\n\tconst wasEditing = usePrevious( isEditing );\n\tconst wasSaving = usePrevious( isSaving );\n\n\t// Select the title input when the form opens.\n\tuseEffect( () => {\n\t\tif ( ! wasEditing && isEditing ) {\n\t\t\ttitleField.current.select();\n\t\t}\n\t}, [ isEditing ] );\n\n\t// Move focus back to the Edit button after pressing the Escape key or Save.\n\tuseEffect( () => {\n\t\tif ( ( wasEditing || wasSaving ) && ! isEditing && ! isSaving ) {\n\t\t\teditButton.current.focus();\n\t\t}\n\t}, [ isEditing, isSaving ] );\n\n\tfunction handleFormSubmit( event ) {\n\t\tevent.preventDefault();\n\t\tonSave();\n\t}\n\n\tfunction handleTitleChange( event ) {\n\t\tonChangeTitle( event.target.value );\n\t}\n\n\tfunction handleTitleKeyDown( event ) {\n\t\tif ( event.keyCode === ESCAPE ) {\n\t\t\tevent.stopPropagation();\n\t\t\tonCancel();\n\t\t}\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{ ! isEditing && ! isSaving && (\n\t\t\t\t<div className=\"reusable-block-edit-panel\">\n\t\t\t\t\t<b className=\"reusable-block-edit-panel__info\">{ title }</b>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tref={ editButton }\n\t\t\t\t\t\tisSecondary\n\t\t\t\t\t\tclassName=\"reusable-block-edit-panel__button\"\n\t\t\t\t\t\tdisabled={ isEditDisabled }\n\t\t\t\t\t\tonClick={ onEdit }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Edit' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t{ ( isEditing || isSaving ) && (\n\t\t\t\t<form\n\t\t\t\t\tclassName=\"reusable-block-edit-panel\"\n\t\t\t\t\tonSubmit={ handleFormSubmit }\n\t\t\t\t>\n\t\t\t\t\t<label\n\t\t\t\t\t\thtmlFor={ `reusable-block-edit-panel__title-${ instanceId }` }\n\t\t\t\t\t\tclassName=\"reusable-block-edit-panel__label\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Name:' ) }\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tref={ titleField }\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tdisabled={ isSaving }\n\t\t\t\t\t\tclassName=\"reusable-block-edit-panel__title\"\n\t\t\t\t\t\tvalue={ title }\n\t\t\t\t\t\tonChange={ handleTitleChange }\n\t\t\t\t\t\tonKeyDown={ handleTitleKeyDown }\n\t\t\t\t\t\tid={ `reusable-block-edit-panel__title-${ instanceId }` }\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tisSecondary\n\t\t\t\t\t\tisBusy={ isSaving }\n\t\t\t\t\t\tdisabled={ ! title || isSaving }\n\t\t\t\t\t\tclassName=\"reusable-block-edit-panel__button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Save' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</form>\n\t\t\t) }\n\t\t</>\n\t);\n}\n"]}
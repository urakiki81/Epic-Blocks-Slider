{"version":3,"sources":["@wordpress/block-library/src/latest-posts/edit.js"],"names":["get","includes","invoke","isUndefined","pickBy","classnames","Component","RawHTML","BaseControl","PanelBody","Placeholder","QueryControls","RadioControl","RangeControl","Spinner","ToggleControl","ToolbarGroup","apiFetch","addQueryArgs","__","sprintf","dateI18n","format","__experimentalGetSettings","InspectorControls","BlockAlignmentToolbar","BlockControls","__experimentalImageSizeControl","ImageSizeControl","withSelect","pin","list","grid","MIN_EXCERPT_LENGTH","MAX_EXCERPT_LENGTH","MAX_POSTS_COLUMNS","CATEGORIES_LIST_QUERY","per_page","USERS_LIST_QUERY","LatestPostsEdit","arguments","state","categoriesList","authorList","isStillMounted","fetchRequest","path","then","setState","catch","props","attributes","setAttributes","imageSizeOptions","latestPosts","defaultImageWidth","defaultImageHeight","displayFeaturedImage","displayPostContentRadio","displayPostContent","displayPostDate","displayAuthor","postLayout","columns","order","orderBy","categories","selectedAuthor","postsToShow","excerptLength","featuredImageAlign","featuredImageSizeSlug","featuredImageSizeWidth","featuredImageSizeHeight","addLinkToFeaturedImage","categorySuggestions","reduce","accumulator","category","name","selectCategories","tokens","hasNoSuggestion","some","token","allCategories","map","inspectorControls","value","label","newAttrs","hasOwnProperty","width","height","undefined","Number","hasPosts","Math","min","length","Array","isArray","displayPosts","slice","layoutControls","icon","title","onClick","isActive","dateFormat","formats","date","className","post","i","titleTrimmed","excerpt","rendered","currentAuthor","find","author","id","excerptElement","document","createElement","innerHTML","textContent","innerText","featuredImageInfo","imageSourceUrl","url","featuredImageAlt","alt","imageClasses","renderFeaturedImage","featuredImage","maxWidth","maxHeight","needsReadMore","trim","split","raw","postExcerpt","join","link","date_gmt","content","select","getEntityRecords","getMedia","getSettings","imageSizes","imageDimensions","catIds","cat","latestPostsQuery","orderby","posts","filter","slug","featured_media","image","alt_text"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { get, includes, invoke, isUndefined, pickBy } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Component, RawHTML } from '@wordpress/element';\nimport {\n\tBaseControl,\n\tPanelBody,\n\tPlaceholder,\n\tQueryControls,\n\tRadioControl,\n\tRangeControl,\n\tSpinner,\n\tToggleControl,\n\tToolbarGroup,\n} from '@wordpress/components';\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { dateI18n, format, __experimentalGetSettings } from '@wordpress/date';\nimport {\n\tInspectorControls,\n\tBlockAlignmentToolbar,\n\tBlockControls,\n\t__experimentalImageSizeControl as ImageSizeControl,\n} from '@wordpress/block-editor';\nimport { withSelect } from '@wordpress/data';\nimport { pin, list, grid } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport {\n\tMIN_EXCERPT_LENGTH,\n\tMAX_EXCERPT_LENGTH,\n\tMAX_POSTS_COLUMNS,\n} from './constants';\n\n/**\n * Module Constants\n */\nconst CATEGORIES_LIST_QUERY = {\n\tper_page: -1,\n};\nconst USERS_LIST_QUERY = {\n\tper_page: -1,\n};\n\nclass LatestPostsEdit extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.state = {\n\t\t\tcategoriesList: [],\n\t\t\tauthorList: [],\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.isStillMounted = true;\n\t\tthis.fetchRequest = apiFetch( {\n\t\t\tpath: addQueryArgs( `/wp/v2/categories`, CATEGORIES_LIST_QUERY ),\n\t\t} )\n\t\t\t.then( ( categoriesList ) => {\n\t\t\t\tif ( this.isStillMounted ) {\n\t\t\t\t\tthis.setState( { categoriesList } );\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.catch( () => {\n\t\t\t\tif ( this.isStillMounted ) {\n\t\t\t\t\tthis.setState( { categoriesList: [] } );\n\t\t\t\t}\n\t\t\t} );\n\t\tthis.fetchRequest = apiFetch( {\n\t\t\tpath: addQueryArgs( `/wp/v2/users`, USERS_LIST_QUERY ),\n\t\t} )\n\t\t\t.then( ( authorList ) => {\n\t\t\t\tif ( this.isStillMounted ) {\n\t\t\t\t\tthis.setState( { authorList } );\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.catch( () => {\n\t\t\t\tif ( this.isStillMounted ) {\n\t\t\t\t\tthis.setState( { authorList: [] } );\n\t\t\t\t}\n\t\t\t} );\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.isStillMounted = false;\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tattributes,\n\t\t\tsetAttributes,\n\t\t\timageSizeOptions,\n\t\t\tlatestPosts,\n\t\t\tdefaultImageWidth,\n\t\t\tdefaultImageHeight,\n\t\t} = this.props;\n\t\tconst { categoriesList, authorList } = this.state;\n\t\tconst {\n\t\t\tdisplayFeaturedImage,\n\t\t\tdisplayPostContentRadio,\n\t\t\tdisplayPostContent,\n\t\t\tdisplayPostDate,\n\t\t\tdisplayAuthor,\n\t\t\tpostLayout,\n\t\t\tcolumns,\n\t\t\torder,\n\t\t\torderBy,\n\t\t\tcategories,\n\t\t\tselectedAuthor,\n\t\t\tpostsToShow,\n\t\t\texcerptLength,\n\t\t\tfeaturedImageAlign,\n\t\t\tfeaturedImageSizeSlug,\n\t\t\tfeaturedImageSizeWidth,\n\t\t\tfeaturedImageSizeHeight,\n\t\t\taddLinkToFeaturedImage,\n\t\t} = attributes;\n\t\tconst categorySuggestions = categoriesList.reduce(\n\t\t\t( accumulator, category ) => ( {\n\t\t\t\t...accumulator,\n\t\t\t\t[ category.name ]: category,\n\t\t\t} ),\n\t\t\t{}\n\t\t);\n\t\tconst selectCategories = ( tokens ) => {\n\t\t\tconst hasNoSuggestion = tokens.some(\n\t\t\t\t( token ) =>\n\t\t\t\t\ttypeof token === 'string' && ! categorySuggestions[ token ]\n\t\t\t);\n\t\t\tif ( hasNoSuggestion ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Categories that are already will be objects, while new additions will be strings (the name).\n\t\t\t// allCategories nomalizes the array so that they are all objects.\n\t\t\tconst allCategories = tokens.map( ( token ) => {\n\t\t\t\treturn typeof token === 'string'\n\t\t\t\t\t? categorySuggestions[ token ]\n\t\t\t\t\t: token;\n\t\t\t} );\n\t\t\t// We do nothing if the category is not selected\n\t\t\t// from suggestions.\n\t\t\tif ( includes( allCategories, null ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tsetAttributes( { categories: allCategories } );\n\t\t};\n\n\t\tconst inspectorControls = (\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Post content settings' ) }>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Post content' ) }\n\t\t\t\t\t\tchecked={ displayPostContent }\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { displayPostContent: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t{ displayPostContent && (\n\t\t\t\t\t\t<RadioControl\n\t\t\t\t\t\t\tlabel={ __( 'Show:' ) }\n\t\t\t\t\t\t\tselected={ displayPostContentRadio }\n\t\t\t\t\t\t\toptions={ [\n\t\t\t\t\t\t\t\t{ label: __( 'Excerpt' ), value: 'excerpt' },\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: __( 'Full post' ),\n\t\t\t\t\t\t\t\t\tvalue: 'full_post',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\tdisplayPostContentRadio: value,\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ displayPostContent &&\n\t\t\t\t\t\tdisplayPostContentRadio === 'excerpt' && (\n\t\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\t\tlabel={ __( 'Max number of words in excerpt' ) }\n\t\t\t\t\t\t\t\tvalue={ excerptLength }\n\t\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\t\tsetAttributes( { excerptLength: value } )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmin={ MIN_EXCERPT_LENGTH }\n\t\t\t\t\t\t\t\tmax={ MAX_EXCERPT_LENGTH }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t</PanelBody>\n\n\t\t\t\t<PanelBody title={ __( 'Post meta settings' ) }>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Display author name' ) }\n\t\t\t\t\t\tchecked={ displayAuthor }\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { displayAuthor: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Display post date' ) }\n\t\t\t\t\t\tchecked={ displayPostDate }\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { displayPostDate: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\n\t\t\t\t<PanelBody title={ __( 'Featured image settings' ) }>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Display featured image' ) }\n\t\t\t\t\t\tchecked={ displayFeaturedImage }\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { displayFeaturedImage: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t{ displayFeaturedImage && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<ImageSizeControl\n\t\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\t\tconst newAttrs = {};\n\t\t\t\t\t\t\t\t\tif ( value.hasOwnProperty( 'width' ) ) {\n\t\t\t\t\t\t\t\t\t\tnewAttrs.featuredImageSizeWidth =\n\t\t\t\t\t\t\t\t\t\t\tvalue.width;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( value.hasOwnProperty( 'height' ) ) {\n\t\t\t\t\t\t\t\t\t\tnewAttrs.featuredImageSizeHeight =\n\t\t\t\t\t\t\t\t\t\t\tvalue.height;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsetAttributes( newAttrs );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tslug={ featuredImageSizeSlug }\n\t\t\t\t\t\t\t\twidth={ featuredImageSizeWidth }\n\t\t\t\t\t\t\t\theight={ featuredImageSizeHeight }\n\t\t\t\t\t\t\t\timageWidth={ defaultImageWidth }\n\t\t\t\t\t\t\t\timageHeight={ defaultImageHeight }\n\t\t\t\t\t\t\t\timageSizeOptions={ imageSizeOptions }\n\t\t\t\t\t\t\t\tonChangeImage={ ( value ) =>\n\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\tfeaturedImageSizeSlug: value,\n\t\t\t\t\t\t\t\t\t\tfeaturedImageSizeWidth: undefined,\n\t\t\t\t\t\t\t\t\t\tfeaturedImageSizeHeight: undefined,\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<BaseControl className=\"block-editor-image-alignment-control__row\">\n\t\t\t\t\t\t\t\t<BaseControl.VisualLabel>\n\t\t\t\t\t\t\t\t\t{ __( 'Image alignment' ) }\n\t\t\t\t\t\t\t\t</BaseControl.VisualLabel>\n\t\t\t\t\t\t\t\t<BlockAlignmentToolbar\n\t\t\t\t\t\t\t\t\tvalue={ featuredImageAlign }\n\t\t\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\t\tfeaturedImageAlign: value,\n\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcontrols={ [ 'left', 'center', 'right' ] }\n\t\t\t\t\t\t\t\t\tisCollapsed={ false }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BaseControl>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\tlabel={ __( 'Add link to featured image' ) }\n\t\t\t\t\t\t\t\tchecked={ addLinkToFeaturedImage }\n\t\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\taddLinkToFeaturedImage: value,\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) }\n\t\t\t\t</PanelBody>\n\n\t\t\t\t<PanelBody title={ __( 'Sorting and filtering' ) }>\n\t\t\t\t\t<QueryControls\n\t\t\t\t\t\t{ ...{ order, orderBy } }\n\t\t\t\t\t\tnumberOfItems={ postsToShow }\n\t\t\t\t\t\tonOrderChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { order: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonOrderByChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { orderBy: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonNumberOfItemsChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { postsToShow: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcategorySuggestions={ categorySuggestions }\n\t\t\t\t\t\tonCategoryChange={ selectCategories }\n\t\t\t\t\t\tselectedCategories={ categories }\n\t\t\t\t\t\tonAuthorChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\tselectedAuthor:\n\t\t\t\t\t\t\t\t\t'' !== value ? Number( value ) : undefined,\n\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tauthorList={ authorList }\n\t\t\t\t\t\tselectedAuthorId={ selectedAuthor }\n\t\t\t\t\t/>\n\n\t\t\t\t\t{ postLayout === 'grid' && (\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Columns' ) }\n\t\t\t\t\t\t\tvalue={ columns }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tsetAttributes( { columns: value } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmin={ 2 }\n\t\t\t\t\t\t\tmax={\n\t\t\t\t\t\t\t\t! hasPosts\n\t\t\t\t\t\t\t\t\t? MAX_POSTS_COLUMNS\n\t\t\t\t\t\t\t\t\t: Math.min(\n\t\t\t\t\t\t\t\t\t\t\tMAX_POSTS_COLUMNS,\n\t\t\t\t\t\t\t\t\t\t\tlatestPosts.length\n\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t);\n\n\t\tconst hasPosts = Array.isArray( latestPosts ) && latestPosts.length;\n\t\tif ( ! hasPosts ) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t{ inspectorControls }\n\t\t\t\t\t<Placeholder icon={ pin } label={ __( 'Latest Posts' ) }>\n\t\t\t\t\t\t{ ! Array.isArray( latestPosts ) ? (\n\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t__( 'No posts found.' )\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Placeholder>\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\n\t\t// Removing posts from display should be instant.\n\t\tconst displayPosts =\n\t\t\tlatestPosts.length > postsToShow\n\t\t\t\t? latestPosts.slice( 0, postsToShow )\n\t\t\t\t: latestPosts;\n\n\t\tconst layoutControls = [\n\t\t\t{\n\t\t\t\ticon: list,\n\t\t\t\ttitle: __( 'List view' ),\n\t\t\t\tonClick: () => setAttributes( { postLayout: 'list' } ),\n\t\t\t\tisActive: postLayout === 'list',\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: grid,\n\t\t\t\ttitle: __( 'Grid view' ),\n\t\t\t\tonClick: () => setAttributes( { postLayout: 'grid' } ),\n\t\t\t\tisActive: postLayout === 'grid',\n\t\t\t},\n\t\t];\n\n\t\tconst dateFormat = __experimentalGetSettings().formats.date;\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ inspectorControls }\n\t\t\t\t<BlockControls>\n\t\t\t\t\t<ToolbarGroup controls={ layoutControls } />\n\t\t\t\t</BlockControls>\n\t\t\t\t<ul\n\t\t\t\t\tclassName={ classnames( this.props.className, {\n\t\t\t\t\t\t'wp-block-latest-posts__list': true,\n\t\t\t\t\t\t'is-grid': postLayout === 'grid',\n\t\t\t\t\t\t'has-dates': displayPostDate,\n\t\t\t\t\t\t'has-author': displayAuthor,\n\t\t\t\t\t\t[ `columns-${ columns }` ]: postLayout === 'grid',\n\t\t\t\t\t} ) }\n\t\t\t\t>\n\t\t\t\t\t{ displayPosts.map( ( post, i ) => {\n\t\t\t\t\t\tconst titleTrimmed = invoke( post, [\n\t\t\t\t\t\t\t'title',\n\t\t\t\t\t\t\t'rendered',\n\t\t\t\t\t\t\t'trim',\n\t\t\t\t\t\t] );\n\t\t\t\t\t\tlet excerpt = post.excerpt.rendered;\n\t\t\t\t\t\tconst currentAuthor = authorList.find(\n\t\t\t\t\t\t\t( author ) => author.id === post.author\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tconst excerptElement = document.createElement( 'div' );\n\t\t\t\t\t\texcerptElement.innerHTML = excerpt;\n\n\t\t\t\t\t\texcerpt =\n\t\t\t\t\t\t\texcerptElement.textContent ||\n\t\t\t\t\t\t\texcerptElement.innerText ||\n\t\t\t\t\t\t\t'';\n\n\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\tfeaturedImageInfo: {\n\t\t\t\t\t\t\t\turl: imageSourceUrl,\n\t\t\t\t\t\t\t\talt: featuredImageAlt,\n\t\t\t\t\t\t\t} = {},\n\t\t\t\t\t\t} = post;\n\t\t\t\t\t\tconst imageClasses = classnames( {\n\t\t\t\t\t\t\t'wp-block-latest-posts__featured-image': true,\n\t\t\t\t\t\t\t[ `align${ featuredImageAlign }` ]: !! featuredImageAlign,\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tconst renderFeaturedImage =\n\t\t\t\t\t\t\tdisplayFeaturedImage && imageSourceUrl;\n\t\t\t\t\t\tconst featuredImage = renderFeaturedImage && (\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={ imageSourceUrl }\n\t\t\t\t\t\t\t\talt={ featuredImageAlt }\n\t\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\t\tmaxWidth: featuredImageSizeWidth,\n\t\t\t\t\t\t\t\t\tmaxHeight: featuredImageSizeHeight,\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tconst needsReadMore =\n\t\t\t\t\t\t\texcerptLength <\n\t\t\t\t\t\t\t\texcerpt.trim().split( ' ' ).length &&\n\t\t\t\t\t\t\tpost.excerpt.raw === '';\n\n\t\t\t\t\t\tconst postExcerpt = needsReadMore ? (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{ excerpt\n\t\t\t\t\t\t\t\t\t.trim()\n\t\t\t\t\t\t\t\t\t.split( ' ', excerptLength )\n\t\t\t\t\t\t\t\t\t.join( ' ' ) }\n\t\t\t\t\t\t\t\t{ /* translators: excerpt truncation character, default …  */ }\n\t\t\t\t\t\t\t\t{ __( ' … ' ) }\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={ post.link }\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ __( 'Read more' ) }\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\texcerpt\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<li key={ i }>\n\t\t\t\t\t\t\t\t{ renderFeaturedImage && (\n\t\t\t\t\t\t\t\t\t<div className={ imageClasses }>\n\t\t\t\t\t\t\t\t\t\t{ addLinkToFeaturedImage ? (\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref={ post.link }\n\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t\trel=\"noreferrer noopener\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ featuredImage }\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\tfeaturedImage\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={ post.link }\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\trel=\"noreferrer noopener\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ titleTrimmed ? (\n\t\t\t\t\t\t\t\t\t\t<RawHTML>{ titleTrimmed }</RawHTML>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t__( '(no title)' )\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t{ displayAuthor && currentAuthor && (\n\t\t\t\t\t\t\t\t\t<div className=\"wp-block-latest-posts__post-author\">\n\t\t\t\t\t\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t\t\t\t\t\t/* translators: byline. %s: current author. */\n\t\t\t\t\t\t\t\t\t\t\t__( 'by %s' ),\n\t\t\t\t\t\t\t\t\t\t\tcurrentAuthor.name\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t{ displayPostDate && post.date_gmt && (\n\t\t\t\t\t\t\t\t\t<time\n\t\t\t\t\t\t\t\t\t\tdateTime={ format(\n\t\t\t\t\t\t\t\t\t\t\t'c',\n\t\t\t\t\t\t\t\t\t\t\tpost.date_gmt\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\tclassName=\"wp-block-latest-posts__post-date\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ dateI18n(\n\t\t\t\t\t\t\t\t\t\t\tdateFormat,\n\t\t\t\t\t\t\t\t\t\t\tpost.date_gmt\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t</time>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t{ displayPostContent &&\n\t\t\t\t\t\t\t\t\tdisplayPostContentRadio === 'excerpt' && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"wp-block-latest-posts__post-excerpt\">\n\t\t\t\t\t\t\t\t\t\t\t{ postExcerpt }\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t{ displayPostContent &&\n\t\t\t\t\t\t\t\t\tdisplayPostContentRadio === 'full_post' && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"wp-block-latest-posts__post-full-content\">\n\t\t\t\t\t\t\t\t\t\t\t<RawHTML key=\"html\">\n\t\t\t\t\t\t\t\t\t\t\t\t{ post.content.raw.trim() }\n\t\t\t\t\t\t\t\t\t\t\t</RawHTML>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t);\n\t\t\t\t\t} ) }\n\t\t\t\t</ul>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default withSelect( ( select, props ) => {\n\tconst {\n\t\tfeaturedImageSizeSlug,\n\t\tpostsToShow,\n\t\torder,\n\t\torderBy,\n\t\tcategories,\n\t\tselectedAuthor,\n\t} = props.attributes;\n\tconst { getEntityRecords, getMedia } = select( 'core' );\n\tconst { getSettings } = select( 'core/block-editor' );\n\tconst { imageSizes, imageDimensions } = getSettings();\n\tconst catIds =\n\t\tcategories && categories.length > 0\n\t\t\t? categories.map( ( cat ) => cat.id )\n\t\t\t: [];\n\tconst latestPostsQuery = pickBy(\n\t\t{\n\t\t\tcategories: catIds,\n\t\t\tauthor: selectedAuthor,\n\t\t\torder,\n\t\t\torderby: orderBy,\n\t\t\tper_page: postsToShow,\n\t\t},\n\t\t( value ) => ! isUndefined( value )\n\t);\n\n\tconst posts = getEntityRecords( 'postType', 'post', latestPostsQuery );\n\tconst imageSizeOptions = imageSizes\n\t\t.filter( ( { slug } ) => slug !== 'full' )\n\t\t.map( ( { name, slug } ) => ( { value: slug, label: name } ) );\n\n\treturn {\n\t\tdefaultImageWidth: get(\n\t\t\timageDimensions,\n\t\t\t[ featuredImageSizeSlug, 'width' ],\n\t\t\t0\n\t\t),\n\t\tdefaultImageHeight: get(\n\t\t\timageDimensions,\n\t\t\t[ featuredImageSizeSlug, 'height' ],\n\t\t\t0\n\t\t),\n\t\timageSizeOptions,\n\t\tlatestPosts: ! Array.isArray( posts )\n\t\t\t? posts\n\t\t\t: posts.map( ( post ) => {\n\t\t\t\t\tif ( ! post.featured_media ) return post;\n\n\t\t\t\t\tconst image = getMedia( post.featured_media );\n\t\t\t\t\tlet url = get(\n\t\t\t\t\t\timage,\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t'media_details',\n\t\t\t\t\t\t\t'sizes',\n\t\t\t\t\t\t\tfeaturedImageSizeSlug,\n\t\t\t\t\t\t\t'source_url',\n\t\t\t\t\t\t],\n\t\t\t\t\t\tnull\n\t\t\t\t\t);\n\t\t\t\t\tif ( ! url ) {\n\t\t\t\t\t\turl = get( image, 'source_url', null );\n\t\t\t\t\t}\n\t\t\t\t\tconst featuredImageInfo = {\n\t\t\t\t\t\turl,\n\t\t\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\t\t\talt: image?.alt_text,\n\t\t\t\t\t};\n\t\t\t\t\treturn { ...post, featuredImageInfo };\n\t\t\t  } ),\n\t};\n} )( LatestPostsEdit );\n"]}
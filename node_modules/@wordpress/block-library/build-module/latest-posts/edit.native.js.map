{"version":3,"sources":["@wordpress/block-library/src/latest-posts/edit.native.js"],"names":["TouchableWithoutFeedback","View","Text","isEmpty","Component","compose","withPreferredColorScheme","withDispatch","coreBlocks","__","postList","icon","InspectorControls","apiFetch","Icon","PanelBody","ToggleControl","RangeControl","QueryControls","styles","MIN_EXCERPT_LENGTH","MAX_EXCERPT_LENGTH","LatestPostsEdit","arguments","state","categoriesList","onSetDisplayPostContent","bind","onSetDisplayPostContentRadio","onSetExcerptLength","onSetDisplayPostDate","onSetOrder","onSetOrderBy","onSetPostsToShow","onSetCategories","getInspectorControls","isStillMounted","fetchRequest","path","then","setState","catch","value","setAttributes","props","displayPostContent","displayPostContentRadio","excerptLength","displayPostDate","order","orderBy","postsToShow","categories","toString","undefined","attributes","displayExcerptPostContent","Number","__DEV__","getStylesFromColorScheme","name","openGeneralSidebar","isSelected","blockType","blockStyle","latestPostBlock","latestPostBlockDark","iconStyle","latestPostBlockIcon","latestPostBlockIconDark","titleStyle","latestPostBlockMessage","latestPostBlockMessageDark","settings","title","latestPostBlockSubtitle","dispatch"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { TouchableWithoutFeedback, View, Text } from 'react-native';\nimport { isEmpty } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { compose, withPreferredColorScheme } from '@wordpress/compose';\nimport { withDispatch } from '@wordpress/data';\nimport { coreBlocks } from '@wordpress/block-library';\nimport { __ } from '@wordpress/i18n';\nimport { postList as icon } from '@wordpress/icons';\nimport { InspectorControls } from '@wordpress/block-editor';\nimport apiFetch from '@wordpress/api-fetch';\nimport {\n\tIcon,\n\tPanelBody,\n\tToggleControl,\n\tRangeControl,\n\tQueryControls,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\nimport { MIN_EXCERPT_LENGTH, MAX_EXCERPT_LENGTH } from './constants';\n\nclass LatestPostsEdit extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.state = {\n\t\t\tcategoriesList: [],\n\t\t};\n\t\tthis.onSetDisplayPostContent = this.onSetDisplayPostContent.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.onSetDisplayPostContentRadio = this.onSetDisplayPostContentRadio.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.onSetExcerptLength = this.onSetExcerptLength.bind( this );\n\t\tthis.onSetDisplayPostDate = this.onSetDisplayPostDate.bind( this );\n\t\tthis.onSetOrder = this.onSetOrder.bind( this );\n\t\tthis.onSetOrderBy = this.onSetOrderBy.bind( this );\n\t\tthis.onSetPostsToShow = this.onSetPostsToShow.bind( this );\n\t\tthis.onSetCategories = this.onSetCategories.bind( this );\n\t\tthis.getInspectorControls = this.getInspectorControls.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.isStillMounted = true;\n\t\tthis.fetchRequest = apiFetch( { path: '/wp/v2/categories' } )\n\t\t\t.then( ( categoriesList ) => {\n\t\t\t\tif ( this.isStillMounted ) {\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tcategoriesList: isEmpty( categoriesList )\n\t\t\t\t\t\t\t? []\n\t\t\t\t\t\t\t: categoriesList,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.catch( () => {\n\t\t\t\tif ( this.isStillMounted ) {\n\t\t\t\t\tthis.setState( { categoriesList: [] } );\n\t\t\t\t}\n\t\t\t} );\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.isStillMounted = false;\n\t}\n\n\tonSetDisplayPostContent( value ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { displayPostContent: value } );\n\t}\n\n\tonSetDisplayPostContentRadio( value ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( {\n\t\t\tdisplayPostContentRadio: value ? 'excerpt' : 'full_post',\n\t\t} );\n\t}\n\n\tonSetExcerptLength( value ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { excerptLength: value } );\n\t}\n\n\tonSetDisplayPostDate( value ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { displayPostDate: value } );\n\t}\n\n\tonSetOrder( value ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { order: value } );\n\t}\n\n\tonSetOrderBy( value ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { orderBy: value } );\n\t}\n\n\tonSetPostsToShow( value ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { postsToShow: value } );\n\t}\n\n\tonSetCategories( value ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( {\n\t\t\tcategories: '' !== value ? value.toString() : undefined,\n\t\t} );\n\t}\n\n\tgetInspectorControls() {\n\t\tconst { attributes } = this.props;\n\t\tconst {\n\t\t\tdisplayPostContent,\n\t\t\tdisplayPostContentRadio,\n\t\t\texcerptLength,\n\t\t\tdisplayPostDate,\n\t\t\torder,\n\t\t\torderBy,\n\t\t\tpostsToShow,\n\t\t\tcategories,\n\t\t} = attributes;\n\n\t\tconst { categoriesList } = this.state;\n\t\tconst displayExcerptPostContent = displayPostContentRadio === 'excerpt';\n\n\t\treturn (\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Post content settings' ) }>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Show post content' ) }\n\t\t\t\t\t\tchecked={ displayPostContent }\n\t\t\t\t\t\tonChange={ this.onSetDisplayPostContent }\n\t\t\t\t\t/>\n\t\t\t\t\t{ displayPostContent && (\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={ __( 'Only show excerpt' ) }\n\t\t\t\t\t\t\tchecked={ displayExcerptPostContent }\n\t\t\t\t\t\t\tonChange={ this.onSetDisplayPostContentRadio }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ displayPostContent && displayExcerptPostContent && (\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Excerpt length (words)' ) }\n\t\t\t\t\t\t\tvalue={ excerptLength }\n\t\t\t\t\t\t\tonChange={ this.onSetExcerptLength }\n\t\t\t\t\t\t\tmin={ MIN_EXCERPT_LENGTH }\n\t\t\t\t\t\t\tmax={ MAX_EXCERPT_LENGTH }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</PanelBody>\n\n\t\t\t\t<PanelBody title={ __( 'Post meta settings' ) }>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Display post date' ) }\n\t\t\t\t\t\tchecked={ displayPostDate }\n\t\t\t\t\t\tonChange={ this.onSetDisplayPostDate }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t\t<PanelBody title={ __( 'Sorting and filtering' ) }>\n\t\t\t\t\t<QueryControls\n\t\t\t\t\t\t{ ...{ order, orderBy } }\n\t\t\t\t\t\tnumberOfItems={ postsToShow }\n\t\t\t\t\t\tcategoriesList={ categoriesList }\n\t\t\t\t\t\tselectedCategoryId={\n\t\t\t\t\t\t\tundefined !== categories ? Number( categories ) : ''\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonOrderChange={ this.onSetOrder }\n\t\t\t\t\t\tonOrderByChange={ this.onSetOrderBy }\n\t\t\t\t\t\tonCategoryChange={\n\t\t\t\t\t\t\t// eslint-disable-next-line no-undef\n\t\t\t\t\t\t\t__DEV__ ? this.onSetCategories : undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonNumberOfItemsChange={ this.onSetPostsToShow }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tgetStylesFromColorScheme,\n\t\t\tname,\n\t\t\topenGeneralSidebar,\n\t\t\tisSelected,\n\t\t} = this.props;\n\n\t\tconst blockType = coreBlocks[ name ];\n\n\t\tconst blockStyle = getStylesFromColorScheme(\n\t\t\tstyles.latestPostBlock,\n\t\t\tstyles.latestPostBlockDark\n\t\t);\n\n\t\tconst iconStyle = getStylesFromColorScheme(\n\t\t\tstyles.latestPostBlockIcon,\n\t\t\tstyles.latestPostBlockIconDark\n\t\t);\n\n\t\tconst titleStyle = getStylesFromColorScheme(\n\t\t\tstyles.latestPostBlockMessage,\n\t\t\tstyles.latestPostBlockMessageDark\n\t\t);\n\n\t\treturn (\n\t\t\t<TouchableWithoutFeedback\n\t\t\t\taccessible={ ! isSelected }\n\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\tonPress={ openGeneralSidebar }\n\t\t\t>\n\t\t\t\t<View style={ blockStyle }>\n\t\t\t\t\t{ this.getInspectorControls() }\n\t\t\t\t\t<Icon icon={ icon } { ...iconStyle } />\n\t\t\t\t\t<Text style={ titleStyle }>\n\t\t\t\t\t\t{ blockType.settings.title }\n\t\t\t\t\t</Text>\n\t\t\t\t\t<Text style={ styles.latestPostBlockSubtitle }>\n\t\t\t\t\t\t{ __( 'CUSTOMIZE' ) }\n\t\t\t\t\t</Text>\n\t\t\t\t</View>\n\t\t\t</TouchableWithoutFeedback>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithDispatch( ( dispatch ) => {\n\t\tconst { openGeneralSidebar } = dispatch( 'core/edit-post' );\n\n\t\treturn {\n\t\t\topenGeneralSidebar: () => openGeneralSidebar( 'edit-post/block' ),\n\t\t};\n\t} ),\n\twithPreferredColorScheme,\n] )( LatestPostsEdit );\n"]}
{"version":3,"sources":["@wordpress/block-library/src/social-link/edit.native.js"],"names":["View","Animated","Easing","TouchableWithoutFeedback","BlockControls","useEffect","useState","useRef","ToolbarGroup","ToolbarButton","LinkSettings","compose","usePreferredColorSchemeStyle","__","sprintf","link","Icon","withSelect","getIconBySite","getNameBySite","styles","ANIMATION_DELAY","ANIMATION_DURATION","linkSettingsOptions","url","label","placeholder","autoFocus","linkLabel","footer","SocialLinkEdit","attributes","setAttributes","isSelected","onFocus","name","service","isLinkSheetVisible","setIsLinkSheetVisible","hasUrl","setHasUrl","activeIcon","inactiveIcon","inactiveIconDark","animatedValue","Value","current","IconComponent","socialLinkName","setValue","animateColors","interpolationColors","backgroundColor","interpolate","inputRange","outputRange","color","stroke","sequence","delay","timing","toValue","duration","easing","circle","start","onCloseSettingsSheet","onOpenSettingsSheet","onEmptyURL","onIconPress","accessibilityHint","iconContainer","select","clientId","getBlock","block","substring"],"mappings":";;;AAAA;;;AAGA,SAASA,IAAT,EAAeC,QAAf,EAAyBC,MAAzB,EAAiCC,wBAAjC,QAAiE,cAAjE;AAEA;;;;AAGA,SAASC,aAAT,QAA8B,yBAA9B;AACA,SAASC,SAAT,EAAoBC,QAApB,EAA8BC,MAA9B,QAA4C,oBAA5C;AACA,SACCC,YADD,EAECC,aAFD,EAGCC,YAHD,QAIO,uBAJP;AAKA,SAASC,OAAT,EAAkBC,4BAAlB,QAAsD,oBAAtD;AACA,SAASC,EAAT,EAAaC,OAAb,QAA4B,iBAA5B;AACA,SAASC,IAAT,EAAeC,IAAf,QAA2B,kBAA3B;AACA,SAASC,UAAT,QAA2B,iBAA3B;AACA;;;;AAGA,SAASC,aAAT,EAAwBC,aAAxB,QAA6C,eAA7C;AACA,OAAOC,MAAP,MAAmB,eAAnB;AAEA,IAAMC,eAAe,GAAG,GAAxB;AACA,IAAMC,kBAAkB,GAAG,GAA3B;AAEA,IAAMC,mBAAmB,GAAG;AAC3BC,EAAAA,GAAG,EAAE;AACJC,IAAAA,KAAK,EAAEZ,EAAE,CAAE,KAAF,CADL;AAEJa,IAAAA,WAAW,EAAEb,EAAE,CAAE,SAAF,CAFX;AAGJc,IAAAA,SAAS,EAAE;AAHP,GADsB;AAM3BC,EAAAA,SAAS,EAAE;AACVH,IAAAA,KAAK,EAAEZ,EAAE,CAAE,YAAF,CADC;AAEVa,IAAAA,WAAW,EAAEb,EAAE,CAAE,MAAF;AAFL,GANgB;AAU3BgB,EAAAA,MAAM,EAAE;AACPJ,IAAAA,KAAK,EAAEZ,EAAE,CAAE,sDAAF;AADF;AAVmB,CAA5B;;AAeA,IAAMiB,cAAc,GAAG,SAAjBA,cAAiB,OAMhB;AAAA,MALNC,UAKM,QALNA,UAKM;AAAA,MAJNC,aAIM,QAJNA,aAIM;AAAA,MAHNC,UAGM,QAHNA,UAGM;AAAA,MAFNC,OAEM,QAFNA,OAEM;AAAA,MADNC,IACM,QADNA,IACM;AAAA,MACEX,GADF,GAC0BO,UAD1B,CACEP,GADF;AAAA,4BAC0BO,UAD1B,CACOK,OADP;AAAA,MACOA,OADP,oCACiBD,IADjB;;AAAA,kBAEgD7B,QAAQ,CAAE,KAAF,CAFxD;AAAA;AAAA,MAEE+B,kBAFF;AAAA,MAEsBC,qBAFtB;;AAAA,mBAGwBhC,QAAQ,CAAE,CAAC,CAAEkB,GAAL,CAHhC;AAAA;AAAA,MAGEe,MAHF;AAAA,MAGUC,SAHV;;AAKN,MAAMC,UAAU,GACfrB,MAAM,0BAAqBgB,OAArB,EAAN,IAA2ChB,MAAM,kBADlD;AAGA,MAAMsB,YAAY,GAAG9B,4BAA4B,CAChDQ,MAAM,CAACsB,YADyC,EAEhDtB,MAAM,CAACuB,gBAFyC,CAAjD;AAKA,MAAMC,aAAa,GAAGrC,MAAM,CAAE,IAAIN,QAAQ,CAAC4C,KAAb,CAAoB,CAApB,CAAF,CAAN,CAAkCC,OAAxD;AAEA,MAAMC,aAAa,GAAG7B,aAAa,CAAEkB,OAAF,CAAb,EAAtB;AACA,MAAMY,cAAc,GAAG7B,aAAa,CAAEiB,OAAF,CAApC,CAhBM,CAkBN;;AACA/B,EAAAA,SAAS,CAAE,YAAM;AAChB,QAAK4B,UAAU,IAAI,CAAET,GAArB,EAA2B;AAC1Bc,MAAAA,qBAAqB,CAAE,IAAF,CAArB;AACA;AACD,GAJQ,EAIN,EAJM,CAAT;AAMAjC,EAAAA,SAAS,CAAE,YAAM;AAChB,QAAK,CAAEmB,GAAP,EAAa;AACZgB,MAAAA,SAAS,CAAE,KAAF,CAAT;AACAI,MAAAA,aAAa,CAACK,QAAd,CAAwB,CAAxB;AACA,KAHD,MAGO,IAAKzB,GAAL,EAAW;AACjB0B,MAAAA,aAAa;AACb;AACD,GAPQ,EAON,CAAE1B,GAAF,CAPM,CAAT;AASA,MAAM2B,mBAAmB,GAAG;AAC3BC,IAAAA,eAAe,EAAER,aAAa,CAACS,WAAd,CAA2B;AAC3CC,MAAAA,UAAU,EAAE,CAAE,CAAF,EAAK,CAAL,CAD+B;AAE3CC,MAAAA,WAAW,EAAE,CACZb,YAAY,CAACU,eADD,EAEZX,UAAU,CAACW,eAFC;AAF8B,KAA3B,CADU;AAQ3BI,IAAAA,KAAK,EAAEZ,aAAa,CAACS,WAAd,CAA2B;AACjCC,MAAAA,UAAU,EAAE,CAAE,CAAF,EAAK,CAAL,CADqB;AAEjCC,MAAAA,WAAW,EAAE,CAAEb,YAAY,CAACc,KAAf,EAAsBf,UAAU,CAACe,KAAjC;AAFoB,KAA3B,CARoB;AAY3BC,IAAAA,MAAM,EAAE;AAZmB,GAA5B;;AAlCM,cAiDqClB,MAAM,GAC9CE,UAD8C,GAE9CU,mBAnDG;AAAA,MAiDEC,eAjDF,SAiDEA,eAjDF;AAAA,MAiDmBI,KAjDnB,SAiDmBA,KAjDnB;AAAA,MAiD0BC,MAjD1B,SAiD0BA,MAjD1B;;AAqDN,WAASP,aAAT,GAAyB;AACxBjD,IAAAA,QAAQ,CAACyD,QAAT,CAAmB,CAClBzD,QAAQ,CAAC0D,KAAT,CAAgBtC,eAAhB,CADkB,EAElBpB,QAAQ,CAAC2D,MAAT,CAAiBhB,aAAjB,EAAgC;AAC/BiB,MAAAA,OAAO,EAAE,CADsB;AAE/BC,MAAAA,QAAQ,EAAExC,kBAFqB;AAG/ByC,MAAAA,MAAM,EAAE7D,MAAM,CAAC8D;AAHgB,KAAhC,CAFkB,CAAnB,EAOIC,KAPJ,CAOW;AAAA,aAAMzB,SAAS,CAAE,IAAF,CAAf;AAAA,KAPX;AAQA;;AAED,WAAS0B,oBAAT,GAAgC;AAC/B5B,IAAAA,qBAAqB,CAAE,KAAF,CAArB;AACA;;AAED,WAAS6B,mBAAT,GAA+B;AAC9B7B,IAAAA,qBAAqB,CAAE,IAAF,CAArB;AACA;;AAED,WAAS8B,UAAT,GAAsB;AACrBxB,IAAAA,aAAa,CAACK,QAAd,CAAwB,CAAxB;AACAT,IAAAA,SAAS,CAAE,KAAF,CAAT;AACA;;AAED,WAAS6B,WAAT,GAAuB;AACtB,QAAKpC,UAAL,EAAkB;AACjBK,MAAAA,qBAAqB,CAAE,IAAF,CAArB;AACA,KAFD,MAEO;AACNJ,MAAAA,OAAO;AACP;AACD;;AAED,MAAMoC,iBAAiB,GAAG9C,GAAG,GAC1BV,OAAO,EACP;AACAD,EAAAA,EAAE,CAAE,gBAAF,CAFK,EAGPmC,cAHO,CADmB,GAM1BlC,OAAO,EACP;AACAD,EAAAA,EAAE,CAAE,mBAAF,CAFK,EAGPmC,cAHO,CANV;AAYA,SACC,cAAC,IAAD,QACGf,UAAU,IACX,cAAC,aAAD,QACC,cAAC,YAAD,QACC,cAAC,aAAD;AACC,IAAA,KAAK,EAAGnB,OAAO,EACd;AACAD,IAAAA,EAAE,CAAE,gBAAF,CAFY,EAGdmC,cAHc,CADhB;AAMC,IAAA,IAAI,EAAGjC,IANR;AAOC,IAAA,OAAO,EAAGoD,mBAPX;AAQC,IAAA,QAAQ,EAAG3C;AARZ,IADD,CADD,CAFF,EAiBC,cAAC,YAAD;AACC,IAAA,SAAS,EAAGa,kBADb;AAEC,IAAA,UAAU,EAAGN,UAFd;AAGC,IAAA,UAAU,EAAGqC,UAHd;AAIC,IAAA,OAAO,EAAGF,oBAJX;AAKC,IAAA,aAAa,EAAGlC,aALjB;AAMC,IAAA,OAAO,EAAGT,mBANX;AAOC,IAAA,eAAe,EAAG;AAPnB,IAjBD,EA0BC,cAAC,wBAAD;AACC,IAAA,OAAO,EAAG8C,WADX;AAEC,IAAA,iBAAiB,EAAG,QAFrB;AAGC,IAAA,kBAAkB,EAAGvD,OAAO,EAC3B;AACAD,IAAAA,EAAE,CAAE,gBAAF,CAFyB,EAG3BmC,cAH2B,CAH7B;AAQC,IAAA,iBAAiB,EAAGsB;AARrB,KAUC,cAAC,QAAD,CAAU,IAAV;AACC,IAAA,KAAK,EAAG,CAAElD,MAAM,CAACmD,aAAT,EAAwB;AAAEnB,MAAAA,eAAe,EAAfA;AAAF,KAAxB;AADT,KAGC,cAAC,IAAD;AACC,IAAA,QAAQ,MADT;AAEC,IAAA,IAAI,EAAGL,aAFR;AAGC,IAAA,KAAK,EAAG;AAAEU,MAAAA,MAAM,EAANA,MAAF;AAAUD,MAAAA,KAAK,EAALA;AAAV;AAHT,IAHD,CAVD,CA1BD,CADD;AAiDA,CAxJD;;AA0JA,eAAe7C,OAAO,CAAE,CACvBM,UAAU,CAAE,UAAEuD,MAAF,SAA4B;AAAA,MAAhBC,QAAgB,SAAhBA,QAAgB;;AAAA,gBAClBD,MAAM,CAAE,mBAAF,CADY;AAAA,MAC/BE,QAD+B,WAC/BA,QAD+B;;AAGvC,MAAMC,KAAK,GAAGD,QAAQ,CAAED,QAAF,CAAtB;AACA,MAAMtC,IAAI,GAAGwC,KAAH,aAAGA,KAAH,uBAAGA,KAAK,CAAExC,IAAP,CAAYyC,SAAZ,CAAuB,EAAvB,CAAb;AAEA,SAAO;AACNzC,IAAAA,IAAI,EAAJA;AADM,GAAP;AAGA,CATS,CADa,CAAF,CAAP,CAWVL,cAXU,CAAf","sourcesContent":["/**\n * External dependencies\n */\nimport { View, Animated, Easing, TouchableWithoutFeedback } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { BlockControls } from '@wordpress/block-editor';\nimport { useEffect, useState, useRef } from '@wordpress/element';\nimport {\n\tToolbarGroup,\n\tToolbarButton,\n\tLinkSettings,\n} from '@wordpress/components';\nimport { compose, usePreferredColorSchemeStyle } from '@wordpress/compose';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { link, Icon } from '@wordpress/icons';\nimport { withSelect } from '@wordpress/data';\n/**\n * Internal dependencies\n */\nimport { getIconBySite, getNameBySite } from './social-list';\nimport styles from './editor.scss';\n\nconst ANIMATION_DELAY = 300;\nconst ANIMATION_DURATION = 400;\n\nconst linkSettingsOptions = {\n\turl: {\n\t\tlabel: __( 'URL' ),\n\t\tplaceholder: __( 'Add URL' ),\n\t\tautoFocus: true,\n\t},\n\tlinkLabel: {\n\t\tlabel: __( 'Link label' ),\n\t\tplaceholder: __( 'None' ),\n\t},\n\tfooter: {\n\t\tlabel: __( 'Briefly describe the link to help screen reader user' ),\n\t},\n};\n\nconst SocialLinkEdit = ( {\n\tattributes,\n\tsetAttributes,\n\tisSelected,\n\tonFocus,\n\tname,\n} ) => {\n\tconst { url, service = name } = attributes;\n\tconst [ isLinkSheetVisible, setIsLinkSheetVisible ] = useState( false );\n\tconst [ hasUrl, setHasUrl ] = useState( !! url );\n\n\tconst activeIcon =\n\t\tstyles[ `wp-social-link-${ service }` ] || styles[ `wp-social-link` ];\n\n\tconst inactiveIcon = usePreferredColorSchemeStyle(\n\t\tstyles.inactiveIcon,\n\t\tstyles.inactiveIconDark\n\t);\n\n\tconst animatedValue = useRef( new Animated.Value( 0 ) ).current;\n\n\tconst IconComponent = getIconBySite( service )();\n\tconst socialLinkName = getNameBySite( service );\n\n\t// When new social icon is added link sheet is opened automatically\n\tuseEffect( () => {\n\t\tif ( isSelected && ! url ) {\n\t\t\tsetIsLinkSheetVisible( true );\n\t\t}\n\t}, [] );\n\n\tuseEffect( () => {\n\t\tif ( ! url ) {\n\t\t\tsetHasUrl( false );\n\t\t\tanimatedValue.setValue( 0 );\n\t\t} else if ( url ) {\n\t\t\tanimateColors();\n\t\t}\n\t}, [ url ] );\n\n\tconst interpolationColors = {\n\t\tbackgroundColor: animatedValue.interpolate( {\n\t\t\tinputRange: [ 0, 1 ],\n\t\t\toutputRange: [\n\t\t\t\tinactiveIcon.backgroundColor,\n\t\t\t\tactiveIcon.backgroundColor,\n\t\t\t],\n\t\t} ),\n\t\tcolor: animatedValue.interpolate( {\n\t\t\tinputRange: [ 0, 1 ],\n\t\t\toutputRange: [ inactiveIcon.color, activeIcon.color ],\n\t\t} ),\n\t\tstroke: '',\n\t};\n\n\tconst { backgroundColor, color, stroke } = hasUrl\n\t\t? activeIcon\n\t\t: interpolationColors;\n\n\tfunction animateColors() {\n\t\tAnimated.sequence( [\n\t\t\tAnimated.delay( ANIMATION_DELAY ),\n\t\t\tAnimated.timing( animatedValue, {\n\t\t\t\ttoValue: 1,\n\t\t\t\tduration: ANIMATION_DURATION,\n\t\t\t\teasing: Easing.circle,\n\t\t\t} ),\n\t\t] ).start( () => setHasUrl( true ) );\n\t}\n\n\tfunction onCloseSettingsSheet() {\n\t\tsetIsLinkSheetVisible( false );\n\t}\n\n\tfunction onOpenSettingsSheet() {\n\t\tsetIsLinkSheetVisible( true );\n\t}\n\n\tfunction onEmptyURL() {\n\t\tanimatedValue.setValue( 0 );\n\t\tsetHasUrl( false );\n\t}\n\n\tfunction onIconPress() {\n\t\tif ( isSelected ) {\n\t\t\tsetIsLinkSheetVisible( true );\n\t\t} else {\n\t\t\tonFocus();\n\t\t}\n\t}\n\n\tconst accessibilityHint = url\n\t\t? sprintf(\n\t\t\t\t// translators: %s: social link name e.g: \"Instagram\".\n\t\t\t\t__( '%s has URL set' ),\n\t\t\t\tsocialLinkName\n\t\t  )\n\t\t: sprintf(\n\t\t\t\t// translators: %s: social link name e.g: \"Instagram\".\n\t\t\t\t__( '%s has no URL set' ),\n\t\t\t\tsocialLinkName\n\t\t  );\n\n\treturn (\n\t\t<View>\n\t\t\t{ isSelected && (\n\t\t\t\t<BlockControls>\n\t\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\ttitle={ sprintf(\n\t\t\t\t\t\t\t\t// translators: %s: social link name e.g: \"Instagram\".\n\t\t\t\t\t\t\t\t__( 'Add link to %s' ),\n\t\t\t\t\t\t\t\tsocialLinkName\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\ticon={ link }\n\t\t\t\t\t\t\tonClick={ onOpenSettingsSheet }\n\t\t\t\t\t\t\tisActive={ url }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t</BlockControls>\n\t\t\t) }\n\t\t\t<LinkSettings\n\t\t\t\tisVisible={ isLinkSheetVisible }\n\t\t\t\tattributes={ attributes }\n\t\t\t\tonEmptyURL={ onEmptyURL }\n\t\t\t\tonClose={ onCloseSettingsSheet }\n\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\toptions={ linkSettingsOptions }\n\t\t\t\twithBottomSheet={ true }\n\t\t\t/>\n\t\t\t<TouchableWithoutFeedback\n\t\t\t\tonPress={ onIconPress }\n\t\t\t\taccessibilityRole={ 'button' }\n\t\t\t\taccessibilityLabel={ sprintf(\n\t\t\t\t\t// translators: %s: social link name e.g: \"Instagram\".\n\t\t\t\t\t__( '%s social icon' ),\n\t\t\t\t\tsocialLinkName\n\t\t\t\t) }\n\t\t\t\taccessibilityHint={ accessibilityHint }\n\t\t\t>\n\t\t\t\t<Animated.View\n\t\t\t\t\tstyle={ [ styles.iconContainer, { backgroundColor } ] }\n\t\t\t\t>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\tanimated\n\t\t\t\t\t\ticon={ IconComponent }\n\t\t\t\t\t\tstyle={ { stroke, color } }\n\t\t\t\t\t/>\n\t\t\t\t</Animated.View>\n\t\t\t</TouchableWithoutFeedback>\n\t\t</View>\n\t);\n};\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst { getBlock } = select( 'core/block-editor' );\n\n\t\tconst block = getBlock( clientId );\n\t\tconst name = block?.name.substring( 17 );\n\n\t\treturn {\n\t\t\tname,\n\t\t};\n\t} ),\n] )( SocialLinkEdit );\n"]}
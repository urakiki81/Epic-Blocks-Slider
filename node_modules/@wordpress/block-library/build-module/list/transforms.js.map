{"version":3,"sources":["@wordpress/block-library/src/list/transforms.js"],"names":["createBlock","getBlockAttributes","__UNSTABLE_LINE_SEPARATOR","create","join","replace","split","toHTMLString","getListContentSchema","phrasingContentSchema","listContentSchema","ul","ol","attributes","forEach","tag","children","li","transforms","from","type","isMultiBlock","blocks","transform","blockAttributes","values","value","map","content","html","length","multilineTag","anchor","selector","schema","args","node","ordered","nodeName","id","undefined","getAttribute","reversed","start","parseInt","isNaN","outerHTML","prefix","to","multilineWrapperTags","piece"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { createBlock, getBlockAttributes } from '@wordpress/blocks';\nimport {\n\t__UNSTABLE_LINE_SEPARATOR,\n\tcreate,\n\tjoin,\n\treplace,\n\tsplit,\n\ttoHTMLString,\n} from '@wordpress/rich-text';\n\nfunction getListContentSchema( { phrasingContentSchema } ) {\n\tconst listContentSchema = {\n\t\t...phrasingContentSchema,\n\t\tul: {},\n\t\tol: { attributes: [ 'type', 'start', 'reversed' ] },\n\t};\n\n\t// Recursion is needed.\n\t// Possible: ul > li > ul.\n\t// Impossible: ul > ul.\n\t[ 'ul', 'ol' ].forEach( ( tag ) => {\n\t\tlistContentSchema[ tag ].children = {\n\t\t\tli: {\n\t\t\t\tchildren: listContentSchema,\n\t\t\t},\n\t\t};\n\t} );\n\n\treturn listContentSchema;\n}\n\nconst transforms = {\n\tfrom: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tisMultiBlock: true,\n\t\t\tblocks: [ 'core/paragraph', 'core/heading' ],\n\t\t\ttransform: ( blockAttributes ) => {\n\t\t\t\treturn createBlock( 'core/list', {\n\t\t\t\t\tvalues: toHTMLString( {\n\t\t\t\t\t\tvalue: join(\n\t\t\t\t\t\t\tblockAttributes.map( ( { content } ) => {\n\t\t\t\t\t\t\t\tconst value = create( { html: content } );\n\n\t\t\t\t\t\t\t\tif ( blockAttributes.length > 1 ) {\n\t\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// When converting only one block, transform\n\t\t\t\t\t\t\t\t// every line to a list item.\n\t\t\t\t\t\t\t\treturn replace(\n\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\t/\\n/g,\n\t\t\t\t\t\t\t\t\t__UNSTABLE_LINE_SEPARATOR\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} ),\n\t\t\t\t\t\t\t__UNSTABLE_LINE_SEPARATOR\n\t\t\t\t\t\t),\n\t\t\t\t\t\tmultilineTag: 'li',\n\t\t\t\t\t} ),\n\t\t\t\t\tanchor: blockAttributes.anchor,\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/quote', 'core/pullquote' ],\n\t\t\ttransform: ( { value, anchor } ) => {\n\t\t\t\treturn createBlock( 'core/list', {\n\t\t\t\t\tvalues: toHTMLString( {\n\t\t\t\t\t\tvalue: create( { html: value, multilineTag: 'p' } ),\n\t\t\t\t\t\tmultilineTag: 'li',\n\t\t\t\t\t} ),\n\t\t\t\t\tanchor,\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttype: 'raw',\n\t\t\tselector: 'ol,ul',\n\t\t\tschema: ( args ) => ( {\n\t\t\t\tol: getListContentSchema( args ).ol,\n\t\t\t\tul: getListContentSchema( args ).ul,\n\t\t\t} ),\n\t\t\ttransform( node ) {\n\t\t\t\tconst attributes = {\n\t\t\t\t\tordered: node.nodeName === 'OL',\n\t\t\t\t\tanchor: node.id === '' ? undefined : node.id,\n\t\t\t\t};\n\n\t\t\t\tif ( attributes.ordered ) {\n\t\t\t\t\tconst type = node.getAttribute( 'type' );\n\n\t\t\t\t\tif ( type ) {\n\t\t\t\t\t\tattributes.type = type;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( node.getAttribute( 'reversed' ) !== null ) {\n\t\t\t\t\t\tattributes.reversed = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst start = parseInt( node.getAttribute( 'start' ), 10 );\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t! isNaN( start ) &&\n\t\t\t\t\t\t// start=1 only makes sense if the list is reversed.\n\t\t\t\t\t\t( start !== 1 || attributes.reversed )\n\t\t\t\t\t) {\n\t\t\t\t\t\tattributes.start = start;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn createBlock( 'core/list', {\n\t\t\t\t\t...getBlockAttributes( 'core/list', node.outerHTML ),\n\t\t\t\t\t...attributes,\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t\t...[ '*', '-' ].map( ( prefix ) => ( {\n\t\t\ttype: 'prefix',\n\t\t\tprefix,\n\t\t\ttransform( content ) {\n\t\t\t\treturn createBlock( 'core/list', {\n\t\t\t\t\tvalues: `<li>${ content }</li>`,\n\t\t\t\t} );\n\t\t\t},\n\t\t} ) ),\n\t\t...[ '1.', '1)' ].map( ( prefix ) => ( {\n\t\t\ttype: 'prefix',\n\t\t\tprefix,\n\t\t\ttransform( content ) {\n\t\t\t\treturn createBlock( 'core/list', {\n\t\t\t\t\tordered: true,\n\t\t\t\t\tvalues: `<li>${ content }</li>`,\n\t\t\t\t} );\n\t\t\t},\n\t\t} ) ),\n\t],\n\tto: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/paragraph' ],\n\t\t\ttransform: ( { values } ) =>\n\t\t\t\tsplit(\n\t\t\t\t\tcreate( {\n\t\t\t\t\t\thtml: values,\n\t\t\t\t\t\tmultilineTag: 'li',\n\t\t\t\t\t\tmultilineWrapperTags: [ 'ul', 'ol' ],\n\t\t\t\t\t} ),\n\t\t\t\t\t__UNSTABLE_LINE_SEPARATOR\n\t\t\t\t).map( ( piece ) =>\n\t\t\t\t\tcreateBlock( 'core/paragraph', {\n\t\t\t\t\t\tcontent: toHTMLString( { value: piece } ),\n\t\t\t\t\t} )\n\t\t\t\t),\n\t\t},\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/heading' ],\n\t\t\ttransform: ( { values } ) =>\n\t\t\t\tsplit(\n\t\t\t\t\tcreate( {\n\t\t\t\t\t\thtml: values,\n\t\t\t\t\t\tmultilineTag: 'li',\n\t\t\t\t\t\tmultilineWrapperTags: [ 'ul', 'ol' ],\n\t\t\t\t\t} ),\n\t\t\t\t\t__UNSTABLE_LINE_SEPARATOR\n\t\t\t\t).map( ( piece ) =>\n\t\t\t\t\tcreateBlock( 'core/heading', {\n\t\t\t\t\t\tcontent: toHTMLString( { value: piece } ),\n\t\t\t\t\t} )\n\t\t\t\t),\n\t\t},\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/quote' ],\n\t\t\ttransform: ( { values, anchor } ) => {\n\t\t\t\treturn createBlock( 'core/quote', {\n\t\t\t\t\tvalue: toHTMLString( {\n\t\t\t\t\t\tvalue: create( {\n\t\t\t\t\t\t\thtml: values,\n\t\t\t\t\t\t\tmultilineTag: 'li',\n\t\t\t\t\t\t\tmultilineWrapperTags: [ 'ul', 'ol' ],\n\t\t\t\t\t\t} ),\n\t\t\t\t\t\tmultilineTag: 'p',\n\t\t\t\t\t} ),\n\t\t\t\t\tanchor,\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/pullquote' ],\n\t\t\ttransform: ( { values, anchor } ) => {\n\t\t\t\treturn createBlock( 'core/pullquote', {\n\t\t\t\t\tvalue: toHTMLString( {\n\t\t\t\t\t\tvalue: create( {\n\t\t\t\t\t\t\thtml: values,\n\t\t\t\t\t\t\tmultilineTag: 'li',\n\t\t\t\t\t\t\tmultilineWrapperTags: [ 'ul', 'ol' ],\n\t\t\t\t\t\t} ),\n\t\t\t\t\t\tmultilineTag: 'p',\n\t\t\t\t\t} ),\n\t\t\t\t\tanchor,\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t],\n};\n\nexport default transforms;\n"]}
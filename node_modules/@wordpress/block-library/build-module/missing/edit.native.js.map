{"version":3,"sources":["@wordpress/block-library/src/missing/edit.native.js"],"names":["Platform","View","Text","TouchableWithoutFeedback","requestUnsupportedBlockFallback","BottomSheet","Icon","compose","withPreferredColorScheme","coreBlocks","normalizeIconObject","Component","__","sprintf","help","plugins","withSelect","styles","UnsupportedBlockEdit","props","state","showHelp","toggleSheet","bind","requestFallback","setState","timeout","clearTimeout","infoIconStyle","getStylesFromColorScheme","infoIcon","infoIconDark","helpIconContainer","color","sendFallbackMessage","blockTitle","blockName","attributes","clientId","isUnsupportedBlockEditorSupported","infoTextStyle","infoText","infoTextDark","infoTitleStyle","infoTitle","infoTitleDark","infoDescriptionStyle","infoDescription","infoDescriptionDark","infoSheetIconStyle","infoSheetIcon","infoSheetIconDark","titleFormat","OS","actionButtonStyle","actionButton","actionButtonDark","setTimeout","content","originalContent","infoContainer","size","originalName","preferredColorScheme","blockType","title","settings","titleStyle","unsupportedBlockMessage","unsupportedBlockMessageDark","subTitleStyle","unsupportedBlockSubtitle","unsupportedBlockSubtitleDark","subtitle","icon","iconStyle","unsupportedBlockIcon","unsupportedBlockIconDark","iconClassName","unsupportedBlock","unsupportedBlockDark","renderHelpIcon","src","renderSheet","select","getSettings","unsupportedBlockEditor"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { Platform, View, Text, TouchableWithoutFeedback } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { requestUnsupportedBlockFallback } from '@wordpress/react-native-bridge';\nimport { BottomSheet, Icon } from '@wordpress/components';\nimport { compose, withPreferredColorScheme } from '@wordpress/compose';\nimport { coreBlocks } from '@wordpress/block-library';\nimport { normalizeIconObject } from '@wordpress/blocks';\nimport { Component } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { help, plugins } from '@wordpress/icons';\nimport { withSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\n\nexport class UnsupportedBlockEdit extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = { showHelp: false };\n\t\tthis.toggleSheet = this.toggleSheet.bind( this );\n\t\tthis.requestFallback = this.requestFallback.bind( this );\n\t}\n\n\ttoggleSheet() {\n\t\tthis.setState( {\n\t\t\tshowHelp: ! this.state.showHelp,\n\t\t} );\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif ( this.timeout ) {\n\t\t\tclearTimeout( this.timeout );\n\t\t}\n\t}\n\n\trenderHelpIcon() {\n\t\tconst infoIconStyle = this.props.getStylesFromColorScheme(\n\t\t\tstyles.infoIcon,\n\t\t\tstyles.infoIconDark\n\t\t);\n\n\t\treturn (\n\t\t\t<TouchableWithoutFeedback\n\t\t\t\taccessibilityLabel={ __( 'Help icon' ) }\n\t\t\t\taccessibilityRole={ 'button' }\n\t\t\t\taccessibilityHint={ __( 'Tap here to show help' ) }\n\t\t\t\tonPress={ this.toggleSheet }\n\t\t\t>\n\t\t\t\t<View style={ styles.helpIconContainer }>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\tclassName=\"unsupported-icon-help\"\n\t\t\t\t\t\tlabel={ __( 'Help icon' ) }\n\t\t\t\t\t\ticon={ help }\n\t\t\t\t\t\tcolor={ infoIconStyle.color }\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t</TouchableWithoutFeedback>\n\t\t);\n\t}\n\n\trequestFallback() {\n\t\tthis.toggleSheet();\n\t\tthis.setState( { sendFallbackMessage: true } );\n\t}\n\n\trenderSheet( blockTitle, blockName ) {\n\t\tconst {\n\t\t\tgetStylesFromColorScheme,\n\t\t\tattributes,\n\t\t\tclientId,\n\t\t\tisUnsupportedBlockEditorSupported,\n\t\t} = this.props;\n\t\tconst infoTextStyle = getStylesFromColorScheme(\n\t\t\tstyles.infoText,\n\t\t\tstyles.infoTextDark\n\t\t);\n\t\tconst infoTitleStyle = getStylesFromColorScheme(\n\t\t\tstyles.infoTitle,\n\t\t\tstyles.infoTitleDark\n\t\t);\n\t\tconst infoDescriptionStyle = getStylesFromColorScheme(\n\t\t\tstyles.infoDescription,\n\t\t\tstyles.infoDescriptionDark\n\t\t);\n\t\tconst infoSheetIconStyle = getStylesFromColorScheme(\n\t\t\tstyles.infoSheetIcon,\n\t\t\tstyles.infoSheetIconDark\n\t\t);\n\n\t\tconst titleFormat =\n\t\t\tPlatform.OS === 'android'\n\t\t\t\t? // translators: %s: Name of the block\n\t\t\t\t  __( \"'%s' isn't yet supported on WordPress for Android\" )\n\t\t\t\t: // translators: %s: Name of the block\n\t\t\t\t  __( \"'%s' isn't yet supported on WordPress for iOS\" );\n\t\tconst infoTitle = sprintf( titleFormat, blockTitle );\n\n\t\tconst actionButtonStyle = getStylesFromColorScheme(\n\t\t\tstyles.actionButton,\n\t\t\tstyles.actionButtonDark\n\t\t);\n\n\t\treturn (\n\t\t\t<BottomSheet\n\t\t\t\tisVisible={ this.state.showHelp }\n\t\t\t\thideHeader\n\t\t\t\tonClose={ this.toggleSheet }\n\t\t\t\tonModalHide={ () => {\n\t\t\t\t\tif ( this.state.sendFallbackMessage ) {\n\t\t\t\t\t\t// On iOS, onModalHide is called when the controller is still part of the hierarchy.\n\t\t\t\t\t\t// A small delay will ensure that the controller has already been removed.\n\t\t\t\t\t\tthis.timeout = setTimeout( () => {\n\t\t\t\t\t\t\t// for the Classic block, the content is kept in the `content` attribute\n\t\t\t\t\t\t\tconst content =\n\t\t\t\t\t\t\t\tblockName === 'core/freeform'\n\t\t\t\t\t\t\t\t\t? attributes.content\n\t\t\t\t\t\t\t\t\t: attributes.originalContent;\n\t\t\t\t\t\t\trequestUnsupportedBlockFallback(\n\t\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t\t\tclientId,\n\t\t\t\t\t\t\t\tblockName,\n\t\t\t\t\t\t\t\tblockTitle\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}, 100 );\n\t\t\t\t\t\tthis.setState( { sendFallbackMessage: false } );\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t<View style={ styles.infoContainer }>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticon={ help }\n\t\t\t\t\t\tcolor={ infoSheetIconStyle.color }\n\t\t\t\t\t\tsize={ styles.infoSheetIcon.size }\n\t\t\t\t\t/>\n\t\t\t\t\t<Text style={ [ infoTextStyle, infoTitleStyle ] }>\n\t\t\t\t\t\t{ infoTitle }\n\t\t\t\t\t</Text>\n\t\t\t\t\t<Text style={ [ infoTextStyle, infoDescriptionStyle ] }>\n\t\t\t\t\t\t{ isUnsupportedBlockEditorSupported\n\t\t\t\t\t\t\t? __(\n\t\t\t\t\t\t\t\t\t\"We are working hard to add more blocks with each release. In the meantime, you can also edit this block using your device's web browser.\"\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: __(\n\t\t\t\t\t\t\t\t\t'We are working hard to add more blocks with each release. In the meantime, you can also edit this post on the web.'\n\t\t\t\t\t\t\t  ) }\n\t\t\t\t\t</Text>\n\t\t\t\t</View>\n\t\t\t\t{ isUnsupportedBlockEditorSupported && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<BottomSheet.Cell\n\t\t\t\t\t\t\tlabel={ __( 'Edit block in web browser' ) }\n\t\t\t\t\t\t\tseparatorType=\"topFullWidth\"\n\t\t\t\t\t\t\tonPress={ this.requestFallback }\n\t\t\t\t\t\t\tlabelStyle={ actionButtonStyle }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<BottomSheet.Cell\n\t\t\t\t\t\t\tlabel={ __( 'Dismiss' ) }\n\t\t\t\t\t\t\tseparatorType=\"topFullWidth\"\n\t\t\t\t\t\t\tonPress={ this.toggleSheet }\n\t\t\t\t\t\t\tlabelStyle={ actionButtonStyle }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</BottomSheet>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { originalName } = this.props.attributes;\n\t\tconst { getStylesFromColorScheme, preferredColorScheme } = this.props;\n\t\tconst blockType = coreBlocks[ originalName ];\n\n\t\tconst title = blockType ? blockType.settings.title : originalName;\n\t\tconst titleStyle = getStylesFromColorScheme(\n\t\t\tstyles.unsupportedBlockMessage,\n\t\t\tstyles.unsupportedBlockMessageDark\n\t\t);\n\n\t\tconst subTitleStyle = getStylesFromColorScheme(\n\t\t\tstyles.unsupportedBlockSubtitle,\n\t\t\tstyles.unsupportedBlockSubtitleDark\n\t\t);\n\t\tconst subtitle = (\n\t\t\t<Text style={ subTitleStyle }>{ __( 'Unsupported' ) }</Text>\n\t\t);\n\n\t\tconst icon = blockType\n\t\t\t? normalizeIconObject( blockType.settings.icon )\n\t\t\t: plugins;\n\t\tconst iconStyle = getStylesFromColorScheme(\n\t\t\tstyles.unsupportedBlockIcon,\n\t\t\tstyles.unsupportedBlockIconDark\n\t\t);\n\t\tconst iconClassName = 'unsupported-icon' + '-' + preferredColorScheme;\n\t\treturn (\n\t\t\t<View\n\t\t\t\tstyle={ getStylesFromColorScheme(\n\t\t\t\t\tstyles.unsupportedBlock,\n\t\t\t\t\tstyles.unsupportedBlockDark\n\t\t\t\t) }\n\t\t\t>\n\t\t\t\t{ this.renderHelpIcon() }\n\t\t\t\t<Icon\n\t\t\t\t\tclassName={ iconClassName }\n\t\t\t\t\ticon={ icon && icon.src ? icon.src : icon }\n\t\t\t\t\tcolor={ iconStyle.color }\n\t\t\t\t/>\n\t\t\t\t<Text style={ titleStyle }>{ title }</Text>\n\t\t\t\t{ subtitle }\n\t\t\t\t{ this.renderSheet( title, originalName ) }\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { getSettings } = select( 'core/block-editor' );\n\t\treturn {\n\t\t\tisUnsupportedBlockEditorSupported:\n\t\t\t\tgetSettings( 'capabilities' ).unsupportedBlockEditor === true,\n\t\t};\n\t} ),\n\twithPreferredColorScheme,\n] )( UnsupportedBlockEdit );\n"]}
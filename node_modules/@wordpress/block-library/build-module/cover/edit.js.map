{"version":3,"sources":["@wordpress/block-library/src/cover/edit.js"],"names":["classnames","FastAverageColor","tinycolor","useEffect","useRef","useState","BaseControl","Button","FocalPointPicker","PanelBody","PanelRow","RangeControl","ResizableBox","ToggleControl","withNotices","__experimentalBoxControl","BoxControl","compose","withInstanceId","useInstanceId","BlockControls","BlockIcon","InnerBlocks","InspectorControls","MediaPlaceholder","MediaReplaceFlow","withColors","ColorPalette","__experimentalBlock","Block","__experimentalUseGradient","__experimentalPanelColorGradientSettings","PanelColorGradientSettings","__experimentalUnitControl","UnitControl","__experimentalBlockAlignmentMatrixToolbar","BlockAlignmentMatrixToolbar","__","withDispatch","cover","icon","attributesFromMedia","IMAGE_BACKGROUND_TYPE","VIDEO_BACKGROUND_TYPE","COVER_MIN_HEIGHT","CSS_UNITS","backgroundImageStyles","dimRatioToClass","isContentPositionCenter","getPositionClassName","ALLOWED_MEDIA_TYPES","INNER_BLOCKS_TEMPLATE","align","fontSize","placeholder","BoxControlVisualizer","__Visualizer","retrieveFastAverageColor","fastAverageColor","CoverHeightInput","onChange","onUnitChange","unit","value","temporaryInput","setTemporaryInput","instanceId","inputId","isPx","handleOnChange","unprocessedValue","inputValue","parseInt","undefined","isNaN","handleOnBlur","min","maxWidth","RESIZABLE_BOX_ENABLE_OPTION","top","right","bottom","left","topRight","bottomRight","bottomLeft","topLeft","ResizableCover","className","onResizeStart","onResize","onResizeStop","props","isResizing","setIsResizing","_event","_direction","elt","clientHeight","useCoverIsDark","url","dimRatio","overlayColor","elementRef","isDark","setIsDark","current","getColorAsync","color","CoverEdit","attributes","setAttributes","isSelected","noticeUI","setOverlayColor","toggleSelection","noticeOperations","contentPosition","id","backgroundType","focalPoint","hasParallax","minHeight","minHeightUnit","styleAttribute","style","gradientClass","gradientValue","setGradient","onSelectMedia","toggleParallax","isDarkElement","isImageBackground","isVideoBackground","temporaryMinHeight","setTemporaryMinHeight","removeAllNotices","createErrorNotice","minHeightWithUnit","backgroundColor","background","positionValue","x","y","backgroundPosition","hasBackground","showFocalPointPicker","controls","nextPosition","newFocalPoint","newMinHeight","nextUnit","colorValue","onColorChange","onGradientChange","label","newDimRation","placeholderIcon","title","instructions","message","classes","class","spacing","padding","visualizers","display","objectPosition","dispatch"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport FastAverageColor from 'fast-average-color';\nimport tinycolor from 'tinycolor2';\n\n/**\n * WordPress dependencies\n */\nimport { useEffect, useRef, useState } from '@wordpress/element';\nimport {\n\tBaseControl,\n\tButton,\n\tFocalPointPicker,\n\tPanelBody,\n\tPanelRow,\n\tRangeControl,\n\tResizableBox,\n\tToggleControl,\n\twithNotices,\n\t__experimentalBoxControl as BoxControl,\n} from '@wordpress/components';\nimport { compose, withInstanceId, useInstanceId } from '@wordpress/compose';\nimport {\n\tBlockControls,\n\tBlockIcon,\n\tInnerBlocks,\n\tInspectorControls,\n\tMediaPlaceholder,\n\tMediaReplaceFlow,\n\twithColors,\n\tColorPalette,\n\t__experimentalBlock as Block,\n\t__experimentalUseGradient,\n\t__experimentalPanelColorGradientSettings as PanelColorGradientSettings,\n\t__experimentalUnitControl as UnitControl,\n\t__experimentalBlockAlignmentMatrixToolbar as BlockAlignmentMatrixToolbar,\n} from '@wordpress/block-editor';\nimport { __ } from '@wordpress/i18n';\nimport { withDispatch } from '@wordpress/data';\nimport { cover as icon } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport {\n\tattributesFromMedia,\n\tIMAGE_BACKGROUND_TYPE,\n\tVIDEO_BACKGROUND_TYPE,\n\tCOVER_MIN_HEIGHT,\n\tCSS_UNITS,\n\tbackgroundImageStyles,\n\tdimRatioToClass,\n\tisContentPositionCenter,\n\tgetPositionClassName,\n} from './shared';\n\n/**\n * Module Constants\n */\nconst ALLOWED_MEDIA_TYPES = [ 'image', 'video' ];\nconst INNER_BLOCKS_TEMPLATE = [\n\t[\n\t\t'core/paragraph',\n\t\t{\n\t\t\talign: 'center',\n\t\t\tfontSize: 'large',\n\t\t\tplaceholder: __( 'Write title…' ),\n\t\t},\n\t],\n];\n\nconst { __Visualizer: BoxControlVisualizer } = BoxControl;\n\nfunction retrieveFastAverageColor() {\n\tif ( ! retrieveFastAverageColor.fastAverageColor ) {\n\t\tretrieveFastAverageColor.fastAverageColor = new FastAverageColor();\n\t}\n\treturn retrieveFastAverageColor.fastAverageColor;\n}\n\nfunction CoverHeightInput( {\n\tonChange,\n\tonUnitChange,\n\tunit = 'px',\n\tvalue = '',\n} ) {\n\tconst [ temporaryInput, setTemporaryInput ] = useState( null );\n\tconst instanceId = useInstanceId( UnitControl );\n\tconst inputId = `block-cover-height-input-${ instanceId }`;\n\tconst isPx = unit === 'px';\n\n\tconst handleOnChange = ( unprocessedValue ) => {\n\t\tconst inputValue =\n\t\t\tunprocessedValue !== ''\n\t\t\t\t? parseInt( unprocessedValue, 10 )\n\t\t\t\t: undefined;\n\n\t\tif ( isNaN( inputValue ) && inputValue !== undefined ) {\n\t\t\tsetTemporaryInput( unprocessedValue );\n\t\t\treturn;\n\t\t}\n\t\tsetTemporaryInput( null );\n\t\tonChange( inputValue );\n\t\tif ( inputValue === undefined ) {\n\t\t\tonUnitChange();\n\t\t}\n\t};\n\n\tconst handleOnBlur = () => {\n\t\tif ( temporaryInput !== null ) {\n\t\t\tsetTemporaryInput( null );\n\t\t}\n\t};\n\n\tconst inputValue = temporaryInput !== null ? temporaryInput : value;\n\tconst min = isPx ? COVER_MIN_HEIGHT : 0;\n\n\treturn (\n\t\t<BaseControl label={ __( 'Minimum height of cover' ) } id={ inputId }>\n\t\t\t<UnitControl\n\t\t\t\tid={ inputId }\n\t\t\t\tisResetValueOnUnitChange\n\t\t\t\tmin={ min }\n\t\t\t\tonBlur={ handleOnBlur }\n\t\t\t\tonChange={ handleOnChange }\n\t\t\t\tonUnitChange={ onUnitChange }\n\t\t\t\tstep=\"1\"\n\t\t\t\tstyle={ { maxWidth: 80 } }\n\t\t\t\tunit={ unit }\n\t\t\t\tunits={ CSS_UNITS }\n\t\t\t\tvalue={ inputValue }\n\t\t\t/>\n\t\t</BaseControl>\n\t);\n}\n\nconst RESIZABLE_BOX_ENABLE_OPTION = {\n\ttop: false,\n\tright: false,\n\tbottom: true,\n\tleft: false,\n\ttopRight: false,\n\tbottomRight: false,\n\tbottomLeft: false,\n\ttopLeft: false,\n};\n\nfunction ResizableCover( {\n\tclassName,\n\tonResizeStart,\n\tonResize,\n\tonResizeStop,\n\t...props\n} ) {\n\tconst [ isResizing, setIsResizing ] = useState( false );\n\n\treturn (\n\t\t<ResizableBox\n\t\t\tclassName={ classnames( className, {\n\t\t\t\t'is-resizing': isResizing,\n\t\t\t} ) }\n\t\t\tenable={ RESIZABLE_BOX_ENABLE_OPTION }\n\t\t\tonResizeStart={ ( _event, _direction, elt ) => {\n\t\t\t\tonResizeStart( elt.clientHeight );\n\t\t\t\tonResize( elt.clientHeight );\n\t\t\t} }\n\t\t\tonResize={ ( _event, _direction, elt ) => {\n\t\t\t\tonResize( elt.clientHeight );\n\t\t\t\tif ( ! isResizing ) {\n\t\t\t\t\tsetIsResizing( true );\n\t\t\t\t}\n\t\t\t} }\n\t\t\tonResizeStop={ ( _event, _direction, elt ) => {\n\t\t\t\tonResizeStop( elt.clientHeight );\n\t\t\t\tsetIsResizing( false );\n\t\t\t} }\n\t\t\tminHeight={ COVER_MIN_HEIGHT }\n\t\t\t{ ...props }\n\t\t/>\n\t);\n}\n\n/**\n * useCoverIsDark is a hook that returns a boolean variable specifying if the cover\n * background is dark or not.\n *\n * @param {?string} url          Url of the media background.\n * @param {?number} dimRatio     Transparency of the overlay color. If an image and\n *                               color are set, dimRatio is used to decide what is used\n *                               for background darkness checking purposes.\n * @param {?string} overlayColor String containing the overlay color value if one exists.\n * @param {?Object} elementRef   If a media background is set, elementRef should contain a reference to a\n *                               dom element that renders that media.\n *\n * @return {boolean} True if the cover background is considered \"dark\" and false otherwise.\n */\nfunction useCoverIsDark( url, dimRatio = 50, overlayColor, elementRef ) {\n\tconst [ isDark, setIsDark ] = useState( false );\n\tuseEffect( () => {\n\t\t// If opacity is lower than 50 the dominant color is the image or video color,\n\t\t// so use that color for the dark mode computation.\n\t\tif ( url && dimRatio <= 50 && elementRef.current ) {\n\t\t\tretrieveFastAverageColor().getColorAsync(\n\t\t\t\telementRef.current,\n\t\t\t\t( color ) => {\n\t\t\t\t\tsetIsDark( color.isDark );\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}, [ url, url && dimRatio <= 50 && elementRef.current, setIsDark ] );\n\tuseEffect( () => {\n\t\t// If opacity is greater than 50 the dominant color is the overlay color,\n\t\t// so use that color for the dark mode computation.\n\t\tif ( dimRatio > 50 || ! url ) {\n\t\t\tif ( ! overlayColor ) {\n\t\t\t\t// If no overlay color exists the overlay color is black (isDark )\n\t\t\t\tsetIsDark( true );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetIsDark( tinycolor( overlayColor ).isDark() );\n\t\t}\n\t}, [ overlayColor, dimRatio > 50 || ! url, setIsDark ] );\n\tuseEffect( () => {\n\t\tif ( ! url && ! overlayColor ) {\n\t\t\t// Reset isDark\n\t\t\tsetIsDark( false );\n\t\t}\n\t}, [ ! url && ! overlayColor, setIsDark ] );\n\treturn isDark;\n}\n\nfunction CoverEdit( {\n\tattributes,\n\tsetAttributes,\n\tisSelected,\n\tnoticeUI,\n\toverlayColor,\n\tsetOverlayColor,\n\ttoggleSelection,\n\tnoticeOperations,\n} ) {\n\tconst {\n\t\tcontentPosition,\n\t\tid,\n\t\tbackgroundType,\n\t\tdimRatio,\n\t\tfocalPoint,\n\t\thasParallax,\n\t\tminHeight,\n\t\tminHeightUnit,\n\t\tstyle: styleAttribute,\n\t\turl,\n\t} = attributes;\n\tconst {\n\t\tgradientClass,\n\t\tgradientValue,\n\t\tsetGradient,\n\t} = __experimentalUseGradient();\n\tconst onSelectMedia = attributesFromMedia( setAttributes );\n\n\tconst toggleParallax = () => {\n\t\tsetAttributes( {\n\t\t\thasParallax: ! hasParallax,\n\t\t\t...( ! hasParallax ? { focalPoint: undefined } : {} ),\n\t\t} );\n\t};\n\n\tconst isDarkElement = useRef();\n\tconst isDark = useCoverIsDark(\n\t\turl,\n\t\tdimRatio,\n\t\toverlayColor.color,\n\t\tisDarkElement\n\t);\n\n\tconst isImageBackground = IMAGE_BACKGROUND_TYPE === backgroundType;\n\tconst isVideoBackground = VIDEO_BACKGROUND_TYPE === backgroundType;\n\n\tconst [ temporaryMinHeight, setTemporaryMinHeight ] = useState( null );\n\tconst { removeAllNotices, createErrorNotice } = noticeOperations;\n\n\tconst minHeightWithUnit = minHeightUnit\n\t\t? `${ minHeight }${ minHeightUnit }`\n\t\t: minHeight;\n\n\tconst style = {\n\t\t...( isImageBackground ? backgroundImageStyles( url ) : {} ),\n\t\tbackgroundColor: overlayColor.color,\n\t\tminHeight: temporaryMinHeight || minHeightWithUnit || undefined,\n\t};\n\n\tif ( gradientValue && ! url ) {\n\t\tstyle.background = gradientValue;\n\t}\n\n\tlet positionValue;\n\n\tif ( focalPoint ) {\n\t\tpositionValue = `${ focalPoint.x * 100 }% ${ focalPoint.y * 100 }%`;\n\t\tif ( isImageBackground ) {\n\t\t\tstyle.backgroundPosition = positionValue;\n\t\t}\n\t}\n\n\tconst hasBackground = !! ( url || overlayColor.color || gradientValue );\n\tconst showFocalPointPicker =\n\t\tisVideoBackground || ( isImageBackground && ! hasParallax );\n\n\tconst controls = (\n\t\t<>\n\t\t\t<BlockControls>\n\t\t\t\t{ hasBackground && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<BlockAlignmentMatrixToolbar\n\t\t\t\t\t\t\tlabel={ __( 'Change content position' ) }\n\t\t\t\t\t\t\tvalue={ contentPosition }\n\t\t\t\t\t\t\tonChange={ ( nextPosition ) =>\n\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\tcontentPosition: nextPosition,\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<MediaReplaceFlow\n\t\t\t\t\t\t\tmediaId={ id }\n\t\t\t\t\t\t\tmediaURL={ url }\n\t\t\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\t\t\t\taccept=\"image/*,video/*\"\n\t\t\t\t\t\t\tonSelect={ onSelectMedia }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</BlockControls>\n\t\t\t<InspectorControls>\n\t\t\t\t{ !! url && (\n\t\t\t\t\t<PanelBody title={ __( 'Media settings' ) }>\n\t\t\t\t\t\t{ isImageBackground && (\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\tlabel={ __( 'Fixed background' ) }\n\t\t\t\t\t\t\t\tchecked={ hasParallax }\n\t\t\t\t\t\t\t\tonChange={ toggleParallax }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ showFocalPointPicker && (\n\t\t\t\t\t\t\t<FocalPointPicker\n\t\t\t\t\t\t\t\tlabel={ __( 'Focal point picker' ) }\n\t\t\t\t\t\t\t\turl={ url }\n\t\t\t\t\t\t\t\tvalue={ focalPoint }\n\t\t\t\t\t\t\t\tonChange={ ( newFocalPoint ) =>\n\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\tfocalPoint: newFocalPoint,\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tisSecondary\n\t\t\t\t\t\t\t\tisSmall\n\t\t\t\t\t\t\t\tclassName=\"block-library-cover__reset-button\"\n\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\turl: undefined,\n\t\t\t\t\t\t\t\t\t\tid: undefined,\n\t\t\t\t\t\t\t\t\t\tbackgroundType: undefined,\n\t\t\t\t\t\t\t\t\t\tdimRatio: undefined,\n\t\t\t\t\t\t\t\t\t\tfocalPoint: undefined,\n\t\t\t\t\t\t\t\t\t\thasParallax: undefined,\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Clear Media' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t) }\n\t\t\t\t{ hasBackground && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<PanelBody title={ __( 'Dimensions' ) }>\n\t\t\t\t\t\t\t<CoverHeightInput\n\t\t\t\t\t\t\t\tvalue={ temporaryMinHeight || minHeight }\n\t\t\t\t\t\t\t\tunit={ minHeightUnit }\n\t\t\t\t\t\t\t\tonChange={ ( newMinHeight ) =>\n\t\t\t\t\t\t\t\t\tsetAttributes( { minHeight: newMinHeight } )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonUnitChange={ ( nextUnit ) => {\n\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\tminHeightUnit: nextUnit,\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t\t<PanelColorGradientSettings\n\t\t\t\t\t\t\ttitle={ __( 'Overlay' ) }\n\t\t\t\t\t\t\tinitialOpen={ true }\n\t\t\t\t\t\t\tsettings={ [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tcolorValue: overlayColor.color,\n\t\t\t\t\t\t\t\t\tgradientValue,\n\t\t\t\t\t\t\t\t\tonColorChange: setOverlayColor,\n\t\t\t\t\t\t\t\t\tonGradientChange: setGradient,\n\t\t\t\t\t\t\t\t\tlabel: __( 'Color' ),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ !! url && (\n\t\t\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\t\t\tlabel={ __( 'Opacity' ) }\n\t\t\t\t\t\t\t\t\tvalue={ dimRatio }\n\t\t\t\t\t\t\t\t\tonChange={ ( newDimRation ) =>\n\t\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\t\tdimRatio: newDimRation,\n\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\t\t\t\tmax={ 100 }\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</PanelColorGradientSettings>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</InspectorControls>\n\t\t</>\n\t);\n\n\tif ( ! hasBackground ) {\n\t\tconst placeholderIcon = <BlockIcon icon={ icon } />;\n\t\tconst label = __( 'Cover' );\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ controls }\n\t\t\t\t<Block.div className=\"is-placeholder\">\n\t\t\t\t\t<MediaPlaceholder\n\t\t\t\t\t\ticon={ placeholderIcon }\n\t\t\t\t\t\tlabels={ {\n\t\t\t\t\t\t\ttitle: label,\n\t\t\t\t\t\t\tinstructions: __(\n\t\t\t\t\t\t\t\t'Upload an image or video file, or pick one from your media library.'\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonSelect={ onSelectMedia }\n\t\t\t\t\t\taccept=\"image/*,video/*\"\n\t\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\t\t\tnotices={ noticeUI }\n\t\t\t\t\t\tonError={ ( message ) => {\n\t\t\t\t\t\t\tremoveAllNotices();\n\t\t\t\t\t\t\tcreateErrorNotice( message );\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"wp-block-cover__placeholder-background-options\">\n\t\t\t\t\t\t\t<ColorPalette\n\t\t\t\t\t\t\t\tdisableCustomColors={ true }\n\t\t\t\t\t\t\t\tvalue={ overlayColor.color }\n\t\t\t\t\t\t\t\tonChange={ setOverlayColor }\n\t\t\t\t\t\t\t\tclearable={ false }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</MediaPlaceholder>\n\t\t\t\t</Block.div>\n\t\t\t</>\n\t\t);\n\t}\n\n\tconst classes = classnames(\n\t\tdimRatioToClass( dimRatio ),\n\t\t{\n\t\t\t'is-dark-theme': isDark,\n\t\t\t'has-background-dim': dimRatio !== 0,\n\t\t\t'has-parallax': hasParallax,\n\t\t\t[ overlayColor.class ]: overlayColor.class,\n\t\t\t'has-background-gradient': gradientValue,\n\t\t\t[ gradientClass ]: ! url && gradientClass,\n\t\t\t'has-custom-content-position': ! isContentPositionCenter(\n\t\t\t\tcontentPosition\n\t\t\t),\n\t\t},\n\t\tgetPositionClassName( contentPosition )\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{ controls }\n\t\t\t<Block.div className={ classes } data-url={ url } style={ style }>\n\t\t\t\t<BoxControlVisualizer\n\t\t\t\t\tvalues={ styleAttribute?.spacing?.padding }\n\t\t\t\t\tshowValues={ styleAttribute?.visualizers?.padding }\n\t\t\t\t/>\n\t\t\t\t<ResizableCover\n\t\t\t\t\tclassName=\"block-library-cover__resize-container\"\n\t\t\t\t\tonResizeStart={ () => {\n\t\t\t\t\t\tsetAttributes( { minHeightUnit: 'px' } );\n\t\t\t\t\t\ttoggleSelection( false );\n\t\t\t\t\t} }\n\t\t\t\t\tonResize={ setTemporaryMinHeight }\n\t\t\t\t\tonResizeStop={ ( newMinHeight ) => {\n\t\t\t\t\t\ttoggleSelection( true );\n\t\t\t\t\t\tsetAttributes( { minHeight: newMinHeight } );\n\t\t\t\t\t\tsetTemporaryMinHeight( null );\n\t\t\t\t\t} }\n\t\t\t\t\tshowHandle={ isSelected }\n\t\t\t\t/>\n\t\t\t\t{ isImageBackground && (\n\t\t\t\t\t// Used only to programmatically check if the image is dark or not\n\t\t\t\t\t<img\n\t\t\t\t\t\tref={ isDarkElement }\n\t\t\t\t\t\taria-hidden\n\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\tdisplay: 'none',\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tsrc={ url }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ url && gradientValue && dimRatio !== 0 && (\n\t\t\t\t\t<span\n\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t'wp-block-cover__gradient-background',\n\t\t\t\t\t\t\tgradientClass\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tstyle={ { background: gradientValue } }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ isVideoBackground && (\n\t\t\t\t\t<video\n\t\t\t\t\t\tref={ isDarkElement }\n\t\t\t\t\t\tclassName=\"wp-block-cover__video-background\"\n\t\t\t\t\t\tautoPlay\n\t\t\t\t\t\tmuted\n\t\t\t\t\t\tloop\n\t\t\t\t\t\tsrc={ url }\n\t\t\t\t\t\tstyle={ { objectPosition: positionValue } }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t<InnerBlocks\n\t\t\t\t\t__experimentalTagName=\"div\"\n\t\t\t\t\t__experimentalPassedProps={ {\n\t\t\t\t\t\tclassName: 'wp-block-cover__inner-container',\n\t\t\t\t\t} }\n\t\t\t\t\ttemplate={ INNER_BLOCKS_TEMPLATE }\n\t\t\t\t/>\n\t\t\t</Block.div>\n\t\t</>\n\t);\n}\n\nexport default compose( [\n\twithDispatch( ( dispatch ) => {\n\t\tconst { toggleSelection } = dispatch( 'core/block-editor' );\n\n\t\treturn {\n\t\t\ttoggleSelection,\n\t\t};\n\t} ),\n\twithColors( { overlayColor: 'background-color' } ),\n\twithNotices,\n\twithInstanceId,\n] )( CoverEdit );\n"]}
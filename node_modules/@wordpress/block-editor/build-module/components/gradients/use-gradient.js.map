{"version":3,"sources":["@wordpress/block-editor/src/components/gradients/use-gradient.js"],"names":["find","useCallback","useSelect","useDispatch","useBlockEditContext","__experimentalGetGradientClass","gradientSlug","undefined","getGradientValueBySlug","gradients","slug","gradient","__experimentalGetGradientObjectByGradientValue","value","getGradientSlugByValue","__experimentalUseGradient","gradientAttribute","customGradientAttribute","clientId","select","getBlockAttributes","getSettings","attributes","customGradient","updateBlockAttributes","setGradient","newGradientValue","gradientClass","gradientValue"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { find } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { useCallback } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { useBlockEditContext } from '../block-edit';\n\nexport function __experimentalGetGradientClass( gradientSlug ) {\n\tif ( ! gradientSlug ) {\n\t\treturn undefined;\n\t}\n\treturn `has-${ gradientSlug }-gradient-background`;\n}\n\n/**\n * Retrieves the gradient value per slug.\n *\n * @param {Array} gradients Gradient Palette\n * @param {string} slug Gradient slug\n *\n * @return {string} Gradient value.\n */\nexport function getGradientValueBySlug( gradients, slug ) {\n\tconst gradient = find( gradients, [ 'slug', slug ] );\n\treturn gradient && gradient.gradient;\n}\n\nexport function __experimentalGetGradientObjectByGradientValue(\n\tgradients,\n\tvalue\n) {\n\tconst gradient = find( gradients, [ 'gradient', value ] );\n\treturn gradient;\n}\n\n/**\n * Retrieves the gradient slug per slug.\n *\n * @param {Array} gradients Gradient Palette\n * @param {string} value Gradient value\n * @return {string} Gradient slug.\n */\nexport function getGradientSlugByValue( gradients, value ) {\n\tconst gradient = __experimentalGetGradientObjectByGradientValue(\n\t\tgradients,\n\t\tvalue\n\t);\n\treturn gradient && gradient.slug;\n}\n\nexport function __experimentalUseGradient( {\n\tgradientAttribute = 'gradient',\n\tcustomGradientAttribute = 'customGradient',\n} = {} ) {\n\tconst { clientId } = useBlockEditContext();\n\n\tconst { gradients, gradient, customGradient } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockAttributes, getSettings } = select(\n\t\t\t\t'core/block-editor'\n\t\t\t);\n\t\t\tconst attributes = getBlockAttributes( clientId );\n\t\t\treturn {\n\t\t\t\tgradient: attributes[ gradientAttribute ],\n\t\t\t\tcustomGradient: attributes[ customGradientAttribute ],\n\t\t\t\tgradients: getSettings().gradients,\n\t\t\t};\n\t\t},\n\t\t[ clientId, gradientAttribute, customGradientAttribute ]\n\t);\n\n\tconst { updateBlockAttributes } = useDispatch( 'core/block-editor' );\n\tconst setGradient = useCallback(\n\t\t( newGradientValue ) => {\n\t\t\tconst slug = getGradientSlugByValue( gradients, newGradientValue );\n\t\t\tif ( slug ) {\n\t\t\t\tupdateBlockAttributes( clientId, {\n\t\t\t\t\t[ gradientAttribute ]: slug,\n\t\t\t\t\t[ customGradientAttribute ]: undefined,\n\t\t\t\t} );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tupdateBlockAttributes( clientId, {\n\t\t\t\t[ gradientAttribute ]: undefined,\n\t\t\t\t[ customGradientAttribute ]: newGradientValue,\n\t\t\t} );\n\t\t},\n\t\t[ gradients, clientId, updateBlockAttributes ]\n\t);\n\n\tconst gradientClass = __experimentalGetGradientClass( gradient );\n\tlet gradientValue;\n\tif ( gradient ) {\n\t\tgradientValue = getGradientValueBySlug( gradients, gradient );\n\t} else {\n\t\tgradientValue = customGradient;\n\t}\n\treturn { gradientClass, gradientValue, setGradient };\n}\n"]}
{"version":3,"sources":["@wordpress/block-editor/src/components/colors-gradients/control.js"],"names":["classnames","every","isEmpty","pick","useState","BaseControl","Button","ButtonGroup","ColorIndicator","ColorPalette","__experimentalGradientPicker","GradientPicker","sprintf","__","useSelect","getColorObjectByColorValue","__experimentalGetGradientObjectByGradientValue","useEditorFeature","colorIndicatorAriaLabel","gradientIndicatorAriaLabel","colorsAndGradientKeys","VisualLabel","colors","gradients","label","currentTab","colorValue","gradientValue","value","ariaLabel","colorObject","colorName","name","gradientObject","gradientName","ColorGradientControlInner","disableCustomColors","disableCustomGradients","className","onColorChange","onGradientChange","canChooseAColor","canChooseAGradient","setCurrentTab","newColor","newGradient","ColorGradientControlSelect","props","colorGradientSettings","select","settings","getSettings","ColorGradientControl","key","hasOwnProperty"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { every, isEmpty, pick } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { useState } from '@wordpress/element';\nimport {\n\tBaseControl,\n\tButton,\n\tButtonGroup,\n\tColorIndicator,\n\tColorPalette,\n\t__experimentalGradientPicker as GradientPicker,\n} from '@wordpress/components';\nimport { sprintf, __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { getColorObjectByColorValue } from '../colors';\nimport { __experimentalGetGradientObjectByGradientValue } from '../gradients';\nimport useEditorFeature from '../use-editor-feature';\n\n// translators: first %s: the color name or value (e.g. red or #ff0000)\nconst colorIndicatorAriaLabel = __( '(Color: %s)' );\n\n// translators: first %s: the gradient name or value (e.g. red to green or linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%)\nconst gradientIndicatorAriaLabel = __( '(Gradient: %s)' );\n\nconst colorsAndGradientKeys = [\n\t'colors',\n\t'disableCustomColors',\n\t'gradients',\n\t'disableCustomGradients',\n];\n\nfunction VisualLabel( {\n\tcolors,\n\tgradients,\n\tlabel,\n\tcurrentTab,\n\tcolorValue,\n\tgradientValue,\n} ) {\n\tlet value, ariaLabel;\n\tif ( currentTab === 'color' ) {\n\t\tif ( colorValue ) {\n\t\t\tvalue = colorValue;\n\t\t\tconst colorObject = getColorObjectByColorValue( colors, value );\n\t\t\tconst colorName = colorObject && colorObject.name;\n\t\t\tariaLabel = sprintf( colorIndicatorAriaLabel, colorName || value );\n\t\t}\n\t} else if ( currentTab === 'gradient' && gradientValue ) {\n\t\tvalue = gradientValue;\n\t\tconst gradientObject = __experimentalGetGradientObjectByGradientValue(\n\t\t\tgradients,\n\t\t\tvalue\n\t\t);\n\t\tconst gradientName = gradientObject && gradientObject.name;\n\t\tariaLabel = sprintf(\n\t\t\tgradientIndicatorAriaLabel,\n\t\t\tgradientName || value\n\t\t);\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{ label }\n\t\t\t{ !! value && (\n\t\t\t\t<ColorIndicator colorValue={ value } aria-label={ ariaLabel } />\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nfunction ColorGradientControlInner( {\n\tcolors,\n\tgradients,\n\tdisableCustomColors,\n\tdisableCustomGradients,\n\tclassName,\n\tlabel,\n\tonColorChange,\n\tonGradientChange,\n\tcolorValue,\n\tgradientValue,\n} ) {\n\tconst canChooseAColor =\n\t\tonColorChange && ( ! isEmpty( colors ) || ! disableCustomColors );\n\tconst canChooseAGradient =\n\t\tonGradientChange &&\n\t\t( ! isEmpty( gradients ) || ! disableCustomGradients );\n\tconst [ currentTab, setCurrentTab ] = useState(\n\t\tgradientValue ? 'gradient' : !! canChooseAColor && 'color'\n\t);\n\n\tif ( ! canChooseAColor && ! canChooseAGradient ) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<BaseControl\n\t\t\tclassName={ classnames(\n\t\t\t\t'block-editor-color-gradient-control',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t>\n\t\t\t<fieldset>\n\t\t\t\t<legend>\n\t\t\t\t\t<div className=\"block-editor-color-gradient-control__color-indicator\">\n\t\t\t\t\t\t<BaseControl.VisualLabel>\n\t\t\t\t\t\t\t<VisualLabel\n\t\t\t\t\t\t\t\tcurrentTab={ currentTab }\n\t\t\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\t\t\tcolorValue={ colorValue }\n\t\t\t\t\t\t\t\tgradientValue={ gradientValue }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</BaseControl.VisualLabel>\n\t\t\t\t\t</div>\n\t\t\t\t</legend>\n\t\t\t\t{ canChooseAColor && canChooseAGradient && (\n\t\t\t\t\t<ButtonGroup className=\"block-editor-color-gradient-control__button-tabs\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisSmall\n\t\t\t\t\t\t\tisPressed={ currentTab === 'color' }\n\t\t\t\t\t\t\tonClick={ () => setCurrentTab( 'color' ) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Solid' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisSmall\n\t\t\t\t\t\t\tisPressed={ currentTab === 'gradient' }\n\t\t\t\t\t\t\tonClick={ () => setCurrentTab( 'gradient' ) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Gradient' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t) }\n\t\t\t\t{ ( currentTab === 'color' || ! canChooseAGradient ) && (\n\t\t\t\t\t<ColorPalette\n\t\t\t\t\t\tvalue={ colorValue }\n\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\tcanChooseAGradient\n\t\t\t\t\t\t\t\t? ( newColor ) => {\n\t\t\t\t\t\t\t\t\t\tonColorChange( newColor );\n\t\t\t\t\t\t\t\t\t\tonGradientChange();\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t: onColorChange\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ ...{ colors, disableCustomColors } }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ ( currentTab === 'gradient' || ! canChooseAColor ) && (\n\t\t\t\t\t<GradientPicker\n\t\t\t\t\t\tvalue={ gradientValue }\n\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\tcanChooseAColor\n\t\t\t\t\t\t\t\t? ( newGradient ) => {\n\t\t\t\t\t\t\t\t\t\tonGradientChange( newGradient );\n\t\t\t\t\t\t\t\t\t\tonColorChange();\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t: onGradientChange\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ ...{ gradients, disableCustomGradients } }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</fieldset>\n\t\t</BaseControl>\n\t);\n}\n\nfunction ColorGradientControlSelect( props ) {\n\tconst colorGradientSettings = useSelect( ( select ) => {\n\t\tconst settings = select( 'core/block-editor' ).getSettings();\n\t\treturn pick( settings, colorsAndGradientKeys );\n\t} );\n\tcolorGradientSettings.disableCustomColors = ! useEditorFeature(\n\t\t'color.custom'\n\t);\n\tcolorGradientSettings.disableCustomGradients = ! useEditorFeature(\n\t\t'gradient.custom'\n\t);\n\n\treturn (\n\t\t<ColorGradientControlInner\n\t\t\t{ ...{ ...colorGradientSettings, ...props } }\n\t\t/>\n\t);\n}\n\nfunction ColorGradientControl( props ) {\n\tif (\n\t\tevery( colorsAndGradientKeys, ( key ) => props.hasOwnProperty( key ) )\n\t) {\n\t\treturn <ColorGradientControlInner { ...props } />;\n\t}\n\treturn <ColorGradientControlSelect { ...props } />;\n}\n\nexport default ColorGradientControl;\n"]}
{"version":3,"sources":["@wordpress/block-editor/src/components/block-navigation/branch.js"],"names":["BlockNavigationBranch","props","blocks","selectBlock","selectedBlockClientId","showAppender","showBlockMovers","showNestedBlocks","parentBlockClientId","level","terminatedLevels","path","isTreeRoot","filteredBlocks","itemHasAppender","parentClientId","hasAppender","blockCount","length","rowCount","appenderPosition","block","index","clientId","innerBlocks","position","isLastRowAtLevel","updatedTerminatedLevels","updatedPath","hasNestedBlocks","hasNestedAppender","defaultProps"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { map, compact } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Fragment } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport BlockNavigationBlock from './block';\nimport BlockNavigationAppender from './appender';\n\nexport default function BlockNavigationBranch( props ) {\n\tconst {\n\t\tblocks,\n\t\tselectBlock,\n\t\tselectedBlockClientId,\n\t\tshowAppender,\n\t\tshowBlockMovers,\n\t\tshowNestedBlocks,\n\t\tparentBlockClientId,\n\t\tlevel = 1,\n\t\tterminatedLevels = [],\n\t\tpath = [],\n\t} = props;\n\n\tconst isTreeRoot = ! parentBlockClientId;\n\tconst filteredBlocks = compact( blocks );\n\tconst itemHasAppender = ( parentClientId ) =>\n\t\tshowAppender &&\n\t\t! isTreeRoot &&\n\t\tselectedBlockClientId === parentClientId;\n\tconst hasAppender = itemHasAppender( parentBlockClientId );\n\t// Add +1 to the rowCount to take the block appender into account.\n\tconst blockCount = filteredBlocks.length;\n\tconst rowCount = hasAppender ? blockCount + 1 : blockCount;\n\tconst appenderPosition = rowCount;\n\n\treturn (\n\t\t<>\n\t\t\t{ map( filteredBlocks, ( block, index ) => {\n\t\t\t\tconst { clientId, innerBlocks } = block;\n\t\t\t\tconst position = index + 1;\n\t\t\t\tconst isLastRowAtLevel = rowCount === position;\n\t\t\t\tconst updatedTerminatedLevels = isLastRowAtLevel\n\t\t\t\t\t? [ ...terminatedLevels, level ]\n\t\t\t\t\t: terminatedLevels;\n\t\t\t\tconst updatedPath = [ ...path, position ];\n\t\t\t\tconst hasNestedBlocks =\n\t\t\t\t\tshowNestedBlocks && !! innerBlocks && !! innerBlocks.length;\n\t\t\t\tconst hasNestedAppender = itemHasAppender( clientId );\n\n\t\t\t\treturn (\n\t\t\t\t\t<Fragment key={ clientId }>\n\t\t\t\t\t\t<BlockNavigationBlock\n\t\t\t\t\t\t\tblock={ block }\n\t\t\t\t\t\t\tonClick={ selectBlock }\n\t\t\t\t\t\t\tisSelected={ selectedBlockClientId === clientId }\n\t\t\t\t\t\t\tlevel={ level }\n\t\t\t\t\t\t\tposition={ position }\n\t\t\t\t\t\t\trowCount={ rowCount }\n\t\t\t\t\t\t\tsiblingBlockCount={ blockCount }\n\t\t\t\t\t\t\tshowBlockMovers={ showBlockMovers }\n\t\t\t\t\t\t\tterminatedLevels={ terminatedLevels }\n\t\t\t\t\t\t\tpath={ updatedPath }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ ( hasNestedBlocks || hasNestedAppender ) && (\n\t\t\t\t\t\t\t<BlockNavigationBranch\n\t\t\t\t\t\t\t\tblocks={ innerBlocks }\n\t\t\t\t\t\t\t\tselectedBlockClientId={ selectedBlockClientId }\n\t\t\t\t\t\t\t\tselectBlock={ selectBlock }\n\t\t\t\t\t\t\t\tshowAppender={ showAppender }\n\t\t\t\t\t\t\t\tshowBlockMovers={ showBlockMovers }\n\t\t\t\t\t\t\t\tshowNestedBlocks={ showNestedBlocks }\n\t\t\t\t\t\t\t\tparentBlockClientId={ clientId }\n\t\t\t\t\t\t\t\tlevel={ level + 1 }\n\t\t\t\t\t\t\t\tterminatedLevels={ updatedTerminatedLevels }\n\t\t\t\t\t\t\t\tpath={ updatedPath }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Fragment>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t\t{ hasAppender && (\n\t\t\t\t<BlockNavigationAppender\n\t\t\t\t\tparentBlockClientId={ parentBlockClientId }\n\t\t\t\t\tposition={ rowCount }\n\t\t\t\t\trowCount={ appenderPosition }\n\t\t\t\t\tlevel={ level }\n\t\t\t\t\tterminatedLevels={ terminatedLevels }\n\t\t\t\t\tpath={ [ ...path, appenderPosition ] }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nBlockNavigationBranch.defaultProps = {\n\tselectBlock: () => {},\n};\n"]}
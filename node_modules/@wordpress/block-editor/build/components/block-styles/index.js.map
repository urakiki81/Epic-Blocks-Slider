{"version":3,"sources":["@wordpress/block-editor/src/components/block-styles/index.js"],"names":["useGenericPreviewBlock","block","type","example","name","attributes","innerBlocks","BlockStyles","clientId","onSwitch","noop","onHoverClassName","itemRole","selector","select","getBlock","getBlockStyles","blockType","styles","className","updateBlockAttributes","genericPreviewBlock","length","renderedStyles","label","isDefault","activeStyle","map","style","styleClassName","BlockStyleItem","isActive","onBlur","onHover","onSelect","previewBlocks","event","ENTER","keyCode","SPACE","preventDefault"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { find, noop } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { ENTER, SPACE } from '@wordpress/keycodes';\nimport { _x } from '@wordpress/i18n';\nimport {\n\tgetBlockType,\n\tcloneBlock,\n\tgetBlockFromExample,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { getActiveStyle, replaceActiveStyle } from './utils';\nimport BlockPreview from '../block-preview';\n\nconst useGenericPreviewBlock = ( block, type ) =>\n\tuseMemo(\n\t\t() =>\n\t\t\ttype.example\n\t\t\t\t? getBlockFromExample( block.name, {\n\t\t\t\t\t\tattributes: type.example.attributes,\n\t\t\t\t\t\tinnerBlocks: type.example.innerBlocks,\n\t\t\t\t  } )\n\t\t\t\t: cloneBlock( block ),\n\t\t[ type.example ? block.name : block, type ]\n\t);\n\nfunction BlockStyles( {\n\tclientId,\n\tonSwitch = noop,\n\tonHoverClassName = noop,\n\titemRole,\n} ) {\n\tconst selector = ( select ) => {\n\t\tconst { getBlock } = select( 'core/block-editor' );\n\t\tconst { getBlockStyles } = select( 'core/blocks' );\n\t\tconst block = getBlock( clientId );\n\t\tconst blockType = getBlockType( block.name );\n\t\treturn {\n\t\t\tblock,\n\t\t\ttype: blockType,\n\t\t\tstyles: getBlockStyles( block.name ),\n\t\t\tclassName: block.attributes.className || '',\n\t\t};\n\t};\n\n\tconst { styles, block, type, className } = useSelect( selector, [\n\t\tclientId,\n\t] );\n\n\tconst { updateBlockAttributes } = useDispatch( 'core/block-editor' );\n\tconst genericPreviewBlock = useGenericPreviewBlock( block, type );\n\n\tif ( ! styles || styles.length === 0 ) {\n\t\treturn null;\n\t}\n\n\tconst renderedStyles = find( styles, 'isDefault' )\n\t\t? styles\n\t\t: [\n\t\t\t\t{\n\t\t\t\t\tname: 'default',\n\t\t\t\t\tlabel: _x( 'Default', 'block style' ),\n\t\t\t\t\tisDefault: true,\n\t\t\t\t},\n\t\t\t\t...styles,\n\t\t  ];\n\n\tconst activeStyle = getActiveStyle( renderedStyles, className );\n\treturn (\n\t\t<div className=\"block-editor-block-styles\">\n\t\t\t{ renderedStyles.map( ( style ) => {\n\t\t\t\tconst styleClassName = replaceActiveStyle(\n\t\t\t\t\tclassName,\n\t\t\t\t\tactiveStyle,\n\t\t\t\t\tstyle\n\t\t\t\t);\n\t\t\t\treturn (\n\t\t\t\t\t<BlockStyleItem\n\t\t\t\t\t\tgenericPreviewBlock={ genericPreviewBlock }\n\t\t\t\t\t\tclassName={ className }\n\t\t\t\t\t\tisActive={ activeStyle === style }\n\t\t\t\t\t\tkey={ style.name }\n\t\t\t\t\t\tonSelect={ () => {\n\t\t\t\t\t\t\tupdateBlockAttributes( clientId, {\n\t\t\t\t\t\t\t\tclassName: styleClassName,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tonHoverClassName( null );\n\t\t\t\t\t\t\tonSwitch();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonBlur={ () => onHoverClassName( null ) }\n\t\t\t\t\t\tonHover={ () => onHoverClassName( styleClassName ) }\n\t\t\t\t\t\tstyle={ style }\n\t\t\t\t\t\tstyleClassName={ styleClassName }\n\t\t\t\t\t\titemRole={ itemRole }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</div>\n\t);\n}\n\nfunction BlockStyleItem( {\n\tgenericPreviewBlock,\n\tstyle,\n\tisActive,\n\tonBlur,\n\tonHover,\n\tonSelect,\n\tstyleClassName,\n\titemRole,\n} ) {\n\tconst previewBlocks = useMemo( () => {\n\t\treturn {\n\t\t\t...genericPreviewBlock,\n\t\t\tattributes: {\n\t\t\t\t...genericPreviewBlock.attributes,\n\t\t\t\tclassName: styleClassName,\n\t\t\t},\n\t\t};\n\t}, [ genericPreviewBlock, styleClassName ] );\n\n\treturn (\n\t\t<div\n\t\t\tkey={ style.name }\n\t\t\tclassName={ classnames( 'block-editor-block-styles__item', {\n\t\t\t\t'is-active': isActive,\n\t\t\t} ) }\n\t\t\tonClick={ () => onSelect() }\n\t\t\tonKeyDown={ ( event ) => {\n\t\t\t\tif ( ENTER === event.keyCode || SPACE === event.keyCode ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tonSelect();\n\t\t\t\t}\n\t\t\t} }\n\t\t\tonMouseEnter={ onHover }\n\t\t\tonMouseLeave={ onBlur }\n\t\t\trole={ itemRole || 'button' }\n\t\t\ttabIndex=\"0\"\n\t\t\taria-label={ style.label || style.name }\n\t\t>\n\t\t\t<div className=\"block-editor-block-styles__item-preview\">\n\t\t\t\t<BlockPreview viewportWidth={ 500 } blocks={ previewBlocks } />\n\t\t\t</div>\n\t\t\t<div className=\"block-editor-block-styles__item-label\">\n\t\t\t\t{ style.label || style.name }\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default BlockStyles;\n"]}
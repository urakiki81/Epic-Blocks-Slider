{"version":3,"sources":["@wordpress/block-editor/src/hooks/color-panel.js"],"names":["ColorPanel","settings","clientId","enableContrastChecking","window","getComputedStyle","Node","detectedBackgroundColor","setDetectedBackgroundColor","detectedColor","setDetectedColor","colorsDetectionElement","color","backgroundColorNode","backgroundColor","parentNode","nodeType","ELEMENT_NODE"],"mappings":";;;;;;;;;AAIA;;;;AADA;;AAMA;;AACA;;AACA;;AACA;;AAZA;;;;AAMA;;;AAQe,SAASA,UAAT,OAIX;AAAA,MAHHC,QAGG,QAHHA,QAGG;AAAA,MAFHC,QAEG,QAFHA,QAEG;AAAA,mCADHC,sBACG;AAAA,MADHA,sBACG,sCADsB,IACtB;AAAA,gBACgCC,MADhC;AAAA,MACKC,gBADL,WACKA,gBADL;AAAA,MACuBC,IADvB,WACuBA,IADvB;;AAAA,kBAG6D,wBAH7D;AAAA;AAAA,MAGKC,uBAHL;AAAA,MAG8BC,0BAH9B;;AAAA,mBAIyC,wBAJzC;AAAA;AAAA,MAIKC,aAJL;AAAA,MAIoBC,gBAJpB;;AAMH,0BAAW,YAAM;AAChB,QAAK,CAAEP,sBAAP,EAAgC;AAC/B;AACA;;AAED,QAAMQ,sBAAsB,GAAG,0BAAiBT,QAAjB,CAA/B;;AACA,QAAK,CAAES,sBAAP,EAAgC;AAC/B;AACA;;AACDD,IAAAA,gBAAgB,CAAEL,gBAAgB,CAAEM,sBAAF,CAAhB,CAA2CC,KAA7C,CAAhB;AAEA,QAAIC,mBAAmB,GAAGF,sBAA1B;AACA,QAAIG,eAAe,GAAGT,gBAAgB,CAAEQ,mBAAF,CAAhB,CACpBC,eADF;;AAEA,WACCA,eAAe,KAAK,kBAApB,IACAD,mBAAmB,CAACE,UADpB,IAEAF,mBAAmB,CAACE,UAApB,CAA+BC,QAA/B,KAA4CV,IAAI,CAACW,YAHlD,EAIE;AACDJ,MAAAA,mBAAmB,GAAGA,mBAAmB,CAACE,UAA1C;AACAD,MAAAA,eAAe,GAAGT,gBAAgB,CAAEQ,mBAAF,CAAhB,CAChBC,eADF;AAEA;;AAEDN,IAAAA,0BAA0B,CAAEM,eAAF,CAA1B;AACA,GAzBD;AA2BA,SACC,4BAAC,0BAAD,QACC,4BAAC,mCAAD;AACC,IAAA,KAAK,EAAG,cAAI,gBAAJ,CADT;AAEC,IAAA,WAAW,EAAG,KAFf;AAGC,IAAA,QAAQ,EAAGb;AAHZ,KAKGE,sBAAsB,IACvB,4BAAC,wBAAD;AACC,IAAA,eAAe,EAAGI,uBADnB;AAEC,IAAA,SAAS,EAAGE;AAFb,IANF,CADD,CADD;AAgBA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState, useEffect } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport PanelColorGradientSettings from '../components/colors-gradients/panel-color-gradient-settings';\nimport ContrastChecker from '../components/contrast-checker';\nimport InspectorControls from '../components/inspector-controls';\nimport { getBlockDOMNode } from '../utils/dom';\n\nexport default function ColorPanel( {\n\tsettings,\n\tclientId,\n\tenableContrastChecking = true,\n} ) {\n\tconst { getComputedStyle, Node } = window;\n\n\tconst [ detectedBackgroundColor, setDetectedBackgroundColor ] = useState();\n\tconst [ detectedColor, setDetectedColor ] = useState();\n\n\tuseEffect( () => {\n\t\tif ( ! enableContrastChecking ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst colorsDetectionElement = getBlockDOMNode( clientId );\n\t\tif ( ! colorsDetectionElement ) {\n\t\t\treturn;\n\t\t}\n\t\tsetDetectedColor( getComputedStyle( colorsDetectionElement ).color );\n\n\t\tlet backgroundColorNode = colorsDetectionElement;\n\t\tlet backgroundColor = getComputedStyle( backgroundColorNode )\n\t\t\t.backgroundColor;\n\t\twhile (\n\t\t\tbackgroundColor === 'rgba(0, 0, 0, 0)' &&\n\t\t\tbackgroundColorNode.parentNode &&\n\t\t\tbackgroundColorNode.parentNode.nodeType === Node.ELEMENT_NODE\n\t\t) {\n\t\t\tbackgroundColorNode = backgroundColorNode.parentNode;\n\t\t\tbackgroundColor = getComputedStyle( backgroundColorNode )\n\t\t\t\t.backgroundColor;\n\t\t}\n\n\t\tsetDetectedBackgroundColor( backgroundColor );\n\t} );\n\n\treturn (\n\t\t<InspectorControls>\n\t\t\t<PanelColorGradientSettings\n\t\t\t\ttitle={ __( 'Color settings' ) }\n\t\t\t\tinitialOpen={ false }\n\t\t\t\tsettings={ settings }\n\t\t\t>\n\t\t\t\t{ enableContrastChecking && (\n\t\t\t\t\t<ContrastChecker\n\t\t\t\t\t\tbackgroundColor={ detectedBackgroundColor }\n\t\t\t\t\t\ttextColor={ detectedColor }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</PanelColorGradientSettings>\n\t\t</InspectorControls>\n\t);\n}\n"]}